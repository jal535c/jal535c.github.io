!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,o){if(!e)return;if("string"==typeof e)return t(e,o);var l=Object.prototype.toString.call(e).slice(8,-1);"Object"===l&&e.constructor&&(l=e.constructor.name);if("Map"===l||"Set"===l)return Array.from(e);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return t(e,o)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,l=new Array(t);o<t;o++)l[o]=e[o];return l}
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */define(["touchr","ojdnd","ojs/ojeditablevalue","ojs/ojinputnumber","ojs/ojmenu","ojs/ojpopup","ojs/ojbutton","ojs/ojdatasource-common","ojs/ojdataprovideradapter","ojs/ojlistdataproviderview","ojs/ojselector","ojs/ojcore-base","jquery","ojs/ojdomutils","ojs/ojlogger","ojs/ojcontext","ojs/ojconfig","ojs/ojtranslation","ojs/ojthemeutils","ojs/ojcomponentcore","ojs/ojdatacollection-common","ojs/ojanimation","ojs/ojdomscroller","ojs/ojcustomelement-utils","ojs/ojkeyset","ojs/ojvalidator-regexp"],function(t,o,l,n,i,s,a,r,_,d,h,u,c,S,C,E,p,T,g,f,m,b,A,y,L,R){"use strict";
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
var v;d=d&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d,u=u&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u,c=c&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c,E=E&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E,A=A&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A,R=R&&Object.prototype.hasOwnProperty.call(R,"default")?R.default:R,(v={properties:{accessibility:{type:"object",properties:{rowHeader:{type:"string"}}},as:{type:"string",value:""},columns:{type:"Array<Object>",writeback:!0},columnsDefault:{type:"object",properties:{className:{type:"string"},field:{type:"string"},footerClassName:{type:"string"},footerRenderer:{type:"function"},footerStyle:{type:"string"},footerTemplate:{type:"string"},headerClassName:{type:"string"},headerRenderer:{type:"function"},headerStyle:{type:"string"},headerTemplate:{type:"string"},headerText:{type:"string"},maxWidth:{type:"string|number"},minWidth:{type:"string|number",enumValues:["auto"],value:"auto"},renderer:{type:"function"},resizable:{type:"string",enumValues:["disabled","enabled"],value:"disabled"},sortProperty:{type:"string"},sortable:{type:"string",enumValues:["auto","disabled","enabled"],value:"auto"},style:{type:"string"},template:{type:"string"},weight:{type:"number",value:1},width:{type:"string|number"}}},currentRow:{type:"object",writeback:!0},data:{type:"object"},display:{type:"string",enumValues:["grid","list"],value:"list"},dnd:{type:"object",properties:{drag:{type:"object",properties:{rows:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},drag:{type:"function"},dragEnd:{type:"function"},dragStart:{type:"function"}}}}},drop:{type:"object",properties:{columns:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragLeave:{type:"function"},dragOver:{type:"function"},drop:{type:"function"}}},rows:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragLeave:{type:"function"},dragOver:{type:"function"},drop:{type:"function"}}}}},reorder:{type:"object",properties:{columns:{type:"string",enumValues:["disabled","enabled"],value:"disabled"}}}}},editMode:{type:"string",enumValues:["none","rowEdit"],value:"none"},editRow:{type:"object",writeback:!0,value:{rowKey:null,rowIndex:-1}},firstSelectedRow:{type:"object",writeback:!0,readOnly:!0,value:{key:null,data:null},properties:{data:{type:"any"},key:{type:"any"}}},horizontalGridVisible:{type:"string",enumValues:["auto","disabled","enabled"],value:"auto"},layout:{type:"string",enumValues:["contents","fixed"],value:"contents"},rowRenderer:{type:"function"},scrollPolicy:{type:"string",enumValues:["auto","loadAll","loadMoreOnScroll"],value:"auto"},scrollPolicyOptions:{type:"object",properties:{fetchSize:{type:"number",value:25},maxCount:{type:"number",value:500}}},scrollPosition:{type:"object",writeback:!0,value:{x:0,y:0},properties:{columnIndex:{type:"number"},columnKey:{type:"any"},offsetX:{type:"number"},offsetY:{type:"number"},rowIndex:{type:"number"},rowKey:{type:"any"},x:{type:"number"},y:{type:"number"}}},scrollToKey:{type:"string",enumValues:["always","auto","capability","never"],value:"auto"},selected:{type:"object",writeback:!0,properties:{column:{type:"KeySet",writeback:!0},row:{type:"KeySet",writeback:!0}}},selection:{type:"Array<Object>",writeback:!0,value:[]},selectionMode:{type:"Object<string, string>",properties:{column:{type:"string",enumValues:["multiple","none","single"]},row:{type:"string",enumValues:["multiple","none","single"]}}},selectionRequired:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{accessibleColumnContext:{type:"string"},accessibleColumnFooterContext:{type:"string"},accessibleColumnHeaderContext:{type:"string"},accessibleRowContext:{type:"string"},accessibleSortAscending:{type:"string"},accessibleSortDescending:{type:"string"},accessibleSortable:{type:"string"},accessibleStateSelected:{type:"string"},labelAccSelectionAffordanceBottom:{type:"string"},labelAccSelectionAffordanceTop:{type:"string"},labelDisableNonContiguousSelection:{type:"string"},labelEditRow:{type:"string"},labelEnableNonContiguousSelection:{type:"string"},labelResize:{type:"string"},labelResizePopupCancel:{type:"string"},labelResizePopupSpinner:{type:"string"},labelResizePopupSubmit:{type:"string"},labelSelectAndEditRow:{type:"string"},labelSelectColum:{type:"string"},labelSelectRow:{type:"string"},labelSort:{type:"string"},labelSortAsc:{type:"string"},labelSortDsc:{type:"string"},msgColumnResizeWidthValidation:{type:"string"},msgFetchingData:{type:"string"},msgInitializing:{type:"string"},msgNoData:{type:"string"},msgScrollPolicyMaxCountDetail:{type:"string"},msgScrollPolicyMaxCountSummary:{type:"string"},msgStatusSortAscending:{type:"string"},msgStatusSortDescending:{type:"string"}}},verticalGridVisible:{type:"string",enumValues:["auto","disabled","enabled"],value:"auto"}},methods:{getContextByNode:{},getDataForVisibleRow:{},getProperty:{},refresh:{},refreshRow:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateEnd:{},ojAnimateStart:{},ojBeforeCurrentRow:{},ojBeforeRowEdit:{},ojBeforeRowEditEnd:{},ojRowAction:{},ojSort:{}},extension:{}}).extension._WIDGET_NAME="ojTable",v.extension._INNER_ELEM="table",u.CustomElementBridge.register("oj-table",{metadata:v});
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
var O=function(){};O._BUNDLE_KEY={_MSG_FETCHING_DATA:"msgFetchingData",_MSG_NO_DATA:"msgNoData",_MSG_INITIALIZING:"msgInitializing",_MSG_STATUS_SORT_ASC:"msgStatusSortAscending",_MSG_STATUS_SORT_DSC:"msgStatusSortDescending",_LABEL_SELECT_COLUMN:"labelSelectColumn",_LABEL_SELECT_ROW:"labelSelectRow",_LABEL_EDIT_ROW:"labelEditRow",_LABEL_SELECT_AND_EDIT_ROW:"labelSelectAndEditRow"},O._LOGGER_MSG={_ERR_PRECURRENTROW_ERROR_SUMMARY:"Did not change current row due to error.",_ERR_PRECURRENTROW_ERROR_DETAIL:"Error detail: {error}.",_ERR_CURRENTROW_UNAVAILABLE_INDEX_SUMMARY:"Did not change current row due to unavailable row index.",_ERR_CURRENTROW_UNAVAILABLE_INDEX_DETAIL:"Unavailable row index: {rowIdx}.",_ERR_REFRESHROW_INVALID_INDEX_SUMMARY:"Invalid row index value.",_ERR_REFRESHROW_INVALID_INDEX_DETAIL:"Row index: {rowIdx}.",_ERR_DATA_INVALID_TYPE_SUMMARY:"Invalid data type.",_ERR_DATA_INVALID_TYPE_DETAIL:"Please specify the appropriate data type.",_ERR_ELEMENT_INVALID_TYPE_SUMMARY:"Invalid element type.",_ERR_ELEMENT_INVALID_TYPE_DETAIL:"Only a <table> element can be specified for ojTable."},O._UPDATE={_DATA_REFRESH:"dataRefresh",_DATA_SORT:"dataSort",_RESIZE:"resize",_REFRESH:"refresh",_COL_REORDER:"colReorder",_COL_RESIZE:"colResize",_ROW_REFRESH:"rowRefresh",_ROWS_ADDED:"rowsAdded",_ROWS_REMOVED:"rowsRemoved"},O._FIELD_ID="id",O._CONST_ATTRIBUTE="attribute",O._CONST_DATA="data",O._CONST_METADATA="metadata",O._CONST_INDEXES="indexes",O._CONST_INDEX="index",O._CONST_KEY="key",O._CONST_KEYS="keys",O._CONST_AFTERKEYS="afterKeys",O._CONST_ADDBEFOREKEYS="addBeforeKeys",O._CONST_CLIENTID="clientId",O._CONST_STARTINDEX="startIndex",O._CONST_ENDINDEX="endIndex",O._CONST_PAGESIZE="size",O._CONST_OFFSET="offset",O._CONST_SILENT="silent",O._CONST_COLUMN="column",O._CONST_ROW="row",O._CONST_VALUE="value",O._CONST_SORTCRITERIA="sortCriteria",O._COLUMN_HEADER_ID="_headerColumn",O._COLUMN_HEADER_TEXT_ID="_headerColumnText",O._COLUMN_HEADER_ASC_ID="_headerColumnAsc",O._COLUMN_HEADER_DSC_ID="_headerColumnDsc",O._COLUMN_HEADER_ID_PREFIX="_hdrCol",O._COLUMN_HEADER_ROW_SELECT_ID="_hdrColRowSel",O._FOCUS_CALLED="_focusedCalled",O._ROW_TEMPLATE="rowTemplate",O._CELL_TEMPLATE="template",O._HEADER_TEMPLATE="headerTemplate",O._FOOTER_TEMPLATE="footerTemplate",O._OPTION_AUTO="auto",O._OPTION_ENABLED="enabled",O._OPTION_DISABLED="disabled",O._OPTION_DISPLAY={_LIST:"list",_GRID:"grid"},O._OPTION_EDIT_MODE={_NONE:"none",_ROW_EDIT:"rowEdit"},O._OPTION_SELECTION_MODES={_SINGLE:"single",_MULTIPLE:"multiple",_NONE:"none"},O._OPTION_SCROLL_POLICY={_AUTO:"auto",_LOADMORE_ON_SCROLL:"loadMoreOnScroll",_LOAD_ALL:"loadAll"},O._COLUMN_SORT_ORDER={_ASCENDING:"ascending",_DESCENDING:"descending"},O._DND_REORDER_TABLE_ID_DATA_KEY="oj-table-dnd-reorder-table-id",O._CURRENT_ROW_STATUS={_UPDATED:"updated",_IGNORED:"ignored",_VETOED:"vetoed",_ERROR:"error"},O._BATCH_PROCESS_SIZE_WHEN_IDLE=5,O.prototype._isStickyLayoutEnabled=function(){return null==this._defaultOptions&&(this._defaultOptions=g.parseJSONFromFontFamily("oj-table-option-defaults")),!0===this._defaultOptions.enableSticky},O.prototype._isFixedLayoutEnabled=function(){return"fixed"===this.options.layout},O.prototype._isTableStretchEnabled=function(){return this._getTableContainer().classList.contains(O.CSS_CLASSES._TABLE_STRETCH_CLASS)},O.prototype._isNodeEditable=function(e){return this._isNodeType(e,/^INPUT|TEXTAREA/)},O.prototype._isNodeClickable=function(e){return this._isNodeType(e,/SELECT|OPTION|BUTTON|^A\b/)},O.prototype._isNodeDraggable=function(e){return null!=this._getFirstAncestor(e,"[draggable='true']",!0)},O.prototype._isNodeType=function(e,t){for(var o=this._getTable();null!=e&&e!==o;){var l=e.nodeName;if(l===O.DOM_ELEMENT._TD||l===O.DOM_ELEMENT._TH)break;if(3!==e.nodeType)if(l.match(t))if(-1!==e.getAttribute(O.DOM_ATTR._TABINDEX))return!0;e=e.parentNode}return!1},O.prototype._handleDataFetchStart=function(){this._setDataWaitingState()},O.prototype._setDataWaitingState=function(e){!1!==e&&(this._clearScrollBuffer(),this._showStatusMessage(),this._hideNoDataMessage()),this._dataFetching=!0,this._dataResolveFunc||(this._dataResolveFunc=this._addComponentBusyState("is waiting for data."))},O.prototype._checkViewportRejected=function(){this._animateOnFetch=!1,this._clearDataWaitingState()},O.prototype._clearDataWaitingState=function(){this._pendingFetchStale?(this._pendingFetchStale=!1,this._queueTask(function(){return this._getLayoutManager().notifyTableUpdate(O._UPDATE._DATA_REFRESH),this._beforeDataRefresh(),this._invokeDataFetchRows()}.bind(this))):(this._hideStatusMessage(),this._dataFetching=!1,this._pendingFetchStale=!1,this._dataResolveFunc&&(this._dataResolveFunc(),this._dataResolveFunc=null))},O.prototype._setComponentNotReady=function(){this._readyResolveFunc||(this._readyResolveFunc=this._addComponentBusyState("is being loaded."))},O.prototype._setComponentReady=function(){this._readyResolveFunc&&(this._readyResolveFunc(),this._readyResolveFunc=null)},O.prototype._addComponentBusyState=function(e){var t=E.getContext(this.element[0]).getBusyContext(),o={description:"The component identified by '"+this._getTableId()+"' "+e};return t.addBusyState(o)},O.prototype._createComponentBusyState=function(e){var t=this._addComponentBusyState(e);return null==this._busyStateStack&&(this._busyStateStack=[]),this._busyStateStack.push(t),t},O.prototype._clearComponentBusyState=function(e){if(this._busyStateStack){var t=this._busyStateStack.indexOf(e);-1!==t&&(e(),this._busyStateStack.splice(t,1))}},O.prototype._clearBusyStateStack=function(){if(this._busyStateStack){for(var e=0;e<this._busyStateStack.length;e++)this._busyStateStack[e]();this._busyStateStack=null}},O.prototype._setFocusoutBusyState=function(){this._focusoutResolveFunc||(this._focusoutResolveFunc=this._addComponentBusyState("is handling focusout."))},O.prototype._clearFocusoutBusyState=function(){this._focusoutResolveFunc&&(this._focusoutResolveFunc(),this._focusoutResolveFunc=null)},O.prototype._setIdleRenderBusyState=function(){this._idleRenderResolveFunc||(this._idleRenderResolveFunc=this._addComponentBusyState("is waiting for idle rendering."))},O.prototype._clearIdleRenderBusyState=function(){this._idleRenderResolveFunc&&(this._idleRenderResolveFunc(),this._idleRenderResolveFunc=null)},O.prototype._setScrollPosBusyState=function(){this._scrollPosResolveFunc||(this._scrollPosResolveFunc=this._addComponentBusyState("is handling scroll position."))},O.prototype._clearScrollPosBusyState=function(){this._scrollPosResolveFunc&&(this._scrollPosResolveFunc(),this._scrollPosResolveFunc=null)},O.prototype._clearAllComponentBusyStates=function(){this._clearBusyStateStack(),this._pendingFetchStale=!1,this._clearDataWaitingState(),this._clearFocusoutBusyState(),this._clearIdleRenderBusyState(),this._clearScrollPosBusyState(),this._setComponentReady()},O.prototype._cleanComponent=function(e){this._clearAllComponentTimeouts(),this._clearAllComponentBusyStates(),this._clearOpenPopupListeners(),this._clearIdleCallback(),this._unregisterDomScroller(),e?(c(this._getTableBody()).removeAttr(f._OJ_CONTAINER_ATTR),this.element.children().remove("."+O.CSS_CLASSES._TABLE_HEADER_CLASS),this.element.children().remove("."+O.CSS_CLASSES._TABLE_BODY_CLASS),this.element.children().remove("."+O.CSS_CLASSES._TABLE_FOOTER_CLASS),this.element.children().remove("."+O.CSS_CLASSES._TABLE_STATUS_MESSAGE_CLASS),this.element.children().remove("."+O.CSS_CLASSES._TABLE_BODY_MESSAGE_ROW_CLASS),S.unwrap(this.element,c(this._getTableContainer())),this.element[0].classList.remove(O.CSS_CLASSES._TABLE_CLASS),this._data instanceof u.TableDataSourceAdapter&&this._data.destroy(),(this._hasHeaderTemplate||this._hasCellTemplate||this._hasFooterTemplate||this._hasRowTemplate)&&this._cleanTemplateNodes(this.element[0]),this._componentDestroyed=!0):(this._unregisterDataSourceEventListeners(),this._unregisterResizeListener())},O.prototype._clearAllComponentTimeouts=function(){this._clearFocusoutTimeout(),this._clearShowStatusTimeout()},O.prototype._clearFocusoutTimeout=function(){this._focusoutTimeout&&(clearTimeout(this._focusoutTimeout),this._focusoutTimeout=null)},O.prototype._clearShowStatusTimeout=function(){this._showStatusTimeout&&(clearTimeout(this._showStatusTimeout),this._showStatusTimeout=null)},O.prototype._setFinalTask=function(e){this._finalTask=e?e.bind(this):void 0},O.prototype._hasPendingTasks=function(){return this._taskCount>0},O.prototype._hasAdditionalPendingTasks=function(){return this._taskCount>1},O.prototype._queueTask=function(e){return this._pendingTasks||(this._taskCount=0,this._pendingTasks=Promise.resolve(),this._setComponentNotReady()),this._taskCount+=1,this._pendingTasks=this._pendingTasks.then(function(){if(!this._componentDestroyed)return e.bind(this)()}.bind(this)).then(function(e){if(this._taskCount-=1,0===this._taskCount){this._pendingTasks=void 0;try{this._componentDestroyed||(this._finalTask&&this._finalTask(),this._trigger("ready"))}catch(e){C.error(e)}this._setComponentReady()}return e}.bind(this),function(e){return this._taskCount-=1,0===this._taskCount&&(this._pendingTasks=void 0,C.error(e),this._setComponentReady()),Promise.reject(e)}.bind(this)),this._pendingTasks},O.prototype._draw=function(){if(this._setFinalTask(function(){this._syncTableSizing(),this._initialSelectionStateValidated?this._syncSelectionState():this._validateInitialSelectionState(),this._resetAriaLabel&&null!=this._accRowIndex&&null!=this._accColumnIndex&&this._updateAccStatusInfo(this._accRowIndex,this._accColumnIndex,this._accHeaderIndex,this._accFooterIndex),this._resetAriaLabel=!1}.bind(this)),!this.element.is("table")){var e=O._LOGGER_MSG._ERR_ELEMENT_INVALID_TYPE_SUMMARY,t=O._LOGGER_MSG._ERR_ELEMENT_INVALID_TYPE_DETAIL;throw new RangeError(e+"\n"+t)}this.element[0].classList.add(O.CSS_CLASSES._TABLE_ELEMENT_CLASS),this.element[0].setAttribute(O.DOM_ATTR._ROLE,"application"),this._createInitialTable(this._isTableHeaderless(),this._isTableFooterless()),this._styleInitialTable(),this._queueTask(function(){this._getLayoutManager().notifyTableUpdate(O._UPDATE._REFRESH),this._refreshTableHeader(),this._refreshTableFooter(),this._refreshTableBody(),this._processSlottedChildren()}.bind(this)),this.options.disabled&&this.disable()},O.prototype._refresh=function(){var e=!1;this._dataOption!==this.options[O._CONST_DATA]&&(this._clearCachedDataMetadata(),null==this._data&&(e=!0));var t=this._GetContextMenu();return null!=t&&t!==this._getContextMenuElement()&&this._createContextMenuContainer(),this._clearLayoutManager(),this._clearCachedDom(),this._refreshContextMenu(),this._refreshTableStatusMessage(),this._clearIdleCallback(),e?this._initFetch():this._queueTask(function(){return this._getLayoutManager().notifyTableUpdate(O._UPDATE._REFRESH),this._invokeDataFetchRows()}.bind(this))},O.prototype._refreshAll=function(e,t){var o=[];if((this._isColumnMetadataUpdated()||!this._isTableHeaderColumnsRendered()&&!this._isTableHeaderless())&&(this._clearCachedMetadata(),o.push(this._refreshTableHeader()),null!=this._sortColumn)){for(var l=!1,n=this._getColumnDefs(),i=n.length,s=0;s<i;s++){var a=n[s];if(u.Object.compareValues(a,this._sortColumn)){l=!0;break}}l||this._initFetch(null,!0)}return o.push(this._refreshTableFooter()),o.push(this._refreshTableBody(e,t)),Promise.all(o)},O.prototype._refreshTableHeader=function(){var e,t=this,o=this._getColumnDefs(),l=o.length,n=this._getTableColGroup();if(null!=n){if(c(n).empty(),this._isDefaultSelectorEnabled()){var i=this._createTableSelectorCol();n.appendChild(i)}for(e=0;e<l;e++){var s=this._createTableCol();n.appendChild(s)}}var a=this._getTableHeader();if(!a){if(this._isTableHeaderless())return Promise.resolve();a=this._createTableHeader(),this._styleTableHeader(a)}var r=this._getTableHeaderRow();for(this._unregisterChildStateListeners(r),this._hasHeaderTemplate&&(this._cleanTemplateNodes(r),this._hasHeaderTemplate=!1),c(r).empty(),e=0;e<l;e++){var _=o[e],d=this._getColumnRenderer(e,"header"),h=this._createTableHeaderColumn(e);if(d){var u=this._getRendererContextObject(h,{}),S={headerContext:u,columnIndex:e,data:_.headerText,componentElement:u.componentElement,parentElement:u.parentElement};_.sortable===O._OPTION_ENABLED?S.columnHeaderSortableIconRenderer=function(e,o){t._columnHeaderSortableIconRenderer(this,o)}:S.columnHeaderDefaultRenderer=function(e,o){t._columnHeaderDefaultRenderer(this,o)};var C=d(S);null!=C?(c(h).empty(),c(h).append(C)):(h=c(r).children()[e],this._setTableHeaderColumnAttributes(e,h),this._styleTableHeaderColumn(e,h,!1))}else{var E=this._getSlotTemplate(_[O._HEADER_TEMPLATE]);if(null==E&&this._isDefaultHeaderTemplateSlotValid()&&(E=this._getSlotTemplate("headerTemplate")),E){var p=this._getRootElement(),T=this._getTemplateEngine();if(null!=T){h&&c(h).empty();var g=this._getHeaderSlotTemplateContextObject(_.headerText,e),f=T.execute(p,E,g,this.options.as);f instanceof Array||(f=[f]),f.map(function(e){h.appendChild(e)}),this._hasHeaderTemplate=!0}}}}if(this._isDefaultSelectorEnabled()){var m=this._createTableHeaderSelectorColumn();r.insertBefore(m,r.firstChild)}return this._renderedTableHeaderColumns=!0,this._finalizeRowRendering([r])},O.prototype._refreshTableFooter=function(){var e=this._getColumnDefs(),t=this._getTableFooter();if(!t){if(this._isTableFooterless())return Promise.resolve();t=this._createTableFooter(),this._styleTableFooter(t)}t.style[O.CSS_PROP._VISIBILITY]=O.CSS_VAL._HIDDEN;var o=this._getTableFooterRow();if(this._hasFooterTemplate&&(this._cleanTemplateNodes(o),this._hasFooterTemplate=!1),c(o).empty(),e.length>0){for(var l=this._isDefaultFooterTemplateSlotValid(),n=e.length,i=0;i<n;i++){var s=e[i],a=this._getColumnRenderer(i,"footer"),r=this._createTableFooterCell();if(this._styleTableFooterCell(i,r),this._insertTableFooterCell(i,r),a){var _=this._getRendererContextObject(r,{}),d=a({footerContext:_,columnIndex:i,componentElement:_.componentElement,parentElement:_.parentElement});null!=d?(c(r).empty(),c(r).append(d)):(r=c(o).children()[i],this._setTableFooterColumnAttributes(i,r),this._styleTableFooterCell(i,r))}else{var h=this._getSlotTemplate(s[O._FOOTER_TEMPLATE]);if(null==h&&l&&(h=this._getSlotTemplate("footerTemplate")),h){var u=this._getRootElement(),S=this._getTemplateEngine();if(null!=S){var C=this._getFooterSlotTemplateContextObject(i),E=S.execute(u,h,C,this.options.as);E instanceof Array||(E=[E]),E.map(function(e){r.appendChild(e)}),this._hasFooterTemplate=!0}}}}if(this._isDefaultSelectorEnabled()){var p=this._createTableFooterSelectorCell();o.insertBefore(p,o.firstChild)}}return this._finalizeRowRendering([o])},O.prototype._refreshTableBody=function(e,t,o){var l=this._getTableBody();if(null==l)return Promise.resolve();var n,i,s,a=this._getRowIdxRowArray(e,t),r=c.contains(l,document.activeElement),_=!1;if(this._scrollLeft=void 0===this._scrollLeft?0:this._scrollLeft,this._scrollTop=void 0===this._scrollTop?0:this._scrollTop,0===t)r&&(_=!0),this._removeAllTableBodyRows();else if((n=this._getTableBodyRows()).length>0)for(s=n.length-1;s>=t;s--)r&&null!=(i=this._getTableBodyRow(s))&&c.contains(i,document.activeElement)&&(_=!0,r=!1),this._removeTableBodyRow(s);if(_&&this._getTable().focus(),this._clearCachedDomRowData(),this._hideNoDataMessage(),n=l.children,0!==a.length||0!==n.length){if(t>0&&this._isOverflow()&&!this._fetchBySyncScroll)return new Promise(function(o,n){this._setIdleRenderBusyState(),this._renderRowsWhenIdle(a.slice(0),l,t,o,n,e.isMouseWheel)}.bind(this));var d=this._getLayoutManager(),h=document.createDocumentFragment(),u=a.length;if(this._animateOnFetch&&this._IsCustomElement()){this._animateOnFetch=!1;var S=[],C=[];for(s=0;s<u;s++)C.push(a[s].rowIdx),S.push(this._addSingleTableBodyRow(a[s].rowIdx,a[s].row,h,t));return d.handleAfterRowsProcessed(h),this._appendElementToTableBody(h,l),this._clearCachedDomRowData(),this._animateVisibleRows(S,C,"add").then(function(){return this._afterRowsRendered(l)}.bind(this))}for(this._animateOnFetch=!1,o||(l.style[O.CSS_PROP._VISIBILITY]=O.CSS_VAL._HIDDEN),s=0;s<u;s++)this._renderRow(a[s],h,t);return d.handleAfterRowsProcessed(h),this._appendElementToTableBody(h,l),this._afterRowsRendered(l)}return this._showNoDataMessage(),Promise.resolve()},O.prototype._isDefaultSelectorEnabled=function(){return null==this._defaultOptions&&(this._defaultOptions=g.parseJSONFromFontFamily("oj-table-option-defaults")),!0===this._defaultOptions.enableSelector&&this._getRowSelectionMode()===O._OPTION_SELECTION_MODES._MULTIPLE},O.prototype._refreshTableBodyRow=function(e,t,o,l,n){var i=this._getRowRenderer(),s=this._getTableBody();(isNaN(e)||e<0)&&C.error("Error: Invalid rowIdx value: "+e);var a=this._hashCode(t[O._CONST_KEY]);if(null==o){if(!(o=this._getTableBodyRow(e)))return null;(this._hasCellTemplate||this._hasRowTemplate)&&this._cleanTemplateNodes(o),c(o).empty()}this._hideNoDataMessage();var r=this._getCurrentRow();r=r||{};var _=this._getRendererContextObject(o,{row:t,isCurrentRow:r.rowIndex===e}),d={rowContext:_,row:t[O._CONST_DATA],componentElement:_.componentElement,parentElement:_.parentElement,data:t[O._CONST_DATA]},h=this._getColumnDefs();if(null!=i||this._isDefaultRowTemplateSlotValid()&&null!==this._getSlotTemplate("rowTemplate")){if(null!=i){var u=i(d);null!=u?o.appendChild(u):null==l?o=s.children[e]:(n=null==n?0:n,o=l.children?l.children[e-n]:c(l).children()[e-n])}else{var S=this._getSlotTemplate("rowTemplate"),E=this._getRootElement(),p=this._getTemplateEngine();if(null!=p){for(var T=this._getRowSlotTemplateContextObject(d),g=p.execute(E,S,T,this.options.as),f=0;f<g.length;f++){if("TR"===g[f].tagName){o.parentNode.replaceChild(g[f],o);break}o.appendChild(g[f])}null==l?o=s.children[e]:(n=null==n?0:n,o=l.children?l.children[e-n]:c(l).children()[e-n]),this._hasRowTemplate=!0}}this._clearCachedDomRowData(),this._setTableBodyRowAttributes(t,o),this._styleTableBodyRow(o,!1);for(var m,b=this._getTableElementsByTagName(o,O.DOM_ELEMENT._TD),A=b.length,y=0;y<A;y++)m=b[y],this._setTableBodyCellAttributes(e,t[O._CONST_KEY],a,y,m),this._styleTableBodyCell(y,m,!1);if(null!=this._columnsDestMap)for(var L=0;L<this._columnsDestMap.length;L++){var R=b[this._columnsDestMap[L]];R.parentNode.appendChild(R)}h.length>0&&this._isDefaultSelectorEnabled()&&this._createTableBodyDefaultSelector(t.key,o)}else h.length>0&&this._isDefaultSelectorEnabled()&&this._createTableBodyDefaultSelector(t.key,o),this._tableBodyRowDefaultRenderer(e,t,d);return this._hasEditableRow()&&this._getEditableRowIdx()===e?o.classList.add(O.CSS_CLASSES._TABLE_DATA_ROW_EDIT_CLASS):o.classList.remove(O.CSS_CLASSES._TABLE_DATA_ROW_EDIT_CLASS),o["oj-table-oj-row-item"]=t,o},O.prototype._finalizeBodyRowRendering=function(e){return this._waitForAllBodyElementsToResolve(e).then(function(){var t=this._hasEditableRow()?this._getEditableRowKey():null;return e.forEach(function(e){var o=this._getRowKey(e);null!=t&&u.KeyUtils.equals(o,t)||m.disableAllFocusableElements(e)}.bind(this)),Promise.resolve(!0)}.bind(this))},O.prototype._finalizeRowRendering=function(e){return this._waitForAllElementsToResolve(e).then(function(){return e.forEach(function(e){m.disableAllFocusableElements(e)}),Promise.resolve(!0)})},O.prototype._waitForAllBodyElementsToResolve=function(e){return e.length>0&&this._hasRowOrCellRendererOrTemplate()?this._waitForAllElementsToResolve(e):Promise.resolve()},O.prototype._waitForAllElementsToResolve=function(e){var t=[];return e.forEach(function(e){e&&t.push(E.getContext(e).getBusyContext().whenReady())}),Promise.all(t)},O.prototype._refreshRow=function(e,t){var o=this._getData();if(!o)return Promise.resolve(!1);var l=this._getTableBodyRows();if(isNaN(e)||e<0||e>=l.length||0===l.length){var n=O._LOGGER_MSG._ERR_REFRESHROW_INVALID_INDEX_SUMMARY,i=T.applyParameters(O._LOGGER_MSG._ERR_REFRESHROW_INVALID_INDEX_DETAIL,{rowIdx:e.toString()});throw new RangeError(n+"\n"+i)}var s=this._getRowKeyForRowIdx(e);return this._queueTask(function(){return this._getLayoutManager().notifyTableUpdate(O._UPDATE._ROW_REFRESH),o.fetchByKeys({keys:new Set([s])}).then(function(o){if(null==o||null==o.results||0===o.results.size)return Promise.resolve(!1);var l=this._getTableBodyRow(e);t=t&&c.contains(l,document.activeElement);var n=o.results.get(s);return this._refreshTableBodyRow(e,{data:n.data,metadata:n.metadata,index:e,key:s}),t&&this._getTable().focus(),(l=this._getTableBodyRow(e))?this._finalizeBodyRowRendering([l]):Promise.resolve(!0)}.bind(this))}.bind(this))},O.prototype._refreshTableStatusMessage=function(){var e=this._getTableStatusMessage();null!=e&&c(e).remove(),this._createTableStatusMessage()},O.prototype._showStatusMessage=function(){if(!this._showStatusTimeout){var e=this._getTableTempSkeletonRow();this._statusMessageShown||e||(this._showStatusTimeout=setTimeout(function(){this._refreshTableStatusPosition(!0),this._showStatusTimeout=null}.bind(this),this._getShowStatusDelay()),this._isSkeletonSupport()&&!this._isPagingModelDataProvider()&&this._removeAllTableBodyRows())}},O.prototype._showProgressiveLoading=function(){if(this._isSkeletonSupport()){var e=this._getTableBodyRows(),t=this._getTableTempSkeletonRow();if(null!=e&&e.length>0&&!t){(t=this._createTableBodyRow()).classList.add(O.CSS_CLASSES._TABLE_TEMP_SKELETON_ROW_CLASS);var o=this._createTableBodyCell(),l=this._getColumnDefs().length;o.colSpan=this._isDefaultSelectorEnabled()?l+1:l;for(var n=0;n<3;n++)o.appendChild(this._createSkeletonRow());t.appendChild(o),this._appendElementToTableBody(t,this._getTableBody()),this._skeletonHWMSFadeInEndListener=function(){t.classList.remove("oj-animation-skeleton-fade-in"),t.querySelectorAll(".oj-table-skeleton-row").forEach(function(e){e.classList.add("oj-animation-skeleton")}),t.removeEventListener("animationend",this._skeletonHWMSFadeInEndListener)}.bind(this),t.addEventListener("animationend",this._skeletonHWMSFadeInEndListener),t.classList.add("oj-animation-skeleton-fade-in")}}},O.prototype._hideStatusMessage=function(){this._clearShowStatusTimeout();var e=this._getTableTempSkeletonRow();if(this._statusMessageShown||e){var t=this._getTableStatusMessage();if(t.style[O.CSS_PROP._DISPLAY]=O.CSS_VAL._NONE,this._isSkeletonSupport())if(e)this._getTableBody().removeChild(e);else for(var o=t.childNodes,l=o.length;l>0;l--)t.removeChild(o[l-1]);this._statusMessageShown=!1}},O.prototype._isStatusMessageShown=function(){return this._statusMessageShown},O.prototype._getDefaultOptions=function(){return null==this._defaultOptions&&(this._defaultOptions=g.parseJSONFromFontFamily("oj-table-option-defaults")||{}),this._defaultOptions},O.prototype._getShowStatusDelay=function(){var e=parseInt(this._getDefaultOptions().showIndicatorDelay,10);return isNaN(e)?0:e},O.prototype._isSkeletonSupport=function(){return"skeleton"===this._getDefaultOptions().loadIndicator},O.prototype._showNoDataMessage=function(){if(!this._noDataMessageShown){var e=this._getTableBodyMessageRow(),t=this._getData(),o=this._getSlotTemplate("noData");if(this._isDefaultTemplateSlotValid("noData")&&null!==o){var l=this._getTable(),n=this._getTableBody();l.classList.add(O.CSS_CLASSES._TABLE_NO_DATA_CONTAINER_CLASS);var i=document.createElement(O.DOM_ELEMENT._TR);i.classList.add(O.CSS_CLASSES._TABLE_NO_DATA_CONTAINER_CLASS),this._getTableContainer().classList.contains(O.CSS_CLASSES._TABLE_SCROLL_VERTICAL_CLASS)&&i.classList.add(O.CSS_CLASSES._TABLE_NO_DATA_ROW_CLASS),this._appendElementToTableBody(i,n);var s=document.createElement(O.DOM_ELEMENT._TD),a=this._getColumnDefs().length;this._isDefaultSelectorEnabled()&&(a+=1),s.setAttribute(O.DOM_ATTR._COLSPAN,a),i.appendChild(s);var r=this._getTemplateEngine();if(null!=r)r.execute(this._getRootElement(),o,{},null).forEach(function(e){s.appendChild(e)})}else{var _=null;_=null!=this.options.emptyText?this.options.emptyText:this.getTranslatedString(O._BUNDLE_KEY._MSG_NO_DATA);var d=null!=t?_:this.getTranslatedString(O._BUNDLE_KEY._MSG_INITIALIZING);null==e?this._createTableBodyMessageRow(this._getColumnDefs().length,d):this._setTableBodyMessage(d)}this._noDataMessageShown=!0}},O.prototype._hideNoDataMessage=function(){if(this._noDataMessageShown){var e=this._getTableBodyMessageRow();if(null!=e)c(e).remove();else{var t=this._getTable();if(t.classList.contains(O.CSS_CLASSES._TABLE_NO_DATA_CONTAINER_CLASS)){t.classList.remove(O.CSS_CLASSES._TABLE_NO_DATA_CONTAINER_CLASS);var o=t.querySelector("tr."+O.CSS_CLASSES._TABLE_NO_DATA_CONTAINER_CLASS);null!=o&&(this._cleanTemplateNodes(o),c(o).remove())}}this._noDataMessageShown=!1}},O.prototype._handleContextMenuResizePopup=function(){var e,t=document.getElementById(this._getTableId()+"_resize_popup_spinner"),o=this._getContextMenuResizePopup(),l=parseInt(o.getAttribute("data-oj-columnIdx"),10);this._IsCustomElement()?(e=t.value,o.close()):(e=c(t).ojInputNumber("option","value"),c(o).ojPopup("close"));for(var n=[],i=this.options.columns.length,s=0;s<i;s++)n[s]=c.extend({},{},this.options.columns[s]);var a=this._getLayoutManager().getMinimumForcedOffsetWidth(l);n[l].width=Math.max(e,a),this.option("columns",n,{_context:{writeback:!0,internalSet:!0}}),this._clearCachedMetadata(),this._queueTask(function(){this._getLayoutManager().notifyTableUpdate(O._UPDATE._COL_RESIZE),setTimeout(function(){this._getTable().focus()}.bind(this),0)}.bind(this))},O.prototype._handleContextMenuSelect=function(e,t){var o,l=(o=t?t.item:c(e.target)).attr("data-oj-command"),n=this._getFirstAncestor(this._contextMenuEvent.target,"."+O.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS,!0);n=null==n?this._contextMenuEventHeaderColumn:n;var i=this._getFirstAncestor(this._contextMenuEvent.target,"."+O.CSS_CLASSES._TABLE_DATA_CELL_CLASS,!0),s=null;if(null!=n&&(s=this._getElementColumnIdx(n)),null!=i&&(s=this._getElementColumnIdx(i)),null!==s)if("oj-table-sortAsc"===l)this._handleSortTableHeaderColumn(s,!0,e);else if("oj-table-sortDsc"===l)this._handleSortTableHeaderColumn(s,!1,e);else if("oj-table-enableNonContiguousSelection"===l)this._nonContiguousSelection=!0,this._removeTableBodyRowTouchSelectionAffordance(),o.attr("data-oj-command","oj-table-disableNonContiguousSelection"),o.children().first().text(this.getTranslatedString("labelDisableNonContiguousSelection"));else if("oj-table-disableNonContiguousSelection"===l)this._nonContiguousSelection=!1,o.attr("data-oj-command","oj-table-enableNonContiguousSelection"),o.children().first().text(this.getTranslatedString("labelEnableNonContiguousSelection"));else if("oj-table-resize"===l){var a=this._getContextMenuResizePopup();a.setAttribute("data-oj-columnIdx",s);var r,_=n||i,d=this._getLayoutManager().getColumnWidthProperty(_);r=null!=n?n:null!=i?i:this._getTable();var h=document.getElementById(this._getTableId()+"_resize_popup_spinner");this._IsCustomElement()?(h.value=Math.round(d),a.open(r)):(c(h).ojInputNumber("option","value",Math.round(d)),c(a).ojPopup("open",r))}},O.prototype._registerResizeListener=function(){var e=this._getTableContainer();this._resizeListener||(this._resizeListener=function(){var e=this._getLayoutManager(),t=this._getTableContainer();e.isSizingRefreshRequired(t.offsetWidth,t.offsetHeight)&&(e.notifyTableUpdate(O._UPDATE._RESIZE),this._hasPendingTasks()||this._syncTableSizing(!0))}.bind(this)),this._isResizeListenerAdded||(S.addResizeListener(e,this._resizeListener,50),this._isResizeListenerAdded=!0)},O.prototype._unregisterResizeListener=function(){var e=this._getTableContainer();S.removeResizeListener(e,this._resizeListener),this._isResizeListenerAdded=!1},O.prototype._unregisterChildStateListeners=function(e){for(var t=e.querySelectorAll("*"),o=0;o<t.length;o++)this._UnregisterChildNode(t[o])},O.prototype._isLoadMoreOnScroll=function(){return this.options.scrollPolicy===O._OPTION_SCROLL_POLICY._AUTO?!(this._data instanceof u.TableDataSourceAdapter):this.options.scrollPolicy!==O._OPTION_SCROLL_POLICY._LOAD_ALL},O.prototype._isTableHeaderless=function(){for(var e=this._getColumnDefs(),t=e.length,o=0;o<t;o++){var l=this._getSlotTemplate(e[o][O._HEADER_TEMPLATE]);if(null!=e[o].headerText||null!=e[o].headerStyle||null!=e[o].sortable&&e[o].sortable!==O._OPTION_DISABLED||null!=e[o].sortProperty||null!=e[o].headerRenderer||null!=l)return!1}if(this._isDefaultHeaderTemplateSlotValid()&&null!=this._getSlotTemplate("headerTemplate"))return!1;return!0},O.prototype._isTableFooterless=function(){for(var e=this._getColumnDefs(),t=e.length,o=0;o<t;o++){var l=this._getColumnRenderer(o,"footer"),n=this._getSlotTemplate(e[o][O._FOOTER_TEMPLATE]);if(null!=l)return!1;if(null!=n)return!1}if(this._isDefaultFooterTemplateSlotValid()&&null!=this._getSlotTemplate("footerTemplate"))return!1;return!0},O.prototype._isTableHeaderColumnsRendered=function(){return!0===this._renderedTableHeaderColumns},O.prototype._isTableRefreshNeeded=function(e,t){var o=this._cachedOptions,l=!1;return"contextMenu"===e&&t==="#"+this._getTableId()+"_contextmenu"?l=!1:"columns"!==e||this._isColumnMetadataUpdated()?"scrollToKey"===e?l=!1:"selection"===e||"currentRow"===e||u.Object.compareValues(t,o[e])||(l=!0):l=!1,this._cachedOptions=c.extend(!0,{},this.options),l},O.prototype._isTableSortable=function(){for(var e=this._getColumnDefs(),t=e.length,o=0;o<t;o++)if(e[o].sortable===O._OPTION_ENABLED)return!0;return!1},O.prototype._isTableColumnsResizable=function(){for(var e=this._getColumnDefs(),t=e.length,o=0;o<t;o++)if(e[o].resizable===O._OPTION_ENABLED)return!0;return!1},O.prototype._isTouchDevice=function(){return null==this._isTouch&&(this._isTouch=m.isMobileTouchDevice()),this._isTouch},O.prototype._processSlottedChildren=function(){var e=this._getTableBottomSlot();null!=e&&c(e).remove();for(var t=y.CustomElementUtils.getSlotMap(this._getRootElement()),o=Object.keys(t),l=0;l<o.length;l++){var n=o[l];if("bottom"===n){var i=t[n];if(null!=i){e=this._createTableBottomSlot();for(var s=0;s<i.length;s++)e.appendChild(i[s])}}}},O.prototype._handleSortTableHeaderColumn=function(e,t,o){this._clearSortedHeaderColumn(e);var l=this._getColumnDefs()[e],n=null==l.sortProperty?l.field:l.sortProperty;this._invokeDataSort(n,t,o),this._sortColumn=l,this._refreshSortTableHeaderColumn(n,t)},O.prototype._processFetchSort=function(e){try{var t=e.fetchParameters,o=this._getColumnDefs(),l=t[O._CONST_SORTCRITERIA];if(null!=l&&l.length>0){var n=l[0].attribute,i=l[0].direction===O._COLUMN_SORT_ORDER._ASCENDING;this._refreshSortTableHeaderColumn(n,i),this._setCurrentRow(this.options.currentRow,null,!1);for(var s=null,a=o.length,r=0;r<a;r++){var _=o[r];if(n===(null==_.sortProperty?_.field:_.sortProperty)){s=r;break}}null!=s&&setTimeout(function(){this._scrollColumnIntoViewport(s)}.bind(this),0)}else this._clearSortedHeaderColumn()}catch(e){C.error(e)}},O.prototype._handleMouseEnterColumnHeader=function(e){if(e){e.classList.add(O.MARKER_STYLE_CLASSES._HOVER);var t=this._getElementColumnIdx(e);(e.classList.contains(O.CSS_CLASSES._COLUMN_HEADER_ASC_ICON_CLASS)||e.classList.contains(O.CSS_CLASSES._COLUMN_HEADER_DSC_ICON_CLASS)||e.classList.contains(O.CSS_CLASSES._COLUMN_HEADER_DEFAULT_SORT_ICON_CLASS))&&e.classList.add(O.MARKER_STYLE_CLASSES._HOVER),this._showTableHeaderColumnSortIcon(t)}},O.prototype._handleMouseLeaveColumnHeader=function(e){if(e){e.classList.remove(O.MARKER_STYLE_CLASSES._HOVER);var t=this._getElementColumnIdx(e);this._hideTableHeaderColumnSortIcon(t)}},O.prototype._showTableHeaderColumnSortIcon=function(e){if(this._getColumnDefs()[e].sortable===O._OPTION_ENABLED){var t=this._getTableHeaderColumn(e);if(!t)return;if(null==c(t).data("sorted")){var o=this._getSortIconContainer(t),l=this._getSortIcon(t);null!=o&&null!=l&&(l.classList.remove(O.MARKER_STYLE_CLASSES._DISABLED),l.classList.add(O.MARKER_STYLE_CLASSES._ENABLED),l.classList.add(O.MARKER_STYLE_CLASSES._DEFAULT))}}},O.prototype._hideTableHeaderColumnSortIcon=function(e){if(this._getColumnDefs()[e].sortable===O._OPTION_ENABLED){var t=this._getTableHeaderColumn(e);if(null==c(t).data("sorted")){var o=this._getSortIconContainer(t),l=this._getSortIcon(t);null!=o&&null!=l&&(o.setAttribute("title",this.getTranslatedString("labelSortAsc")),l.classList.remove(O.CSS_CLASSES._COLUMN_HEADER_DSC_ICON_CLASS),l.classList.remove(O.CSS_CLASSES._COLUMN_HEADER_ASC_ICON_CLASS),l.classList.add(O.CSS_CLASSES._COLUMN_HEADER_DEFAULT_SORT_ICON_CLASS),l.classList.add(O.MARKER_STYLE_CLASSES._DISABLED),l.classList.remove(O.MARKER_STYLE_CLASSES._ENABLED),l.classList.remove(O.MARKER_STYLE_CLASSES._DEFAULT))}}},O.prototype._refreshSortTableHeaderColumn=function(e,t){for(var o,l=this._getColumnDefs(),n=null,i=l.length,s=0;s<i;s++){var a=l[s];if(e===(null==a.sortProperty?a.field:a.sortProperty)){n=s;break}}if(null!=n){this._clearSortedHeaderColumn(n);var r=this._getTableHeaderColumn(n);if(null!=r){var _=c(r).data("sorted"),d=this._getSortIconContainer(r);null!=(o=this._getSortIcon(r))&&(o.classList.add(O.MARKER_STYLE_CLASSES._DEFAULT),o.classList.remove(O.MARKER_STYLE_CLASSES._DISABLED)),t&&_!==O._COLUMN_SORT_ORDER._ASCENDING?(c(r).data("sorted",O._COLUMN_SORT_ORDER._ASCENDING),null!=o&&(d.setAttribute("title",this.getTranslatedString("labelSortDsc")),o.classList.remove(O.CSS_CLASSES._COLUMN_HEADER_DEFAULT_SORT_ICON_CLASS),o.classList.remove(O.CSS_CLASSES._COLUMN_HEADER_DSC_ICON_CLASS),o.classList.add(O.CSS_CLASSES._COLUMN_HEADER_ASC_ICON_CLASS))):t||_===O._COLUMN_SORT_ORDER._DESCENDING||(c(r).data("sorted",O._COLUMN_SORT_ORDER._DESCENDING),null!=o&&(d.setAttribute("title",this.getTranslatedString("labelSortAsc")),o.classList.remove(O.CSS_CLASSES._COLUMN_HEADER_DEFAULT_SORT_ICON_CLASS),o.classList.remove(O.CSS_CLASSES._COLUMN_HEADER_ASC_ICON_CLASS),o.classList.add(O.CSS_CLASSES._COLUMN_HEADER_DSC_ICON_CLASS)))}}},O.prototype._getSortedTableHeaderColumnIdx=function(){for(var e=this._getTableHeaderColumns(),t=e?e.length:0,o=0;o<t;o++){if(null!=c(e[o]).data("sorted"))return o}return null},O.prototype._clearSortedHeaderColumn=function(e){var t=this._getSortedTableHeaderColumnIdx();if(null!=t){var o=this._getTableHeaderColumn(t);if(c(o).data("sorted",null),null==e||t!==e)this._hideTableHeaderColumnSortIcon(t);else{var l=this._getSortIcon(o);null!=l&&l.classList.remove(O.MARKER_STYLE_CLASSES._SELECTED)}}},O.prototype._getColumnDefs=function(){return this._columnDefArray||(this._columnDefArray=this._getColumnMetadata()),this._columnDefArray},O.prototype._getColumnMetadata=function(){var e,t=this.options.columns,o=this.options.columnsDefault;if((0===t.length||1===t.length&&null==t[0].id&&null==t[0].headerText&&null==t[0].field)&&null==o.headerText&&null==o.field)return[];var l=[],n=t.length;for(e=0;e<n;e++)l[e]=c.extend({},o,t[e]);var i=[],s=l.length;for(e=0;e<s;e++)i.push(l[e]);var a=this._getData(),r=!1;for(null!=a&&null!=a.getCapability("sort")&&(r=!0),e=0;e<s;e++)null==i[e][O._FIELD_ID]&&(i[e][O._FIELD_ID]=O._COLUMN_HEADER_ID_PREFIX+e),!r||null!=i[e].sortable&&i[e].sortable!==O._OPTION_AUTO||(i[e].sortable=O._OPTION_ENABLED);return i},O.prototype._getColumnRenderer=function(e,t){var o=this._getColumnDefs()[e],l=null;return"cell"===t?l=o.renderer:"footer"===t?l=o.footerRenderer:"header"===t&&(l=o.headerRenderer),this._WrapCustomElementRenderer(l)},O.prototype._getRowRenderer=function(){return this._WrapCustomElementRenderer(this.options.rowRenderer)},O.prototype._isOverflow=function(){return!(!this._isLoadMoreOnScroll()||!this._domScroller)&&(null==this._getTableBodyScrollBuffer()&&this._domScroller.isOverflow())},O.prototype._registerDomScroller=function(){this._unregisterDomScroller(),this._domScrollerSuccessFunc=function(e){if(this._clearDataWaitingState(),null!=e)if(this._noMoreData=!1,e.maxCountLimit)this._noMoreData=!0,this._handleScrollerMaxRowCount(),this._clearScrollBuffer(),this._syncScrollPosition();else{var t,o=e[O._CONST_VALUE],l=o[O._CONST_DATA],n=o.metadata.map(function(e){return e[O._CONST_KEY]}),i=o[O._CONST_METADATA];for(t=n.length-1;t>=0;t--)null!==this._getRowIdxForRowKey(n[t])&&(l.splice(t,1),n.splice(t,1),i.splice(t,1));l.length>0?this._queueTask(function(){var o=this._getLayoutManager();o.notifyTableUpdate(O._UPDATE._ROWS_ADDED);var s=this._getTableBodyRows().length,a=[];for(t=0;t<l.length;t++)a[t]=s+t;return this._refreshTableBody({isMouseWheel:e.isMouseWheel,data:l,keys:n,metadata:i,indexes:a},s,!0).then(function(){o.clearCachedDimensions(),e.done?(this._noMoreData=!0,this._syncScrollPosition()):this._syncScrollPosition(null,null!=this._scrollPosition)}.bind(this))}.bind(this)):e.done?(this._noMoreData=!0,this._clearScrollBuffer(),this._syncScrollPosition()):(this._clearScrollBuffer(),this._syncScrollPosition(null,null!=this._scrollPosition))}else this._clearScrollBuffer(),this._syncScrollPosition()}.bind(this);var e=this._getTableBodyRows().length;this._requiresDomScrollerRefresh=!1,this._domScroller=new A(this._getLayoutManager().getScroller(),this._getData(),{asyncIterator:this._dataProviderAsyncIterator,fetchSize:this.options.scrollPolicyOptions.fetchSize,maxCount:this.options.scrollPolicyOptions.maxCount,initialRowCount:e,success:this._domScrollerSuccessFunc.bind(this),request:this._handleDataFetchStart.bind(this),localKeyValidator:function(e){return null!==this._findRowElementByKey(e)}.bind(this),beforeFetch:function(e){return null==this._idleCallback&&(this._fetchBySyncScroll=Math.abs(this._scrollY-e)<=1,this._setDataWaitingState(!1),this._showProgressiveLoading(),!0)}.bind(this),beforeScroll:this._clearScrollPosBusyState.bind(this),fetchTrigger:2})},O.prototype._unregisterDomScroller=function(){null!=this._domScroller&&(this._domScroller.destroy(),this._domScroller=null)},O.prototype._handleScrollerMaxRowCount=function(){var e=this.getTranslatedString("msgScrollPolicyMaxCountSummary"),t=this.getTranslatedString("msgScrollPolicyMaxCountDetail");C.warn(e+"\n"+t)},O.prototype._clearIdleCallback=function(){null!=this._idleCallback&&(window.requestIdleCallback&&window.cancelIdleCallback?(window.cancelIdleCallback(this._idleCallback),window.cancelAnimationFrame(this._idleCallback)):window.cancelAnimationFrame(this._idleCallback),this._idleCallback=null)},O.prototype._requestIdleCallback=function(e,t){if(!e&&window.requestIdleCallback&&window.cancelIdleCallback){var o=window.setTimeout(function(){this._idleCallback=window.requestAnimationFrame(function(){t()}),o=null},250);this._idleCallback=window.requestIdleCallback(function(e){null!=o&&(window.clearTimeout(o),t(e))})}else this._idleCallback=window.requestAnimationFrame(function(){t()})},O.prototype._renderRowsWhenIdle=function(e,t,o,l,n,i){if(0===e.length)return this._idleCallback=null,void this._afterRowsRendered(t).then(function(e){l(e)},function(e){n(e)});var s,a=this,r=0;function _(){window.requestAnimationFrame(function(){a._getLayoutManager().handleAfterRowsProcessed(s),a._appendElementToTableBody(s,t),a._renderRowsWhenIdle(e,t,o+r,l,n,i),i&&u.AgentUtils.getAgentInfo().browser===u.AgentUtils.BROWSER.FIREFOX&&t.scrollTop!==a._scrollTop&&(t.scrollTop=a._scrollTop)})}this._requestIdleCallback(i,function(l){void 0===l?function(){s=document.createDocumentFragment();for(var l=0;l<O._BATCH_PROCESS_SIZE_WHEN_IDLE&&0!==e.length;l++)0!==r||a._getLayoutManager().isTableWidthConstrained()||(t.style[O.CSS_PROP._OVERFLOW_X]="hidden"),a._renderRow(e.shift(),s,o),r+=1;_()}():function(l){var n=l.timeRemaining(),i=0;for(s=document.createDocumentFragment();n>i&&0!==e.length;)0!==r||a._getLayoutManager().isTableWidthConstrained()||(t.style[O.CSS_PROP._OVERFLOW_X]="hidden"),a._renderRow(e.shift(),s,o),r+=1,i=n-l.timeRemaining(),n=l.timeRemaining();_()}(l)})},O.prototype._renderRow=function(e,t,o){var l=e.row,n=e.rowIdx;if(null!=l){var i=this._createTableBodyRow();i["oj-table-oj-row-item"]=l,this._styleTableBodyRow(i,!0),this._insertTableBodyRow(n,i,l,t),this._refreshTableBodyRow(n,l,i,t,o)}},O.prototype._afterRowsRendered=function(e){this._clearCachedDomRowData(),this._clearIdleRenderBusyState(),this._hasRowOrCellRendererOrTemplate()&&f.subtreeAttached(e);var t=this._getTableBodyRows();return t.length>0?this._finalizeBodyRowRendering(t).then(function(){return isNaN(this._rowHeight)&&e.rows.length>1&&(this._rowHeight=e.rows[1].offsetHeight),Promise.resolve(!0)}.bind(this)):Promise.resolve(!0)},O.prototype._getRowIdxsForElementsWithStyleClass=function(e){var t=this._tableQuerySelectorAll(this._getTable(),e),o=[];if(t&&t.length>0)for(var l=t.length,n=0;n<l;n++){for(var i=this._getElementRowIdx(t[n]),s=!1,a=o.length,r=0;r<a;r++)o[r]===i&&(s=!0);s||o.push(i)}return o},O.prototype._getColumnIdxsForElementsWithStyleClass=function(e){var t=this._tableQuerySelectorAll(this._getTable(),e),o=[];if(t&&t.length>0)for(var l=t.length,n=0;n<l;n++){var i=this._getElementColumnIdx(t[n]),s=!1;null===i&&(t[n].classList.contains(O.CSS_CLASSES._COLUMN_HEADER_SELECTOR_CELL_CLASS)||t[n].classList.contains(O.CSS_CLASSES._TABLE_FOOTER_SELECTOR_CELL_CLASS))&&(i=-1);for(var a=o.length,r=0;r<a;r++)o[r]===i&&(s=!0);s||o.push(i)}return o},O.prototype._syncTableSizing=function(e){var t=this._getLayoutManager();t.isTableLayoutRefreshRequired()&&(e||t.isSizingRefreshRequired())&&t.refreshTableDimensions();var o=this._updateScrollBufferHeight();this._isLoadMoreOnScroll()&&!this._dataFetching&&this._domScroller?(this._setDataWaitingState(!1),this._domScroller.checkViewport(o>0).then(this._domScrollerSuccessFunc,this._checkViewportRejected.bind(this))):this._syncScrollPosition()},O.prototype._updateScrollBufferHeight=function(){var e=0,t=this._getLayoutManager(),o=this._getTableBodyScrollBuffer();if(null!=o&&(e=o.offsetHeight)>0){var l=t.getRowBottomOverflowDiff(o),n=Math.min(Math.max(0,e-l),e);n!==e&&(e=n,o.style[O.CSS_PROP._HEIGHT]=e+O.CSS_VAL._PX)}return e},O.prototype._clearScrollBuffer=function(){var e=this._getTableBodyScrollBuffer();null!=e&&(this._getTableBody().removeChild(e),this._clearDomCache(O.CSS_CLASSES._TABLE_BUFFER_ROW_CLASS))},O.prototype._addSingleTableBodyRow=function(e,t,o,l){var n=this._createTableBodyRow();return n["oj-table-oj-row-item"]=t,this._styleTableBodyRow(n,!0),this._insertTableBodyRow(e,n,t,o),n=this._refreshTableBodyRow(e,t,n,o,l),c(n).data("rowKey",t.metadata.key),o||f.subtreeAttached(n),n},O.prototype._animateVisibleRows=function(e,t,o){if(o=null==this._animationActionOverride?o:this._animationActionOverride,!this._hasAdditionalPendingTasks()){this._animationActionOverride=null;var l,n=this._getVisibleRowIdxs(),i=[];for(l=0;l<t.length;l++)-1===n.indexOf(t[l])&&i.push(t[l]);for(i.sort(function(e,t){return e-t}),l=i.length-1;l>=0;l--)e.splice(i[l],1);return this._unregisterResizeListener(),this._animateTableBodyRows(e,o).then(function(){this._registerResizeListener()}.bind(this))}return this._animationActionOverride="update",Promise.resolve()},O.prototype._cleanTemplateNodes=function(e){var t=this._getTemplateEngine();null!=t&&t.clean(e)},O.prototype._clearCachedMetadata=function(){this._columnDefArray=null,this._columnOffsets=null,this._setTableActionableMode(!1)},O.prototype._getSlotTemplate=function(e){if(this._IsCustomElement()&&e){var t=y.CustomElementUtils.getSlotMap(this._getRootElement())[e];if(t&&t.length>0&&"template"===t[0].tagName.toLowerCase())return t[0]}return null},O.prototype._isDefaultCellTemplateSlotValid=function(){return this._isDefaultTemplateSlotValid("cellTemplate")},O.prototype._isDefaultRowTemplateSlotValid=function(){return this._isDefaultTemplateSlotValid("rowTemplate")},O.prototype._isDefaultHeaderTemplateSlotValid=function(){return this._isDefaultTemplateSlotValid("headerTemplate")},O.prototype._isDefaultFooterTemplateSlotValid=function(){return this._isDefaultTemplateSlotValid("footerTemplate")},O.prototype._isDefaultTemplateSlotValid=function(e){for(var t=this._getColumnDefs(),o=t.length,l=0;l<o;l++){var n=t[l][O._CELL_TEMPLATE],i=t[l][O._HEADER_TEMPLATE],s=t[l][O._FOOTER_TEMPLATE];if(e===n||e===i||e===s)return!1}return!0},O.prototype._getTemplateEngine=function(){return this._templateEngine},O.prototype._getVisibleRowIdxs=function(){var e=[],t=this._getTableBody(),o=this._getTableBodyRows();if(o.length>0&&t.offsetHeight>0){var l=c(window).height(),n=t.getBoundingClientRect();if(n.top>l)return e;var i=n.left>=0?n.left+1:n.right-1,s=n.top>=0?n.top:0,a=document.elementFromPoint(i,s),r=null;null!=a&&(r=this._getElementRowIdx(a));var _,d,h=null!=r?r:0;if(n.bottom>l)r=null,null!=(d=document.elementFromPoint(i,l-1))&&(_=this._getElementRowIdx(d));else{var u=parseInt(window.getComputedStyle(t).borderBottomWidth,10)||0,S=n.bottom>=0?n.bottom-u-1:0;null!=(d=document.elementFromPoint(i,S))&&(_=this._getElementRowIdx(d))}null==_&&(_=o.length-1);for(var C=h;C<=_;C++)e.push(C)}return e},O.prototype._hasRowOrCellRendererOrTemplate=function(e){if(null!=this._getRowRenderer())return!0;var t=null,o=null,l=this._getColumnDefs();if(null!=e)t=this._getColumnRenderer(e,"cell"),o=this._getSlotTemplate(l[e][O._CELL_TEMPLATE]);else for(var n=l.length,i=0;i<n&&null==(t=this._getColumnRenderer(i,"cell"))&&null==(o=this._getSlotTemplate(l[i][O._CELL_TEMPLATE]));i++);if(null!=t||null!=o)return!0;if(this._isDefaultRowTemplateSlotValid()&&null!=this._getSlotTemplate("rowTemplate"))return!0;if(this._isDefaultCellTemplateSlotValid()&&null!=this._getSlotTemplate("cellTemplate"))return!0;return!1},O.prototype._initFetch=function(e,t){var o=e||{},l=this._getData(),n=this._getLayoutManager();return null==l||!u.DataProviderFeatureChecker.isDataProvider(l)||this._isPagingModelDataProvider()&&!t?null==l?this._queueTask(function(){return n.notifyTableUpdate(t?O._UPDATE._DATA_SORT:O._UPDATE._REFRESH),Promise.resolve()}):void 0:this._queueTask(function(){return n.notifyTableUpdate(t?O._UPDATE._DATA_SORT:O._UPDATE._REFRESH),this._scrollTop=0,n.getScroller().scrollTop=0,l instanceof u.TableDataSourceAdapter&&(o.fetchType="init",this._isLoadMoreOnScroll()&&(o[O._CONST_OFFSET]=0)),this._invokeDataFetchRows(o)}.bind(this))},O.prototype._initTemplateEngine=function(){this._queueTask(function(){var e;try{e=p.__getTemplateEngine().then(function(e){this._templateEngine=e}.bind(this),function(e){C.warn(e)})}catch(t){C.warn(t),e=Promise.resolve(null)}return e}.bind(this))},O.prototype._initializeFetchFirstOptions=function(e){var t=e||{};return this._clientId=this._clientId||Symbol(),t[O._CONST_CLIENTID]=this._clientId,!t[O._CONST_PAGESIZE]&&this._isLoadMoreOnScroll()?t[O._CONST_PAGESIZE]=this.options.scrollPolicyOptions.fetchSize:t[O._CONST_PAGESIZE]=-1,t[O._CONST_SILENT]=!0,t},O.prototype._containsKey=function(e,t){for(var o=0;o<t.length;o++)if(u.KeyUtils.equals(t[o].key,e))return!0;return!1},O.prototype._invokeDataFetchRows=function(e){var t=this._initializeFetchFirstOptions(e),o=this._getData();return null!=o?new Promise(function(e){this._noMoreData=!1,this._setDataWaitingState(),this._dataProviderAsyncIterator=o.fetchFirst(t)[Symbol.asyncIterator]();var l=function(e,t,n){var i=n;return(null==n||this._containsKey(n,t))&&(i=null),e.done||null==i&&(this._isLoadMoreOnScroll()||"function"==typeof o.getPageCount)?e:this._dataProviderAsyncIterator.next().then(function(t){return e.done=t.done,e.value.data=e.value.data.concat(t.value.data),e.value.metadata=e.value.metadata.concat(t.value.metadata),l(e,t.value.metadata,i)})}.bind(this),n=this._getScrollToKey(),i=this._dataProviderAsyncIterator.next();Promise.all([i,n]).then(function(e){var t=e[0],o=e[1];return l(t,t[O._CONST_VALUE].metadata,o)}).then(function(t){var l=t[O._CONST_VALUE],n=l[O._CONST_DATA],i=l.metadata.map(function(e){return e[O._CONST_KEY]}),s=0;o instanceof u.TableDataSourceAdapter&&(s=o[O._CONST_OFFSET]);var a=0;this._isPagingModelDataProvider()&&(a=o.getStartItemIndex());for(var r=[],_=n.length,d=0;d<_;d++)r[d]=s+a+d;var h=l[O._CONST_METADATA];this._unregisterDomScroller(),t.maxCountLimit?(this._noMoreData=!0,this._handleScrollerMaxRowCount()):t.done&&(this._noMoreData=!0),this._refreshAll({data:n,metadata:h,keys:i,indexes:r},s).then(function(){this._clearDataWaitingState(),this._processFetchSort(l),this._isLoadMoreOnScroll()&&this._registerDomScroller(),e(t)}.bind(this))}.bind(this),function(){this._clearDataWaitingState(),0===this._getTableBodyRows().length&&this._showNoDataMessage(),e(null)}.bind(this))}.bind(this)):Promise.resolve(null)},O.prototype._invokeDataSort=function(e,t,o){if(this._resetAriaLabel=!0,this._getData()){var l=[],n={};n[O._CONST_ATTRIBUTE]=e,n.direction=t?O._COLUMN_SORT_ORDER._ASCENDING:O._COLUMN_SORT_ORDER._DESCENDING,l.push(n),this._trigger("sort",o,{header:l[0][O._CONST_ATTRIBUTE],direction:l[0].direction}),this._beforeDataRefresh(),this._showStatusMessage(),this._initFetch({sortCriteria:l},!0)}},O.prototype._isColumnMetadataUpdated=function(){if(null!=this._columnDefArray){var e=this._getColumnMetadata();if(this._columnDefArray.length!==e.length)return!0;for(var t=e.length,o=0;o<t;o++)for(var l=Object.keys(e[o]),n=0;n<l.length;n++){var i=l[n];if(e[o][i]!==this._columnDefArray[o][i]&&("id"!==i||null==e[o][i]||0!==e[o][i].indexOf(O._COLUMN_HEADER_ID_PREFIX)||null==this._columnDefArray[o][i]||0!==this._columnDefArray[o][i].indexOf(O._COLUMN_HEADER_ID_PREFIX)))return!0}return!1}return!0},O.prototype._getColumnKeys=function(){for(var e=[],t=this._getColumnDefs(),o=0;o<t.length;o++)e.push(t[o][O._FIELD_ID]);return e},O.prototype._getLocalRowKeys=function(){for(var e=[],t=this._getTableBodyRows(),o=0;o<t.length;o++)e.push(c(t[o]).data("rowKey"));return e},O.prototype._hasMoreToFetch=function(){return!!this._isLoadMoreOnScroll()&&!this._noMoreData},O.prototype._clearCachedDataMetadata=function(){null!=this._data&&this._unregisterDataSourceEventListeners(),this._data=null},O.prototype._getColumnIdxForColumnKey=function(e){for(var t=this._getColumnDefs(),o=t.length,l=0;l<o;l++){var n=t[l];if(u.KeyUtils.equals(n.id,e))return l}return null},O.prototype._getColumnKeyForColumnIdx=function(e){var t=this._getColumnDefs();return e<t.length?t[e][O._FIELD_ID]:null},O.prototype._getRowIdxRowArray=function(e,t){var o=[];if(null!=e)for(var l=e[O._CONST_INDEXES].length,n=0;n<l;n++)o.push({row:{data:e[O._CONST_DATA][n],metadata:e[O._CONST_METADATA]?e[O._CONST_METADATA][n]:null,key:e[O._CONST_KEYS][n],index:e[O._CONST_INDEXES][n]},rowIdx:t+n});return o},O.prototype._getRowIdxForRowKey=function(e){var t=this._getTableBodyRows();if(t.length>0)for(var o=t.length,l=0;l<o;l++)if(u.KeyUtils.equals(c(t[l]).data("rowKey"),e))return l;return null},O.prototype._getDataSourceRowIndexForRowKey=function(e){var t=this._getTableBodyRows();if(t.length>0)for(var o=t.length,l=0;l<o;l++)if(u.KeyUtils.equals(c(t[l]).data("rowKey"),e)){var n=this._getData(),i=0;return this._isPagingModelDataProvider()&&(i=n.getStartItemIndex()),l+i}return null},O.prototype._getRowKeyForDataSourceRowIndex=function(e){var t=this._getTableBodyRows();if(t.length>0){var o=this._getData(),l=0;this._isPagingModelDataProvider()&&(l=o.getStartItemIndex());for(var n=t.length,i=0;i<n;i++)if(l+i===e)return c(t[i]).data("rowKey")}return null},O.prototype._getRowKeyForRowIdx=function(e){var t=this._getTableBodyRow(e);return null!=t?c(t).data("rowKey"):null},O.prototype._getRowKey=function(e,t){return null==e&&(e=this._getTableBodyRow(t)),null!=e?c(e).data("rowKey"):null},O.prototype._isPagingModelDataProvider=function(){var e=this._getData();return null!=e.getStartItemIndex&&null!==e.getStartItemIndex()&&e.getStartItemIndex()>=0},O.prototype._animateTableBodyRow=function(e,t){return this._isAnimationDisabled(t)?Promise.resolve(!1):new Promise(function(o){this._startAnimation(e,t).then(function(){o(!0)})}.bind(this))},O.prototype._animateTableBodyRows=function(e,t){if(this._isAnimationDisabled(t))return Promise.resolve(!1);for(var o=[],l=0;l<e.length;l++){var n=e[l];o.push(function(e){return this._animateTableBodyRow(e,t)}.bind(this)(n))}return o.length>0?Promise.all(o):Promise.resolve(!1)},O.prototype._getAnimationEffect=function(e){return null==this.defaultAnimations&&(this.defaultAnimations=this._getDefaultOptions().animation||{}),this.defaultAnimations[e]},O.prototype._isAnimationDisabled=function(e){var t=this._getAnimationEffect(e);return null==t||0===t.length},O.prototype._startAnimation=function(e,t,o){return null==o&&(o=this._getAnimationEffect(t)),b.startAnimation(e,t,o,this)};
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
var D=function(e){this.component=e,this.Init()};u._registerLegacyNamespaceProp("TableDndContext",D),u.Object.createSubclass(D,u.Object,"oj.TableDndContext"),D.prototype.Init=function(){D.superclass.Init.call(this)},D.prototype._addDragMarkerClass=function(e){this.component._getTableHeaderColumn(e).classList.add("oj-table-drag-source-opaque"),this.component._setTableColumnCellsClass(e,!0,"oj-table-drag-source-opaque")},D.prototype._removeDragMarkerClass=function(){var e=this.component._getTableElementsByClassName(this.component._getTableHeader(),"oj-table-drag-source-opaque");if(null!=e&&e.length>0)for(var t=e.length,o=0;o<t;o++)e[o].classList.remove("oj-table-drag-source-opaque");this.component._setTableColumnCellsClass(null,!1,"oj-table-drag-source-opaque")},D.prototype._cloneTableContainer=function(e){var t=this.component._getTableElementsByTagName(e,O.DOM_ELEMENT._THEAD)[0],o=this.component._getTableElementsByTagName(e,O.DOM_ELEMENT._TBODY)[0],l=c(o).scrollLeft(),n=e.cloneNode(),i=this.component._getTableElementsByTagName(e,O.DOM_ELEMENT._TABLE)[0].cloneNode(),s=o.cloneNode(),a=this.component._rowsDragged[0].offsetTop;return this.component._rowsDragged.forEach(function(e){var t=e.querySelectorAll("td"),o=e.cloneNode(!0);if(this.component._isDefaultSelectorEnabled()){var l=this.component._getTableElementsByClassName(o,O.CSS_CLASSES._TABLE_DATA_ROW_SELECTOR_CLASS)[0];l.selectedKeys=this.component.options.selected.row,l.rowKey=this.component._getRowKey(e)}var n=o.querySelectorAll("td");o.style.position="absolute",o.style.top=e.offsetTop-a+O.CSS_VAL._PX,o.style.width=e.offsetWidth+O.CSS_VAL._PX,o.classList.add("oj-table-body-row-drag-image"),o.classList.remove("oj-selected"),o.classList.remove("oj-focus"),o.classList.remove("oj-focus-highlight"),n.forEach(function(e,o){e.style.width=t[o].offsetWidth+O.CSS_VAL._PX,e.classList.remove("oj-selected"),e.classList.remove("oj-hover")}),s.appendChild(o)}.bind(this)),i.appendChild(s),n.appendChild(i),n.classList.add("oj-table-container-drag-image"),this.component._isTableHeaderless()?n.style[O.CSS_PROP._HEIGHT]=o.scrollHeight+O.CSS_VAL._PX:n.style[O.CSS_PROP._HEIGHT]=o.scrollHeight+t.offsetHeight+O.CSS_VAL._PX,s.style[O.CSS_PROP._OVERFLOW]=O.CSS_VAL._HIDDEN,s.style[O.CSS_PROP._OVERFLOW_X]=O.CSS_VAL._HIDDEN,s.style[O.CSS_PROP._OVERFLOW_Y]=O.CSS_VAL._HIDDEN,s.style[O.CSS_PROP._BACKGROUND_COLOR]=O.CSS_VAL._TRANSPARENT,s.style[O.CSS_PROP._BORDER_COLOR]=O.CSS_VAL._TRANSPARENT,s.style[O.CSS_PROP._WIDTH]=c(o).width()+O.CSS_VAL._PX,s.style[O.CSS_PROP._HEIGHT]=o.scrollHeight+O.CSS_VAL._PX,i.style[O.CSS_PROP._WIDTH]=c(o).width()+O.CSS_VAL._PX,document.body.appendChild(n),c(s).scrollLeft(1*l),n},D.prototype._destroyDragImage=function(){this._dragImage&&(c(this._dragImage).remove(),this._dragImage=null)},D.prototype._getEventColumnIndex=function(e){return this.component._getElementColumnIdx(e.currentTarget)},D.prototype._getOverRowIndex=function(e){var t,o=this.component._getFirstAncestor(e.target,O.DOM_ELEMENT._TR,!0),l=this.component._getFirstAncestor(e.target,"."+O.CSS_CLASSES._TABLE_DATA_CELL_CLASS+", ."+O.CSS_CLASSES._TABLE_SELECTOR_CELL,!0);if(null!=l){var n=this.component._getFirstAncestor(l,"."+O.CSS_CLASSES._TABLE_DATA_ROW_CLASS,!0);null!=n&&(t=c(n).index())}else if(c(o).hasClass(O.CSS_CLASSES._TABLE_DATA_ROW_DRAG_INDICATOR_CLASS))t=this._dropRowIndex;else{if(0===(t=this.component._getTableBodyRows().length))this.component._getTableBody().classList.add("oj-table-drop-target-empty")}return t},D.prototype.handleColumnDragStart=function(e){if(this._isColumnReorderEnabled())return this._dragStartColumnIdxs=this.component._getSelectedHeaderColumnIdxs(),this._setReorderColumnsDataTransfer(e,this._dragStartColumnIdxs),setTimeout(function(){window.getSelection().removeAllRanges()},0),this._dragStartColumnIdxs.forEach(function(e){this._addDragMarkerClass(e)}.bind(this)),!0},D.prototype.handleColumnDragEnd=function(e){this._isColumnReorderEnabled()&&(this._dragStartColumnIdxs=null,this.component._removeDragOverIndicatorColumn(),this._destroyDragImage(),this._removeDragMarkerClass())},D.prototype.handleColumnDragEnter=function(e){if(!this._isColumnReordering()){var t=this._getEventColumnIndex(e);return this._invokeDropCallback("columns","dragEnter",e,{columnIndex:t})}},D.prototype.handleColumnReorderDragOver=function(e){var t=this._getEventColumnIndex(e);null!=this._dragStartColumnIdxs&&this._dragStartColumnIdxs.length>0&&-1===this._dragStartColumnIdxs.indexOf(t)&&(this._currentDropColumnBefore=this._isDragOverBeforeColumn(e),this._currentDropColumnBefore&&this._dragStartColumnIdxs.indexOf(t-1)>-1||!this._currentDropColumnBefore&&this._dragStartColumnIdxs.indexOf(t+1)>-1||this.component._displayDragOverIndicatorColumn(t,this._currentDropColumnBefore),e.preventDefault())},D.prototype.handleColumnDragOver=function(e){if(this._isColumnReordering())return this.handleColumnReorderDragOver(e);var t=this._getEventColumnIndex(e);this._currentDropColumnBefore=this._isDragOverBeforeColumn(e);var o=this._invokeDropCallback("columns","dragOver",e,{columnIndex:t});return(!1===o||e.isDefaultPrevented())&&this.component._displayDragOverIndicatorColumn(t,this._isDragOverBeforeColumn(e)),o},D.prototype.handleColumnDragLeave=function(e){if(!this._isColumnReordering()){this.component._removeDragOverIndicatorColumn();var t=this._getEventColumnIndex(e);return this._invokeDndCallback("drop","columns","dragLeave",e,{columnIndex:t})}},D.prototype.handleColumnReorderDrop=function(e){this.component._removeDragOverIndicatorColumn();var t=this._getEventColumnIndex(e);this._currentDropColumnBefore||(t+=1),-1===this._dragStartColumnIdxs.indexOf(t)&&(this.component._columnsDestMap=this.component._moveTableHeaderColumn(this._dragStartColumnIdxs,t,e)),e.preventDefault()},D.prototype.handleColumnDrop=function(e){if(this._isColumnReordering())return this.component._clearSelectionState(),this.handleColumnReorderDrop(e);this.component._removeDragOverIndicatorColumn();var t=this._getEventColumnIndex(e);return this._currentDropColumnBefore||(t+=1),this._invokeDropCallback("columns","drop",e,{columnIndex:t})},D.prototype.handleRowDragStart=function(e){var t=this.component.options.dnd.drag;if(t&&t.rows){var o=this._setDragRowsDataTransfer(e,t.rows.dataTypes,this.component._getSelectedRowIdxs());return!!o&&this._invokeDndCallback("drag","rows","dragStart",e,o)}},D.prototype.handleRowDrag=function(e){return this._invokeDndCallback("drag","rows","drag",e)},D.prototype.handleRowDragEnd=function(e){return this._destroyDragImage(),this.component._rowsDragged&&this.component._rowsDragged.length>0&&this.component._rowsDragged.forEach(function(e){e.classList.remove("oj-table-drag-source-opaque"),e.classList.remove("oj-table-row-drag-source-hide")}),this.component._removeDragOverIndicatorRow(),this._invokeDndCallback("drag","rows","dragEnd",e)},D.prototype.handleRowDragEnter=function(e){var t=this._getOverRowIndex(e),o=this._invokeDropCallback("rows","dragEnter",e,{rowIndex:t});return(!1===o||e.isDefaultPrevented())&&this._updateDragRowsState(e,t),o},D.prototype.handleRowDragOver=function(e){return this._invokeDropCallback("rows","dragOver",e,{rowIndex:this._dropRowIndex})},D.prototype.handleRowDragLeave=function(e){var t=this._invokeDndCallback("drop","rows","dragLeave",e,{rowIndex:this._dropRowIndex});this._isDndEventInElement(e,e.currentTarget)||(this.component._getTableBody().classList.remove("oj-table-drop-target-empty"),this.component._removeDragOverIndicatorRow(),this._dropRowIndex=null);return t},D.prototype.handleRowDrop=function(e){var t=this._dropRowIndex;return this._destroyDragImage(),this.component._getTableBody().classList.remove("oj-table-drop-target-empty"),this.component._removeDragOverIndicatorRow(),this._dropRowIndex=null,this._invokeDropCallback("rows","drop",e,{rowIndex:t})},D.prototype._invokeDndCallback=function(e,t,o,l,n){var i,s=this.component.options.dnd[e];if(s&&s[t]){var a=s[t][o];if(a&&"function"==typeof a)try{this.component._IsCustomElement()?a(l.originalEvent,n):(l.dataTransfer=l.originalEvent.dataTransfer,i=a(l,n))}catch(e){C.error("Error: "+e)}}return i},D.prototype._invokeDropCallback=function(e,t,o,l){var n=this._invokeDndCallback("drop",e,t,o,l);return void 0===n&&this._matchDragDataType(o,e)&&o.preventDefault(),n},D.prototype._isColumnReorderEnabled=function(){var e=this.component.options.dnd;return e&&e.reorder&&e.reorder.columns===O._OPTION_ENABLED},D.prototype._isColumnReordering=function(){return null!=this._dragStartColumnIdxs},D.prototype._isDndEventInElement=function(e,t){var o=t.getBoundingClientRect(),l=e.originalEvent;return l.clientX>=Math.ceil(o.left)&&l.clientX<Math.floor(o.right)&&l.clientY>=Math.ceil(o.top)&&l.clientY<Math.floor(o.bottom)},D.prototype._isDragOverBeforeColumn=function(e){var t=e.currentTarget.getBoundingClientRect();if(null!=e.originalEvent.clientX){var o=t.right-e.originalEvent.clientX<(t.right-t.left)/2;return"rtl"===S.getReadingDirection()?o:!o}return!1},D.prototype._matchDragDataType=function(e,t){var o=e.originalEvent.dataTransfer.types,l=this.component.options.dnd.drop;if(l&&l[t]&&l[t].dataTypes)for(var n=l[t].dataTypes,i="string"==typeof n?[n]:n,s=0;s<o.length;s++)if(i.indexOf(o[s])>=0)return!0;return!1},D.prototype._setHeaderColumnDraggable=function(e,t){e.draggable=t,t&&e.classList.add(O.MARKER_STYLE_CLASSES._DRAGGABLE)},D.prototype._clearHeaderColumnDraggable=function(e){e.draggable="",e.style[O.CSS_PROP._CURSOR]=O.CSS_VAL._AUTO,e.classList.remove(O.MARKER_STYLE_CLASSES._DRAGGABLE)},D.prototype._setDragRowsData=function(e,t,o){if(t){var l=e.dataTransfer,n=JSON.stringify(o);if("string"==typeof t)l.setData(t,n);else for(var i=0;i<t.length;i++)l.setData(t[i],n)}},D.prototype._setDragRowsDataTransfer=function(e,t,o){var l=[];this.component._rowsDragged=[];for(var n=0;n<o.length;n++){var i=this.component.getDataForVisibleRow(o[n]),s=this.component._getTableBodyRow(o[n]);i&&s&&(l.push(i),this.component._rowsDragged.push(s))}return l.length?(this._setDragRowsData(e.originalEvent,t,l),this._destroyDragImage(),this._dragImage=this._setDragRowsImage(e.originalEvent,this.component._getTableContainer()),{rows:l}):null},D.prototype._setDragRowsImage=function(e,t){var o=this._cloneTableContainer(t),l=this.component._getTableElementsByTagName(t,O.DOM_ELEMENT._TBODY)[0],n=Math.max(0,e.offsetX),i=Math.max(0,e.offsetY);return l.classList.add("oj-table-drag-source"),this.component._rowsDragged.forEach(function(e){e.classList.add("oj-table-drag-source-opaque")}),e.dataTransfer.setDragImage(o,n,i),o},D.prototype._setReorderColumnsDataTransfer=function(e,t){var o=e.originalEvent.dataTransfer,l=this.component._hashCode(this.component._getTableUID());o.setData("Text",O._DND_REORDER_TABLE_ID_DATA_KEY+":"+l+":"+t.join("-")),this._dragImage=this.component._createTableHeaderColumnDragImage(t);try{o.setDragImage(this._dragImage,0,0)}catch(e){}},D.prototype._updateDragRowsState=function(e,t){if(this._dropRowIndex!==t){var o=this.component._getFirstAncestor(e.target,O.DOM_ELEMENT._TR,!0);this._dropRowIndex=t;var l=e.currentTarget.classList.contains("oj-table-drag-source")||e.currentTarget.classList.contains("oj-table-drop-target-empty")?"space":"line";this.component._displayDragOverIndicatorRow(this._dropRowIndex,o,l,e.currentTarget.classList.contains("oj-table-drag-source"))}};
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
var I=function(e){this._table=e,this._tableUpdates=new Set};u.Object.createSubclass(I,u.Object,"TableLayoutManager"),I.prototype.unregisterListeners=function(){this.unregisterScrollListeners()},I.prototype._getSizingState=function(){return null==this._sizingState&&(this._sizingState={outerWidth:null,outerHeight:null,hasHorizontalOverflow:!1,hasVerticalOverflow:!1}),this._sizingState},I.prototype.notifyTableUpdate=function(e){this._tableUpdates.add(e)},I.prototype._getTableUpdates=function(){return this._tableUpdates},I.prototype._clearTableUpdates=function(){this._tableUpdates.clear()},I.prototype.isTableLayoutRefreshRequired=function(){return this._tableUpdates.size>0},I.prototype.isSizingRefreshRequired=function(e,t){if(null!=e&&null!=t){var o=this._getSizingState();return e>0&&t>0&&(e!==o.outerWidth||t!==o.outerHeight)}var l=this._table._getTableContainer();return l.offsetWidth>0&&l.offsetHeight>0},I.prototype._enableTableVisibility=function(){var e=this._table._getTableBody();e&&(e.style[O.CSS_PROP._VISIBILITY]="");var t=this._table._getTableFooter();t&&(t.style[O.CSS_PROP._VISIBILITY]="")},I.prototype.refreshTableDimensions=function(){},I.prototype._finalizeTableDimensions=function(e,t){var o=this._table._getTableContainer();if(null!=e){var l=this.getScroller().scrollHeight-this.getScroller().clientHeight,n=e>l?l:e;this._table._isLoadMoreOnScroll()&&l===n&&(n-=1),this.getScroller().scrollTop=n}null!=t&&this._restoreScrollLeft(t);var i=this._getSizingState();i.outerWidth=o.offsetWidth,i.outerHeight=o.offsetHeight,this._clearTableUpdates(),this._enableTableVisibility(),this.registerScrollListeners()},I.prototype.handleAfterRowsProcessed=function(){},I.prototype._handleScrollerScrollLeft=function(e){this._table._scrollLeft=e},I.prototype._handleScrollerScrollTop=function(e){this._table._domScroller||this._table._clearScrollPosBusyState(),e<0&&(e=0),this._table._scrollTop=e,this._table._scrollY=this._table._skipScrollUpdate?e:null,this._table._moveTableBodyRowTouchSelectionAffordanceTop(),this._table._moveTableBodyRowTouchSelectionAffordanceBottom(),this._table._updateScrollBufferHeight()},I.prototype.registerScrollListeners=function(){var e=this.getScroller();null!=e&&(null==this._scrollEventListener&&(this._scrollEventListener=function(e){var t=this._table._getElementScrollLeft(e.target),o=e.target.scrollTop;t===this._table._scrollLeft&&o===this._table._scrollTop||(this._handleScrollerScrollLeft(t),this._handleScrollerScrollTop(o),this._table._isScrollPositionAdjusted()||(this._table._skipScrollUpdate||this._ticking||(window.requestAnimationFrame(function(){this._table._isScrollPositionAdjusted()||this._table._skipScrollUpdate||this._table.option("scrollPosition",this._table._getCurrentScrollPosition(),{_context:{originalEvent:e,internalSet:!0}}),this._ticking=!1}.bind(this)),this._ticking=!0),this._table._skipScrollUpdate=!1))}.bind(this)),e.removeEventListener("scroll",this._scrollEventListener),e.addEventListener("scroll",this._scrollEventListener,!1))},I.prototype.unregisterScrollListeners=function(){var e=this.getScroller();null!=e&&null!=this._scrollEventListener&&e.removeEventListener("scroll",this._scrollEventListener)},I.prototype._restoreScrollLeft=function(e){S.setScrollLeft(this.getScroller(),e)},I.prototype.getColumnWidthProperty=function(e){var t=window.getComputedStyle(e),o=this._getBoxStyle(t);return this._table._isIE()?parseFloat(t.width)+o.paddingWidth:parseFloat(t.width)+("border-box"===o.boxSizing?-o.borderWidth:o.paddingWidth)},I.prototype.getWidthPropertyFromOffsetWidth=function(e,t){var o=window.getComputedStyle(t);return e-this._getBoxStyle(o).borderWidth},I.prototype.isTableWidthConstrained=function(){return this._getSizingState().hasHorizontalOverflow},I.prototype.isTableHeightConstrained=function(){return this._getSizingState().hasVerticalOverflow},I.prototype.getScrollBarHeight=function(){return this.isTableWidthConstrained()?this._getDefaultScrollBarSize():0},I.prototype.getScrollBarWidth=function(){return this.isTableHeightConstrained()&&!this._isVerticalScrollBarHidden()?this._getDefaultScrollBarSize():0},I.prototype._getBoxStyle=function(e){return{boxSizing:e[O.CSS_PROP._BOX_SIZING],borderWidth:(parseFloat(e[O.CSS_PROP._BORDER_RIGHT_WIDTH])||0)+(parseFloat(e[O.CSS_PROP._BORDER_LEFT_WIDTH])||0),paddingWidth:(parseFloat(e[O.CSS_PROP._PADDING_RIGHT])||0)+(parseFloat(e[O.CSS_PROP._PADDING_LEFT])||0)}},I.prototype._applyColumnHeaderHeight=function(e,t){var o=this._table._getTableElementsByClassName(e,O.CSS_CLASSES._COLUMN_HEADER_CLASS);o.length>0&&(o[0].style[O.CSS_PROP._MIN_HEIGHT]=t+O.CSS_VAL._PX)},I.prototype._applyForcedColumnWidth=function(e,t){var o=e;""!==t&&(t+=O.CSS_VAL._PX),o.style[O.CSS_PROP._MIN_WIDTH]=t,o.style[O.CSS_PROP._WIDTH]=t,o.style[O.CSS_PROP._MAX_WIDTH]=t},I.prototype._getForcedColumnWidth=function(e,t,o){var l=this._getBoxStyle(t);return null!=o?o+("border-box"===l.boxSizing?l.borderWidth:-l.paddingWidth):this._table._isIE()&&"border-box"===l.boxSizing?parseFloat(t.width)+l.paddingWidth+l.borderWidth:parseFloat(t.width)},I.prototype.getMinimumForcedOffsetWidth=function(e){var t=0,o=this._table._getTableHeaderColumn(e);if(null!=o){var l=this._getBoxStyle(window.getComputedStyle(o)),n=l.paddingWidth+l.borderWidth;t<n&&(t=n)}var i=this._table._getTableBodyCell(0,e,null);if(null!=i){var s,a=0;if(this._table._hasRowOrCellRendererOrTemplate(e)){for(var r=this._table._getTableBodyRows(),_=0;_<r.length;_++)if(null!=(i=this._table._getTableBodyCell(_,e,null))){var d=(s=this._getBoxStyle(window.getComputedStyle(i))).paddingWidth+s.borderWidth;a<d&&(a=d)}}else a=(s=this._getBoxStyle(window.getComputedStyle(i))).paddingWidth+s.borderWidth;t<a&&(t=a)}var h=this._table._getTableFooterCell(e);if(null!=h){var u=this._getBoxStyle(window.getComputedStyle(h)),c=u.paddingWidth+u.borderWidth;t<c&&(t=c)}return t},I.prototype._isVerticalScrollBarHidden=function(){return!this._table._isTouchDevice()&&this._table._getTableContainer().classList.contains(O.MARKER_STYLE_CLASSES._HIDE_VERTICAL_SCROLLBAR)},I.prototype._getDefaultScrollBarSize=function(){return null==this._defaultScrollBarSize&&(this._defaultScrollBarSize=m.getDefaultScrollBarWidth(this.getScroller())),this._defaultScrollBarSize},I.prototype.clearCachedDimensions=function(){this._clientWidth=null,this._clientHeight=null,this._scrollWidth=null,this._scrollHeight=null},I.prototype.getRowScrollTop=function(){},I.prototype.getScrollWidth=function(){return null==this._scrollWidth&&(this._scrollWidth=this.getScroller().scrollWidth),this._scrollWidth},I.prototype.getScrollHeight=function(){return null==this._scrollHeight&&(this._scrollHeight=this.getScroller().scrollHeight),this._scrollHeight},I.prototype.getClientWidth=function(){return null==this._clientWidth&&(this._clientWidth=this.getScroller().clientWidth),this._clientWidth},I.prototype.getClientHeight=function(){return null==this._clientHeight&&(this._clientHeight=this.getScroller().clientHeight),this._clientHeight},I.prototype._removeTableDimensionsStyling=function(){this.unregisterScrollListeners();var e=this._table._getTable(),t=this._table._getTableHeader(),o=this._table._getTableHeaderRow(),l=this._table._getTableFooter(),n=this._table._getTableFooterRow(),i=this._table._getTableBody(),s=this._table._getTableBottomSlot(),a=this._table._getTableContainer();if(a.classList.remove(O.CSS_CLASSES._TABLE_SCROLL_VERTICAL_CLASS),a.classList.remove(O.CSS_CLASSES._TABLE_SCROLL_HORIZONTAL_CLASS),e.removeAttribute(O.DOM_ATTR._STYLE),null!=i&&i.removeAttribute(O.DOM_ATTR._STYLE),null!=t){t.removeAttribute(O.DOM_ATTR._STYLE),o.removeAttribute(O.DOM_ATTR._STYLE);for(var r=this._table._getTableElementsByClassName(o,O.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS),_=r.length,d=0;d<_;d++)r[d].style[O.CSS_PROP._WIDTH]=""}null!=l&&(l.removeAttribute(O.DOM_ATTR._STYLE),n.removeAttribute(O.DOM_ATTR._STYLE)),null!=s&&s.removeAttribute(O.DOM_ATTR._STYLE),this._removeHeaderColumnAndCellColumnWidths()},I.prototype._getTableContainerScrollableState=function(e){var t=this._table._getTableContainer(),o=this._table._getTable(),l=[];if(t.clientHeight>0){var n=o.offsetHeight+e;n>t.clientHeight?l[0]=1:t.clientHeight-n>0?l[0]=-1:l[0]=0}else l[0]=0;return t.clientWidth>0?o.offsetWidth>t.clientWidth?l[1]=1:t.clientWidth-o.offsetWidth>0?l[1]=-1:l[1]=0:l[1]=0,l},I.prototype._setForcedColumnWidths=function(){var e,t,o,l=this._table._getColumnDefs(),n=l.length,i=this._table._getTableBodyRows();this._forcedWidthColumns=[];for(var s=0;s<n;s++){var a=this._getPixelStyleEquivalent(l[s].width);if(null!=a){var r=null,_=null;if(null!=(e=this._table._getTableHeaderColumn(s))){var d=this._getForcedColumnWidth(e,window.getComputedStyle(e),a);this._applyForcedColumnWidth(e,d),this._forcedWidthColumns[s]=d}else this._forcedWidthColumns[s]=!0;if(null!=(t=0===this._table._editableRowIdx&&i.length>1?this._table._getTableBodyCell(1,s,null):this._table._getTableBodyCell(0,s,null))){this._table._hasRowOrCellRendererOrTemplate(s)||(r=window.getComputedStyle(t),_=this._getForcedColumnWidth(t,r,a));for(var h=0;h<i.length;h++)if(null!=(t=this._table._getTableBodyCell(h,s,null)))if(null==r){var u=window.getComputedStyle(t),c=this._getForcedColumnWidth(t,u,a);this._applyForcedColumnWidth(t,c)}else this._applyForcedColumnWidth(t,_)}null!=(o=this._table._getTableFooterCell(s))&&this._applyForcedColumnWidth(o,this._getForcedColumnWidth(o,window.getComputedStyle(o),a))}else this._forcedWidthColumns[s]=!1}},I.prototype._verifyMinAndMaxWidths=function(){for(var e=this._table._getColumnDefs(),t=e.length,o=this._table._getTableBodyRows().length,l=!0;l;){l=!1;for(var n=0;n<t;n++)if(!1===this._forcedWidthColumns[n]){if(this._applyColMinMax(e,n,o,!0)){l=!0;break}if(this._applyColMinMax(e,n,o,!1)){l=!0;break}}}},I.prototype._applyColMinMax=function(e,t,o,l){var n,i,s,a,r=!1,_=null,d=null,h=l?this._getPixelStyleEquivalent(e[t].minWidth):this._getPixelStyleEquivalent(e[t].maxWidth);if(null!=h&&(n=this._table._getTableHeaderColumn(t),i=0===this._table._editableRowIdx&&o>1?this._table._getTableBodyCell(1,t,null):this._table._getTableBodyCell(0,t,null),s=this._table._getTableFooterCell(t),null!=n?a=n.offsetWidth:null!=i?a=i.offsetWidth:null!=s&&(a=s.offsetWidth),a>0&&(l?a<h:a>h))){if(r=!0,this._forcedWidthColumns[t]=h,null!=n){var u=this._getForcedColumnWidth(n,window.getComputedStyle(n),h);this._applyForcedColumnWidth(n,u)}this._table._hasRowOrCellRendererOrTemplate(t)||(_=window.getComputedStyle(i),d=this._getForcedColumnWidth(i,_,h));for(var c=0;c<o;c++)if(null!=(i=this._table._getTableBodyCell(c,t,null)))if(null==_){var S=window.getComputedStyle(i),C=this._getForcedColumnWidth(i,S,h);this._applyForcedColumnWidth(i,C)}else this._applyForcedColumnWidth(i,d);null!=s&&this._applyForcedColumnWidth(s,this._getForcedColumnWidth(s,window.getComputedStyle(s),h))}return r},I.prototype._getPixelStyleEquivalent=function(e){return"string"==typeof e?""===e?null:"auto"===e?this._getMinWidthAutoEquivalent():null!=e.match(/\D/g)&&-1===e.indexOf("px")?(this._table._tableWidthContainer.style.width=e,this._table._tableWidthContainer.offsetWidth):parseFloat(e):e},I.prototype._getMinWidthAutoEquivalent=function(){return null};
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
var w=function e(t){e.superclass.constructor.call(this,t)};u.Object.createSubclass(w,I,"TableLegacyLayoutManager"),w.prototype.handleAfterRowsProcessed=function(e){this._freezeColumnWidths(e)},w.prototype._handleScrollerScrollLeft=function(e){w.superclass._handleScrollerScrollLeft.call(this,e);var t=this._table._getTableHeaderRow();t&&S.setScrollLeft(t.parentNode,e);var o=this._table._getTableFooterRow();o&&S.setScrollLeft(o.parentNode,e)},w.prototype.registerScrollListeners=function(){w.superclass.registerScrollListeners.call(this);var e=this._table._getTableHeaderRow();if(null!=e){var t=e.parentNode;null==this._headerScrollEventListener&&(this._headerScrollEventListener=function(e){var t=this._table._getElementScrollLeft(e.target);this._table._scrollLeft!==t&&this._table._setScrollX(t)}.bind(this)),t.removeEventListener("scroll",this._headerScrollEventListener),t.addEventListener("scroll",this._headerScrollEventListener,!1)}var o=this._table._getTableFooterRow();if(null!=o){var l=o.parentNode;null==this._footerScrollEventListener&&(this._footerScrollEventListener=function(e){var t=this._table._getElementScrollLeft(e.target);this._table._scrollLeft!==t&&this._table._setScrollX(t)}.bind(this)),l.removeEventListener("scroll",this._footerScrollEventListener),l.addEventListener("scroll",this._footerScrollEventListener,!1)}},w.prototype.unregisterScrollListeners=function(){w.superclass.unregisterScrollListeners.call(this);var e=this._table._getTableHeaderRow();null!=e&&null!=this._headerScrollEventListener&&e.parentNode.removeEventListener("scroll",this._headerScrollEventListener);var t=this._table._getTableFooterRow();null!=t&&null!=this._footerScrollEventListener&&t.parentNode.removeEventListener("scroll",this._footerScrollEventListener)},w.prototype._restoreScrollLeft=function(e){S.setScrollLeft(this.getScroller(),e);var t=this._table._getTableHeaderRow();t&&S.setScrollLeft(t.parentNode,e);var o=this._table._getTableFooterRow();o&&S.setScrollLeft(o.parentNode,e)},w.prototype.getScroller=function(){return this._table._getTableBody()},w.prototype.getRowScrollTop=function(e){return e.offsetTop},w.prototype.getRowTopOverflowDiff=function(e){var t=this.getScroller(),o=e.getBoundingClientRect();return t.getBoundingClientRect().top-o.top+t.clientTop},w.prototype.getRowBottomOverflowDiff=function(e){var t=this.getScroller(),o=e.getBoundingClientRect(),l=t.getBoundingClientRect();return o.bottom-l.bottom+(t.offsetHeight-t.clientHeight-t.clientTop)},w.prototype._freezeColumnWidths=function(e){var t=this._table._getColumnDefs().length;this._frozenWidthRows||(this._frozenWidthRows=[]);for(var o=[],l=0;l<t;l++){var n=this._table._getTableBodyCell(0,l,null);if(null!=n){var i=parseFloat(n.style[O.CSS_PROP._MIN_WIDTH]);isNaN(i)?o.push(null):o.push(i)}else o.push(null)}for(var s=e.childNodes,a=0;a<s.length;a++)if("TR"===s[a].nodeName){for(var r=s[a],_=this._table._getTableBodyCells(null,r),d=0;d<_.length;d++){var h=o[d];isNaN(h)||this._applyForcedColumnWidth(_[d],h)}this._frozenWidthRows.push(r)}},w.prototype._unfreezeColumnWidths=function(){if(this._frozenWidthRows)for(var e=0;e<this._frozenWidthRows.length;e++)for(var t=this._table._getTableBodyCells(null,this._frozenWidthRows[e]),o=0;o<t.length;o++){var l=t[o];this._applyForcedColumnWidth(l,""),this._table._styleTableBodyCell(o,l)}this._frozenWidthRows=[]},w.prototype._setColumnWidths=function(e){var t,o,l,n,i=[],s=[],a=[],r=[],_=this._table._getColumnDefs().length;for(t=0;t<_;t++)if(!1!==this._forcedWidthColumns[t])i[t]=null,a[t]=null,r[t]=null;else{if(null!=(o=this._table._getTableHeaderColumn(t))){i[t]=this._getForcedColumnWidth(o,window.getComputedStyle(o));var d=this._table._getTableElementsByClassName(o,O.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS);d.length>0&&(s[t]=d[0].clientHeight)}null!=(l=this._table._getTableBodyCell(0,t,null))&&(a[t]=this._getForcedColumnWidth(l,window.getComputedStyle(l))),null!=(n=this._table._getTableFooterCell(t))&&(r[t]=this._getForcedColumnWidth(n,window.getComputedStyle(n)))}for(t=0;t<_;t++)o=this._table._getTableHeaderColumn(t),n=this._table._getTableFooterCell(t),!1!==this._forcedWidthColumns[t]?t===_-1&&!this.isTableWidthConstrained()&&e>0?(null!=o&&(this._applyForcedColumnWidth(o,this._forcedWidthColumns[t]+e),this._applyColumnHeaderHeight(o,s[t])),null!=n&&this._applyForcedColumnWidth(n,this._forcedWidthColumns[t]+e)):this._applyColumnHeaderHeight(o,s[t]):(t===_-1&&!this.isTableWidthConstrained()&&e>0?(null!=o&&(this._applyForcedColumnWidth(o,i[t]+e),this._applyColumnHeaderHeight(o,s[t])),null!=n&&this._applyForcedColumnWidth(n,r[t]+e)):(null!=o&&(this._applyForcedColumnWidth(o,i[t]),this._applyColumnHeaderHeight(o,s[t])),null!=n&&this._applyForcedColumnWidth(n,r[t])),null!=(l=this._table._getTableBodyCell(0,t,null))&&this._applyForcedColumnWidth(l,a[t]))},w.prototype._isTableColumnsWidthSet=function(){for(var e=this._table._getColumnDefs().length,t=0;t<e;t++)if(!1!==this._forcedWidthColumns[t])return!0;return!1},w.prototype._isAllTableColumnsWidthSet=function(){for(var e=this._table._getColumnDefs().length,t=0;t<e;t++)if(!1===this._forcedWidthColumns[t])return!1;return!0},w.prototype.refreshTableDimensions=function(){var e=this._getSizingState(),t=this._getTableUpdates();if(!t.has(O._UPDATE._DATA_REFRESH)&&!t.has(O._UPDATE._DATA_SORT)&&!t.has(O._UPDATE._RESIZE)&&!t.has(O._UPDATE._REFRESH)&&!t.has(O._UPDATE._COL_RESIZE)&&!t.has(O._UPDATE._COL_REORDER)&&!t.has(O._UPDATE._ROW_REFRESH)&&(!t.has(O._UPDATE._ROWS_ADDED)||e.hasVerticalOverflow)&&(!t.has(O._UPDATE._ROWS_REMOVED)||!e.hasVerticalOverflow))return this._clearTableUpdates(),void this._enableTableVisibility();var o,l=this._table._getTable(),n=this._table._getTableContainer(),i=this._table._getTableHeader(),s=this._table._getTableBody(),a=this._table._getTableFooter(),r=this._table._getTableBottomSlot(),_=null,d=null;null!=this._table._scrollTop&&this._table._scrollTop>0&&(_=this._table._scrollTop),null!=this._table._scrollLeft&&this._table._scrollLeft>0&&(d=this._table._scrollLeft),this.clearCachedDimensions(),this._removeTableDimensionsStyling(),this._table._styleTableContainer(n),this._setForcedColumnWidths(),this._verifyMinAndMaxWidths(),o=null!=r&&r.clientHeight>0&&r.style[O.CSS_PROP._DISPLAY]!==O.CSS_VAL._NONE?r.offsetHeight:0;var h=this._getTableContainerScrollableState(o);if(1===h[0]?e.hasVerticalOverflow=!0:e.hasVerticalOverflow=!1,1===h[1]?e.hasHorizontalOverflow=!0:e.hasHorizontalOverflow=!1,null!=s){var u=s.offsetHeight-s.clientHeight;if(e.hasVerticalOverflow||e.hasHorizontalOverflow){var c=n.clientWidth,S=n.clientHeight,C=this._getDefaultScrollBarSize();C>0&&(e.hasHorizontalOverflow||this._isVerticalScrollBarHidden()?e.hasVerticalOverflow||(l.style[O.CSS_PROP._HEIGHT]=S+C-o+O.CSS_VAL._PX,n.clientHeight<S+C?(S=n.clientHeight,l.style[O.CSS_PROP._HEIGHT]=S-C-o+O.CSS_VAL._PX,S-C<l.clientHeight+o&&(e.hasVerticalOverflow=!0)):(S=n.clientHeight,l.style[O.CSS_PROP._HEIGHT]="")):(l.style[O.CSS_PROP._WIDTH]=c+C+O.CSS_VAL._PX,n.clientWidth<c+C?(c=n.clientWidth,l.style[O.CSS_PROP._WIDTH]=c-C+O.CSS_VAL._PX,c-C<l.clientWidth&&(e.hasHorizontalOverflow=!0)):(c=n.clientWidth,l.style[O.CSS_PROP._WIDTH]=""))),e.hasVerticalOverflow&&this._isVerticalScrollBarHidden()&&(s.style[O.CSS_PROP._OVERFLOW_Y]="hidden");var E=this.getScrollBarWidth();if(this._setColumnWidths(E),e.hasVerticalOverflow){n.classList.add(O.CSS_CLASSES._TABLE_SCROLL_VERTICAL_CLASS);var p=l.querySelector("tr."+O.CSS_CLASSES._TABLE_NO_DATA_CONTAINER_CLASS);null!=p&&p.classList.add(O.CSS_CLASSES._TABLE_NO_DATA_ROW_CLASS)}e.hasHorizontalOverflow&&n.classList.add(O.CSS_CLASSES._TABLE_SCROLL_HORIZONTAL_CLASS),n.classList.add(O.CSS_CLASSES._TABLE_LEGACY_SCROLL_CLASS);var T=0,g=this._table._getTableElementsByTagName(l,"caption");if(g.length>0&&(T=(g=g[0]).offsetHeight,g.style[O.CSS_PROP._DISPLAY]=O.CSS_VAL._INLINE,null!=i)){var f=window.getComputedStyle(n);i.style[O.CSS_PROP._BORDER_TOP]=f[O.CSS_PROP._BORDER_TOP]}var m=0;null!=i&&(m=i.offsetHeight),s.style[O.CSS_PROP._WIDTH]=c+O.CSS_VAL._PX;var b=0;null!=a&&(b=a.offsetHeight,s.style[O.CSS_PROP._TOP]=-1*b+O.CSS_VAL._PX);var A,y=S-m-b-T-o-u;if(y>0&&(s.style[O.CSS_PROP._HEIGHT]=y+O.CSS_VAL._PX,s.style[O.CSS_PROP._MIN_HEIGHT]=y+O.CSS_VAL._PX),e.hasHorizontalOverflow){if(0===this._table._getTableBodyRows().length){var L=this._table._getTableBodyMessageCell();if(L){var R=L.offsetWidth;null!=i&&(R=Math.max(R,i.offsetWidth)),null!=a&&(R=Math.max(R,a.offsetWidth)),this._applyForcedColumnWidth(L,R)}}A=c-E+O.CSS_VAL._PX}else A=c+O.CSS_VAL._PX;null!=i&&(i.style[O.CSS_PROP._WIDTH]=A),null!=a&&(a.style[O.CSS_PROP._TOP]=y+O.CSS_VAL._PX,a.style[O.CSS_PROP._WIDTH]=A)}else{if(this._isTableColumnsWidthSet()&&this._setColumnWidths(0),o>0)n.clientHeight-o!==l.offsetHeight&&(r.style[O.CSS_PROP._BOTTOM]=0,r.style[O.CSS_PROP._POSITION]=O.CSS_VAL._ABSOLUTE)}this._table._isStatusMessageShown()&&this._table._refreshTableStatusPosition(),this._table._refreshTouchAffordanceGlassPanePosition(),this._finalizeTableDimensions(_,d)}},w.prototype._removeTableDimensionsStyling=function(){w.superclass._removeTableDimensionsStyling.call(this),this._table._getTableContainer().classList.remove(O.CSS_CLASSES._TABLE_LEGACY_SCROLL_CLASS)},w.prototype._removeHeaderColumnAndCellColumnWidths=function(){var e,t=this._table._getColumnDefs().length;for(e=0;e<t;e++){var o=this._table._getTableHeaderColumn(e);null!=o&&(this._applyForcedColumnWidth(o,""),this._table._styleTableHeaderColumn(e,o))}this._unfreezeColumnWidths();var l=this._table._getTableBodyRows();if(l.length>0)for(e=0;e<t;e++){var n;if(null!=this._forcedWidthColumns&&!1!==this._forcedWidthColumns[e])for(var i=0;i<l.length;i++)null!==(n=this._table._getTableBodyCell(i,e,null))&&(this._applyForcedColumnWidth(n,""),this._table._styleTableBodyCell(e,n));else null!=(n=this._table._getTableBodyCell(0,e,null))&&(this._applyForcedColumnWidth(n,""),this._table._styleTableBodyCell(e,n))}for(e=0;e<t;e++){var s=this._table._getTableFooterCell(e);null!=s&&(this._applyForcedColumnWidth(s,""),this._table._styleTableFooterCell(e,s))}var a=this._table._getTableBodyMessageCell();a&&this._applyForcedColumnWidth(a,"")};
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
var N=function e(t){e.superclass.constructor.call(this,t)};u.Object.createSubclass(N,I,"TableStickyLayoutManager"),N.prototype.getScroller=function(){return this._table._getTableScroller()},N.prototype.getRowScrollTop=function(e){if(!this._table._isTableHeaderless()){var t=this._table._getTableHeader();if(null!=t)return e.offsetTop-t.offsetHeight}return e.offsetTop},N.prototype.getRowTopOverflowDiff=function(e){var t=e.getBoundingClientRect(),o=this.getScroller().getBoundingClientRect();if(this._table._isTableHeaderless())return o.top-t.top;var l=this._table._getTableHeader().offsetHeight;return o.top+l-t.top},N.prototype.getRowBottomOverflowDiff=function(e){var t=e.getBoundingClientRect(),o=this.getScroller().getBoundingClientRect(),l=this.getScrollBarHeight();if(this._table._isTableFooterless())return t.bottom-o.bottom+l;var n=this._table._getTableFooter().offsetHeight;return t.bottom-(o.bottom-n)+l},N.prototype._clearAllCache=function(){this._clearColumnSizingCache()},N.prototype._clearColumnSizingCache=function(){this._appliedColumnWidths=null,this._columnInitWidths=null,this._selectorColWidth=null},N.prototype.refreshTableDimensions=function(){var e=this._getSizingState(),t=this._getTableUpdates();if(t.has(O._UPDATE._REFRESH))this._clearAllCache();else{if(!(t.has(O._UPDATE._DATA_REFRESH)||t.has(O._UPDATE._RESIZE)||t.has(O._UPDATE._COL_RESIZE)||t.has(O._UPDATE._COL_REORDER)||t.has(O._UPDATE._ROWS_ADDED)&&!e.hasVerticalOverflow||t.has(O._UPDATE._ROWS_REMOVED)&&e.hasVerticalOverflow))return this._clearTableUpdates(),void this._enableTableVisibility();this._clearColumnSizingCache()}var o=null,l=null;null!=this._table._scrollTop&&this._table._scrollTop>0&&(o=this._table._scrollTop),null!=this._table._scrollLeft&&this._table._scrollLeft>0&&(l=this._table._scrollLeft);var n,i=this._table._getTableBottomSlot();n=null!=i&&i.clientHeight>0&&i.style[O.CSS_PROP._DISPLAY]!==O.CSS_VAL._NONE?i.offsetHeight:0;var s,a=this._table._getTableContainer(),r=this._table._getTable(),_=this._table._getTableBody();this.clearCachedDimensions(),this._removeTableDimensionsStyling(),u.AgentUtils.getAgentInfo().browser===u.AgentUtils.BROWSER.SAFARI&&(r.classList.remove(O.CSS_CLASSES._TABLE_ELEMENT_CLASS),s=r.offsetWidth,r.classList.add(O.CSS_CLASSES._TABLE_ELEMENT_CLASS)),this._table._styleTableContainer(a),this._initializeColumnLayouts(),this._setupTableHeight(n),s=this._determineColumnWidths(),r.style[O.CSS_PROP._WIDTH]=s+O.CSS_VAL._PX,r.style["table-layout"]="fixed";var d=this._getTableContainerScrollableState(n);1===d[0]?(e.hasVerticalOverflow=!0,a.classList.add(O.CSS_CLASSES._TABLE_SCROLL_VERTICAL_CLASS)):(e.hasVerticalOverflow=!1,a.classList.remove(O.CSS_CLASSES._TABLE_SCROLL_VERTICAL_CLASS)),1===d[1]?(e.hasHorizontalOverflow=!0,a.classList.add(O.CSS_CLASSES._TABLE_SCROLL_HORIZONTAL_CLASS)):(e.hasHorizontalOverflow=!1,a.classList.remove(O.CSS_CLASSES._TABLE_SCROLL_HORIZONTAL_CLASS)),null!=_&&(this._table._isStatusMessageShown()&&this._table._refreshTableStatusPosition(),this._table._refreshTouchAffordanceGlassPanePosition(),this._finalizeTableDimensions(o,l))},N.prototype._initializeColumnLayouts=function(){this._setForcedColumnWidths(),this._verifyMinAndMaxWidths()},N.prototype._setupTableHeight=function(e){var t=this._table._getTableContainer(),o=this._table._getTableScroller();o.removeAttribute(O.DOM_ATTR._STYLE);var l=t.clientHeight-e;o.offsetHeight!==l&&(o.style[O.CSS_PROP._HEIGHT]=l+O.CSS_VAL._PX);var n=this._table._getTableBottomSlot();null!=n&&(this._table._isTableStretchEnabled()?(n.style[O.CSS_PROP._BOTTOM]=0,n.style[O.CSS_PROP._POSITION]=O.CSS_VAL._ABSOLUTE):(n.style[O.CSS_PROP._BOTTOM]="",n.style[O.CSS_PROP._POSITION]=""))},N.prototype._removeHeaderColumnAndCellColumnWidths=function(){for(var e=this._table._getColumnDefs().length,t=0;t<e;t++){var o=this._table._getTableCol(t);o.style[O.CSS_PROP._WIDTH]="",o.style[O.CSS_PROP._DISPLAY]=""}this._appliedColumnWidths=null},N.prototype._determineColumnWidths=function(){this._savePreferredColWidths();var e=this._setAllColumnWidths();return this._clearForcedColumnWidths(),e},N.prototype._setAllColumnWidths=function(){var e=this._table._getColumnDefs().length,t=null!=this._selectorColWidth?this._selectorColWidth:0;this._appliedColumnWidths=[];for(var o=0;o<e;o++){var l=this._table._getTableCol(o),n=this._columnInitWidths[o];l.style[O.CSS_PROP._WIDTH]=n+O.CSS_VAL._PX,0===n&&(l.style[O.CSS_PROP._DISPLAY]=O.CSS_VAL._NONE),this._appliedColumnWidths[o]=n,t+=n}return t},N.prototype._clearForcedColumnWidths=function(){for(var e=this._table._getTableBodyRows(),t=0;t<this._forcedWidthColumns.length;t++)if(!1!==this._forcedWidthColumns[t]){var o=this._table._getTableHeaderColumn(t);null!=o&&this._applyForcedColumnWidth(o,"");for(var l=0;l<e.length;l++){var n=this._table._getTableBodyCell(l,t,null);null!=n&&this._applyForcedColumnWidth(n,"")}var i=this._table._getTableFooterCell(t);null!=i&&this._applyForcedColumnWidth(i,"")}},N.prototype._savePreferredColWidths=function(){if(null==this._selectorColWidth&&this._table._isDefaultSelectorEnabled()){var e=this._table._getTableSelectorColumn();if(null!=e)this._selectorColWidth=e.getBoundingClientRect().width;else{var t=this._table._getTableBodyRow(0),o=this._table._getTableBodySelectorCell(t);null!=o&&(this._selectorColWidth=o.getBoundingClientRect().width)}}if(null==this._columnInitWidths){this._columnInitWidths=[];for(var l=this._table._getColumnDefs().length,n=0;n<l;n++){var i=this._table._getTableHeaderColumn(n);if(null!=i)this._columnInitWidths[n]=i.getBoundingClientRect().width;else{var s=this._table._getTableBodyCell(0,n,null);null!=s&&(this._columnInitWidths[n]=s.getBoundingClientRect().width)}}}},
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
O.prototype._createContextInfo=function(){var e=document.createElement(O.DOM_ELEMENT._DIV);return e.id=this.createSubId("context"),e.classList.add(O.CSS_CLASSES._TABLE_ACC_CONTEXT_INFO_CLASS),e.classList.add(O.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),this._getTableContainer().appendChild(e),this._contextInfo=e,e},O.prototype._createStateInfo=function(){var e=document.createElement(O.DOM_ELEMENT._DIV);return e.id=this.createSubId("state"),e.classList.add(O.CSS_CLASSES._TABLE_ACC_STATE_INFO_CLASS),e.classList.add(O.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),this._getTableContainer().appendChild(e),this._stateInfo=e,e},O.prototype._createTableStatusAccNotification=function(){var e=this._getTableContainer(),t=document.createElement(O.DOM_ELEMENT._DIV);return t.setAttribute(O.DOM_ATTR._ROLE,"status"),t.classList.add(O.CSS_CLASSES._TABLE_STATUS_ACC_NOTIFICATION_CLASS),t.classList.add(O.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),e.appendChild(t),this._cacheDomElement(O.CSS_CLASSES._TABLE_STATUS_ACC_NOTIFICATION_CLASS,t),this._accStatus=t,t},O.prototype._updateAccStatusInfo=function(e,t,o,l){var n,i,s="",a="";if(!1!==this._accFirstFocus&&(s+=this._getTableContainer().id+" "),null!=o){if(this._contextInfo.textContent=this.getTranslatedString("accessibleColumnHeaderContext",{index:o+1}),s+=this._contextInfo.id+" ",-1===o)i=this._getTableSelectorColumn(),this._stateInfo.textContent="";else{i=this._getTableHeaderColumn(o);var r=this._getSelectedHeaderColumnIdxs();for(n=0;n<r.length;n++)if(r[n]===o){a+=this.getTranslatedString("accessibleStateSelected")+" ";break}var _=this._getColumnDefs()[o],d=c(i).data("sorted");null!=d?d===O._COLUMN_SORT_ORDER._ASCENDING?a+=this.getTranslatedString("accessibleSortAscending",{id:""})+" ":a+=this.getTranslatedString("accessibleSortDescending",{id:""})+" ":_.sortable===O._OPTION_ENABLED&&(a+=this.getTranslatedString("accessibleSortable",{id:""})+" "),this._stateInfo.textContent=a}s+=i.id+" "+this._stateInfo.id}else if(null!=l){var h;if(this._contextInfo.textContent=this.getTranslatedString("accessibleColumnFooterContext",{index:l+1}),s+=this._contextInfo.id+" ",-1===l)h=this._getTableFooterSelectorCell(),this._stateInfo.textContent="";else{h=this._getTableFooterCell(l);var u=this._getSelectedFooterColumnIdxs();for(n=0;n<u.length;n++)if(u[n]===l){a+=this.getTranslatedString("accessibleStateSelected")+" ";break}this._stateInfo.textContent=a}null!=(i=this._getTableHeaderColumn(l))&&(s+=i.id+" "),s+=h.id+" "+this._stateInfo.id}else{this._contextInfo.textContent="",e!==this._accRowIndex&&(this._contextInfo.textContent+=this.getTranslatedString("accessibleRowContext",{index:e+1})+" "),t!==this._accColumnIndex&&(this._contextInfo.textContent+=this.getTranslatedString("accessibleColumnContext",{index:t+1})),s+=this._contextInfo.id+" ";var S=this._getTableElementsByClassName(this._getTableBodyRow(e),O.CSS_CLASSES._TABLE_DATA_CELL_CLASS);null!=(i=this._getTableHeaderColumn(t))&&(s+=i.id+" "+S[t].id+" ");var C=this._getSelectedRowIdxs();for(n=0;n<C.length;n++)if(C[n]===e){a+=this.getTranslatedString("accessibleStateSelected")+" ";break}this._stateInfo.textContent=a,s+=this._stateInfo.id}this._applyAccStatusLabel(s),this._accRowIndex=e,this._accColumnIndex=t,this._accHeaderIndex=o,this._accFooterIndex=l},O.prototype._applyAccStatusLabel=function(e){!1!==this._accFirstFocus?this._accFirstFocus=!1:this._accStatus.setAttribute(O.DOM_ATTR._ARIA_LABELLEDBY,e),this._getTable().setAttribute(O.DOM_ATTR._ARIA_LABELLEDBY,e)},O.prototype._setRowLabelledBy=function(e,t){var o;this._contextInfo.textContent=this.getTranslatedString("accessibleRowContext",{index:e+1});var l=this._getTableElementsByClassName(t,O.CSS_CLASSES._TABLE_DATA_CELL_CLASS),n="";for(!1!==this._accFirstFocus&&(n+=this._getTableContainer().id+" "),n+=this._contextInfo.id+" ",o=0;o<l.length;o++)n+=this._getTableHeaderColumn(o).id+" "+l[o].id+" ";n+=this._stateInfo.id;var i="",s=this._getSelectedRowIdxs();for(o=0;o<s.length;o++)if(s[o]===e){i+=this.getTranslatedString("accessibleStateSelected")+" ";break}this._stateInfo.textContent=i,this._applyAccStatusLabel(n)},O.prototype._setHeaderColumnLabelledBy=function(e){var t;this._contextInfo.textContent=this.getTranslatedString("accessibleColumnHeaderContext",{index:e+1});var o="";if(-1===e)t=this._getTableSelectorColumn(),this._stateInfo.textContent="";else{t=this._getTableHeaderColumn(e);for(var l=this._getSelectedHeaderColumnIdxs(),n=0;n<l.length;n++)if(l[n]===e){o+=this.getTranslatedString("accessibleStateSelected")+" ";break}var i=this._getColumnDefs()[e],s=c(t).data("sorted");null!=s?s===O._COLUMN_SORT_ORDER._ASCENDING?o+=this.getTranslatedString("accessibleSortAscending",{id:""})+" ":o+=this.getTranslatedString("accessibleSortDescending",{id:""})+" ":i.sortable===O._OPTION_ENABLED&&(o+=this.getTranslatedString("accessibleSortable",{id:""})+" "),this._stateInfo.textContent=o}var a="";!1!==this._accFirstFocus&&(a+=this._getTableContainer().id+" "),a+=this._contextInfo.id+" "+t.id+" "+this._stateInfo.id,this._applyAccStatusLabel(a)},
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
O.prototype._getData=function(){if(!this._data&&null!=this.options.data){var e=this.options.data;if(u.TableDataSource&&e instanceof u.TableDataSource||this._isPagingModelTableDataSource())this._data=new u.TableDataSourceAdapter(e);else{if(!u.DataProviderFeatureChecker.isDataProvider(e)){var t=O._LOGGER_MSG._ERR_DATA_INVALID_TYPE_SUMMARY,o=O._LOGGER_MSG._ERR_DATA_INVALID_TYPE_DETAIL;throw new Error(t+"\n"+o)}e instanceof d||u.DataProviderFeatureChecker.isTreeDataProvider(e)?this._data=e:this._data=new d(e)}this._dataOption=this.options.data,this._registerDataSourceEventListeners()}return this._data},O.prototype._isPagingModelTableDataSource=function(){return!!(u.PagingTableDataSource&&this.options.data instanceof u.PagingTableDataSource)},O.prototype._registerDataSourceEventListeners=function(){var e=this._getData();if(null!=e){this._unregisterDataSourceEventListeners(),this._dataProviderEventHandlers=[],this._dataProviderEventHandlers.push({eventType:"mutate",eventHandler:this._handleDataRowMutate.bind(this)}),this._dataProviderEventHandlers.push({eventType:"refresh",eventHandler:this._handleDataRefresh.bind(this)});for(var t=this._dataProviderEventHandlers.length,o=0;o<t;o++){var l=e.addEventListener(this._dataProviderEventHandlers[o].eventType,this._dataProviderEventHandlers[o].eventHandler);l&&(this._dataProviderEventHandlers[o].eventHandler=l)}}},O.prototype._unregisterDataSourceEventListeners=function(){var e=this._getData();if(null!=this._dataProviderEventHandlers&&null!=e)for(var t=this._dataProviderEventHandlers.length,o=0;o<t;o++)e.removeEventListener(this._dataProviderEventHandlers[o].eventType,this._dataProviderEventHandlers[o].eventHandler)},O.prototype._handleDataRefresh=function(e){try{if(this._dataFetching)return void(this._pendingFetchStale=!0);e.detail&&void 0!==e.detail.disregardAfterKey?this._queueTask(function(){this._getLayoutManager().notifyTableUpdate(O._UPDATE._ROWS_REMOVED),this._removeRowsAfterLastValidRow(e.detail.disregardAfterKey),this._hasMoreToFetch()||this._registerDomScroller(),this._animateOnFetch=!0}.bind(this)):this._queueTask(function(){return this._getLayoutManager().notifyTableUpdate(O._UPDATE._DATA_REFRESH),this._beforeDataRefresh(),this._invokeDataFetchRows()}.bind(this))}catch(e){C.error(e)}},O.prototype._beforeDataRefresh=function(){this._clearIdleCallback(),this._adjustScrollPositionOnFetch(),this._invalidateRangeSelection(),null!=this._lastSelectedRowIdxArray&&(this._lastSelectedRowIdxArray=[]),this._initialSelectionStateValidated=!1},O.prototype._removeRowsAfterLastValidRow=function(e){this._getCurrentScrollPosition().y>0&&this._bufferScrollerForLastRow(e);var t=this._getRowIdxForRowKey(e);if(t>=0)for(var o=this._getTableBodyRows().length-1;o>t;o--)this._removeTableBodyRow(o)},O.prototype._bufferScrollerForLastRow=function(e){var t=this._getLayoutManager(),o=this._getRowIdxForRowKey(e);if(null!=o){var l=this._getTableBodyRow(o),n=t.getRowBottomOverflowDiff(l);if(n<0)this._createTableBodyScrollBuffer().style[O.CSS_PROP._HEIGHT]=Math.abs(n)+1+O.CSS_VAL._PX}},O.prototype._handleDataRowMutate=function(e){this._dataFetching?this._pendingFetchStale=!0:(null!=e.detail.remove&&this._handleDataRowRemove(e.detail.remove,e.detail.add),null!=e.detail.add&&this._handleDataRowAdd(e.detail.add),null!=e.detail.update&&this._handleDataRowChange(e.detail.update))},O.prototype._handleDataRowRemove=function(e,t){try{this._executeTableBodyRowsRemove(e,t)}catch(e){C.error(e)}finally{this._clearDataWaitingState()}},O.prototype._executeTableBodyRowsRemove=function(t,o){var l=this,n=t[O._CONST_KEYS];n&&n.size>0&&this._queueTask(function(){var n=l._getRowsFromEventDetailRemove(t);if(0!==n.length){l._getLayoutManager().notifyTableUpdate(O._UPDATE._ROWS_REMOVED),n.sort(function(e,t){return t.rowIdx-e.rowIdx});var i,s,a,r=l._getCurrentRow(),_=null!=r?r.rowIndex:0,d=null!=r?r.rowKey:null,h=[],u=[],S=[],C=[],E=n.length,p=!1,T=l._getTableBodyRows();if(T.length>0){for(a=0;a<T.length;a++)h.push(a);for(a=0;a<E;a++){s=n[a].rowIdx,u.push(s),S.push(n[a].row.key);for(var g=0;g<h.length;g++)if(h[g]===s){i=l._getTableBodyRow(s),C.push(i),h.splice(g,1);break}}0===h.length&&(p=!0)}var f=l._getTableBody(),b=c.contains(f,document.activeElement),A=!1;if(p)b&&(A=!0),l._clearSelectionState();else for(a=0;a<E;a++)if(s=n[a].rowIdx,i=l._getTableBodyRow(s),b&&null!=i&&c.contains(i,document.activeElement)){A=!0,b=!1;break}if(l._hasEditableRow()){var y=l._getEditableRowKey();m.containsKey(e(t[O._CONST_KEYS]),y)&&l._setTableEditable(!1,!0)}if(!p)return new Promise(function(e){l._IsCustomElement()?l._animateVisibleRows(C,u,"remove").then(function(){L(),R(),e(!0)}):(L(),R(),e(!0))});l._removeAllTableBodyRows(),R()}else l._updateSelectionStateFromEventDetailRemove(t,o);function L(){var e,t;if(l._getCurrentScrollPosition().y>0){var o=0,i=[];for(e=0;e<E;e++){t=n[e].rowIdx;var s=l._getTableBodyRow(t);null!=s&&(o+=s.offsetHeight,i.push(s))}l._createTableBodyScrollBuffer().style[O.CSS_PROP._HEIGHT]=o+O.CSS_VAL._PX;for(var a=0;a<i.length;a++)l._removeTableBodyRow(null,i[a])}else for(e=0;e<E;e++)t=n[e].rowIdx,l._removeTableBodyRow(t)}function R(){l._updateSelectionStateFromEventDetailRemove(t,o),l._refreshTableFooter(),0===(T=l._getTableBodyRows()).length&&l._showNoDataMessage(),null!=d&&(0===T.length||p||_>=T.length?l._setCurrentRow(null,null,!1):l._isTableActionableMode()&&-1===S.indexOf(d)||l._setCurrentRow({rowIndex:_,rowKey:null},null,!1)),A&&l._getTable().focus()}})},O.prototype._getRowsFromEventDetailRemove=function(e){var t=[];return e[O._CONST_KEYS].forEach(function(e){var o=this._getRowIdxForRowKey(e);if(void 0!==o){var l={key:e,index:o};t.push({row:l,rowIdx:o})}}.bind(this)),t},O.prototype._handleDataRowAdd=function(e){try{this._executeTableBodyRowsAdd(e)}catch(e){C.error(e)}finally{this._clearDataWaitingState()}},O.prototype._executeTableBodyRowsAdd=function(e){var t=e[O._CONST_KEYS];t&&t.size>0&&this._queueTask(function(){var t=this._getRowsFromEventDetailAdd(e);if(0!==t.length){var o=this._getLayoutManager();o.notifyTableUpdate(O._UPDATE._ROWS_ADDED);var l,n,i,s,a=!1,r=[],_=[],d=this._getTableBody();if(t.length>1){n=t.length;var h=!0;for(l=0;l<n;l++)0!==l&&t[l-1].rowIdx!==t[l].rowIdx-1&&(h=!1),_.push(t[l].rowIdx);if(h){for(i=document.createDocumentFragment(),n=t.length,l=0;l<n;l++)r.push(this._addSingleTableBodyRow(t[l].rowIdx,t[l].row,i,t[0].rowIdx));o.handleAfterRowsProcessed(i),null!=(s=this._getTableBodyRow(t[0].rowIdx))?d.insertBefore(i,s):this._appendElementToTableBody(i,d),a=!0}}if(!a)for(n=t.length,l=0;l<n;l++){var u=t[l].rowIdx;i=document.createDocumentFragment(),r.push(this._addSingleTableBodyRow(u,t[l].row,i,u)),o.handleAfterRowsProcessed(i),null!=(s=this._getTableBodyRow(u))?d.insertBefore(i,s):this._appendElementToTableBody(i,d)}return this._clearCachedDomRowData(),this._refreshTableFooter(),this._requiresDomScrollerRefresh&&this._registerDomScroller(),this._IsCustomElement()?this._animateVisibleRows(r,_,"add").then(function(){return this._afterRowsRendered(d)}.bind(this)):this._afterRowsRendered(d)}this._requiresDomScrollerRefresh&&this._registerDomScroller()}.bind(this))},O.prototype._getRowsFromEventDetailAdd=function(e){var t=[],o=!this._isLoadMoreOnScroll(),l=this._getLocalRowKeys(),n=l.length;if(!o&&0===n)return this._notifyAddOutOfViewport(),t;var i=m.getAddEventKeysResult(l,e,o),s=this._getData(),a=e[O._CONST_DATA],r=e[O._CONST_METADATA],_=[];e[O._CONST_KEYS].forEach(function(e){_.push(e)}),a instanceof Array||(a=[a]);var d=a.length;r instanceof Array||(r=[r]);var h,c=0;this._isPagingModelDataProvider()&&(c=s.getStartItemIndex()),s instanceof u.TableDataSourceAdapter&&(u.FlattenedTreeTableDataSource&&s.tableDataSource instanceof u.FlattenedTreeTableDataSource?h=s.tableDataSource:this._isPagingModelTableDataSource()&&u.FlattenedTreeTableDataSource&&s.tableDataSource.dataSource instanceof u.FlattenedTreeTableDataSource&&(h=s.tableDataSource.dataSource)),o||n+d===i.length||this._notifyAddOutOfViewport();for(var S=0;S<d;S++){var C=_[S],E=i.indexOf(C);if(-1!==E&&-1===l.indexOf(C)){var p;p=h&&h._getMetadata?h._getMetadata(E):r[S];var T={data:a[S],metadata:p,key:C,index:E+c};t.push({row:T,rowIdx:E})}}return t},O.prototype._notifyAddOutOfViewport=function(){this._noMoreData&&(this._animateOnFetch=!0,this._requiresDomScrollerRefresh=!0),this._noMoreData=!1},O.prototype._handleDataRowChange=function(e){try{this._executeTableBodyRowsChange(e)}catch(e){C.error(e)}finally{this._clearDataWaitingState()}},O.prototype._executeTableBodyRowsChange=function(e,t){this._queueTask(function(){var t=this._getTableBody(),o=c.contains(t,document.activeElement),l=this._getRowsFromEventDetailChange(e);if(0!==l.length){this._getLayoutManager().notifyTableUpdate(O._UPDATE._ROW_REFRESH);for(var n=l.length,i=[],s=[],a=0;a<n;a++){var r=this._refreshTableBodyRow(l[a].rowIdx,l[a].row);r&&(i.push(r),s.push(l[a].rowIdx))}return o&&this._getTable().focus(),this._refreshTableFooter(),this._IsCustomElement()?this._animateVisibleRows(i,s,"update").then(function(){return this._finalizeBodyRowRendering(i)}.bind(this)):this._finalizeBodyRowRendering(i)}}.bind(this))},O.prototype._getRowsFromEventDetailChange=function(e){var t=e[O._CONST_DATA],o=e[O._CONST_METADATA],l=[];e[O._CONST_KEYS].forEach(function(e){l.push(e)}),t instanceof Array||(t=[t]),o instanceof Array||(o=[o]);for(var n=[],i=t.length,s=0;s<i;s++){var a=this._getRowIdxForRowKey(l[s]);if(void 0!==a){var r={data:t[s],key:l[s],index:a,metadata:o[s]};n.push({row:r,rowIdx:a})}}return n},
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
O.prototype._clearCachedDom=function(){this._clearCachedDomRowData(),this._clearDomCache()},O.prototype._clearCachedDomRowData=function(){this._cachedDomTableBodyRows=null},O.prototype._createContextMenuContainer=function(){var e=this._GetContextMenu(),t=!!this._isTouchDevice()&&this._getRowSelectionMode()===O._OPTION_SELECTION_MODES._MULTIPLE;return!e&&(this._isTableSortable()||t||this._isTableColumnsResizable())&&(this._IsCustomElement()?(e=document.createElement("oj-menu")).setAttribute("data-oj-binding-provider","none"):(e=document.createElement(O.DOM_ELEMENT._UL),c(e).ojMenu()),e.style[O.CSS_PROP._DISPLAY]=O.CSS_VAL._NONE,e.setAttribute(O.DOM_ATTR._ID,this._getTableId()+"_contextmenu"),this._getTableContainer().appendChild(e),this.option("contextMenu","#"+e.getAttribute(O.DOM_ATTR._ID),{_context:{internalSet:!0}}),this._defaultContextMenu=e),e},O.prototype._populateContextMenuItems=function(e,t){var o=!!this._isTouchDevice()&&this._getRowSelectionMode()===O._OPTION_SELECTION_MODES._MULTIPLE;if(!this._menuContainer)if(this._GetDefaultContextMenu()){if(this._isTableSortable()){var l=this._createContextMenuItem("sort",this._IsCustomElement());e.appendChild(l)}if(o){var n=this._createContextMenuItem("enableNonContiguousSelection",this._IsCustomElement());e.appendChild(n)}if(this._isTableColumnsResizable()){var i=this._createContextMenuItem("resize",this._IsCustomElement());e.appendChild(i)}this._menuContainer=e,this._IsCustomElement()?(e.refresh(),e.addEventListener("ojAction",t)):(c(e).ojMenu("refresh"),c(e).on("ojselect",t))}else{var s=e.querySelectorAll("[data-oj-command]");if(s.length>0){var a,r,_;for(r=0;r<s.length;r++)"OJ-OPTION"!==s[r].tagName&&0!==s[r].getElementsByTagName(O.DOM_ELEMENT._A).length||(a=s[r].getAttribute("data-oj-command").split("-"),_=this._createContextMenuItem(a[a.length-1],this._IsCustomElement()),"OJ-OPTION"===s[r].tagName?s[r].innerHTML=_.innerHTML:c(s[r]).replaceWith(_));this._menuContainer=e,c(e).data("oj-ojMenu")&&(this._IsCustomElement()?e.refresh():c(e).ojMenu("refresh")),this._IsCustomElement()?e.addEventListener("ojAction",t):c(e).on("ojselect",t)}}return e},O.prototype._createContextMenuItem=function(e,t){if("sort"===e){var o,l=this._createContextMenuListItem(e,t);return o=this._IsCustomElement()?document.createElement("oj-menu"):document.createElement(O.DOM_ELEMENT._UL),l.appendChild(o),o.appendChild(this._createContextMenuListItem("sortAsc",t)),o.appendChild(this._createContextMenuListItem("sortDsc",t)),l}return"sortAsc"===e||"sortDsc"===e||"enableNonContiguousSelection"===e||"disableNonContiguousSelection"===e?this._createContextMenuListItem(e,t):"resize"===e?(this._createContextMenuResizePopup(0),this._createContextMenuListItem(e,t)):null},O.prototype._createContextMenuListItem=function(e,t){var o=document.createElement(t?"oj-option":"li");return o.setAttribute("data-oj-command","oj-table-"+e),o.appendChild(this._createContextMenuLabel(e,t)),o},O.prototype._createContextMenuLabel=function(e,t){var o=null;"sort"===e?o=this.getTranslatedString("labelSort"):"sortAsc"===e?o=this.getTranslatedString("labelSortAsc"):"sortDsc"===e?o=this.getTranslatedString("labelSortDsc"):"enableNonContiguousSelection"===e?o=this.getTranslatedString("labelEnableNonContiguousSelection"):"disableNonContiguousSelection"===e?o=this.getTranslatedString("labelDisableNonContiguousSelection"):"resize"===e&&(o=this.getTranslatedString("labelResize"));var l=document.createTextNode(o);if(t)return l;var n=document.createElement(O.DOM_ELEMENT._A);return n.setAttribute(O.DOM_ATTR._HREF,"#"),n.appendChild(l),n},O.prototype._createContextMenuResizePopup=function(e){e=Math.round(e);var t,o,l,n,i,s,a,r,_,d,h=this._getContextMenuResizePopup();return this._IsCustomElement()?null==h?(l=this._getTableContainer(),(h=document.createElement("oj-popup")).setAttribute("id",this._getTableId()+"_resize_popup"),h.setAttribute("data-oj-binding-provider","none"),l.appendChild(h),n=document.createElement(O.DOM_ELEMENT._DIV),i=document.createElement(O.DOM_ELEMENT._DIV),(s=document.createElement(O.DOM_ELEMENT._DIV)).classList.add(O.CSS_CLASSES._TEXT_ALIGN_END),h.appendChild(n),h.appendChild(i),h.appendChild(s),(_=document.createElement("h6")).textContent=this.getTranslatedString("labelResizePopupSpinner"),n.appendChild(_),(t=document.createElement("oj-input-number")).setAttribute("id",this._getTableId()+"_resize_popup_spinner"),(a=document.createElement("oj-button")).setAttribute("id",this._getTableId()+"_resize_popup_popupcancel"),a.style.margin="5px",a.textContent=this.getTranslatedString("labelResizePopupCancel"),(r=document.createElement("oj-button")).setAttribute("id",this._getTableId()+"_resize_popup_popupsubmit"),r.style.margin="5px",r.textContent=this.getTranslatedString("labelResizePopupSubmit"),i.appendChild(t),s.appendChild(r),s.appendChild(a),o=function(){r.disabled=!1,t.value=0,h.close()},a.addEventListener("click",o),r.addEventListener("click",this._handleContextMenuResizePopup.bind(this)),t.max=1e3,t.min=10,t.step=1,t.value=e,t.displayOptions={messages:["notewindow"]},t.userAssistanceDensity="compact",t.validators=[new R({pattern:"^[1-9][0-9]*$",messageDetail:this.getTranslatedString("msgColumnResizeWidthValidation")})],t.addEventListener("validChanged",function(e){"valid"===e.detail.value?r.disabled=!1:r.disabled=!0}),d={my:"start top",at:"start bottom",collision:"flipfit"},h.setAttribute("position",JSON.stringify(d)),h.setAttribute("modality","modal"),this._cacheDomElement(this._getTableId()+"_resize_popup",h)):(t=document.getElementById(this._getTableId()+"_resize_popup_spinner")).value=e:(l=this._getTableContainer(),null==h?((h=document.createElement(O.DOM_ELEMENT._DIV)).setAttribute("id",this._getTableId()+"_resize_popup"),h.setAttribute("data-oj-context",""),l.appendChild(h),n=document.createElement(O.DOM_ELEMENT._DIV),i=document.createElement(O.DOM_ELEMENT._DIV),(s=document.createElement(O.DOM_ELEMENT._DIV)).classList.add(O.CSS_CLASSES._TEXT_ALIGN_END),h.appendChild(n),h.appendChild(i),h.appendChild(s),(_=document.createElement("h6")).textContent=this.getTranslatedString("labelResizePopupSpinner"),n.appendChild(_),(t=document.createElement(O.DOM_ELEMENT._INPUT)).setAttribute("id",this._getTableId()+"_resize_popup_spinner"),(a=document.createElement(O.DOM_ELEMENT._BUTTON)).setAttribute("id",this._getTableId()+"_resize_popup_popupcancel"),a.style.margin="5px",(r=document.createElement(O.DOM_ELEMENT._BUTTON)).setAttribute("id",this._getTableId()+"_resize_popup_popupsubmit"),r.style.margin="5px",i.appendChild(t),s.appendChild(r),s.appendChild(a),c(r).ojButton({component:"ojButton",label:this.getTranslatedString("labelResizePopupSubmit")}),c(a).ojButton({component:"ojButton",label:this.getTranslatedString("labelResizePopupCancel")}),o=function(){c(r).ojButton({disabled:!1}),c(t).ojInputNumber({value:0}),c(h).ojPopup("close")},c(r).on("click",this._handleContextMenuResizePopup.bind(this)),c(a).on("click",o),c(t).ojInputNumber({component:"ojInputNumber",max:1e4,min:10,step:1,value:e,displayOptions:{messages:["notewindow"]},userAssistanceDensity:"compact",validators:[new R({pattern:"^[1-9][0-9]*$",messageDetail:this.getTranslatedString("msgColumnResizeWidthValidation")})]}),c(h).ojPopup({modality:"modal",position:{my:"start top",at:"start bottom",collision:"flipfit"}}),c(t).on("change",function(){c(r).ojButton({disabled:!c(t).ojInputNumber("validate")})}),this._cacheDomElement(this._getTableId()+"_resize_popup",h)):(t=document.getElementById(this._getTableId()+"_resize_popup_spinner"),c(t).ojInputNumber("option","value",e))),h},O.prototype._createInitialTable=function(e,t){var o=this._getTable();return this._createTableContainer(),this._isStickyLayoutEnabled()&&(this._createTableScroller(),this._createTableColGroup()),e||this._createTableHeader(),t||this._createTableFooter(),this._createTableBody(),this._createTableStatusMessage(),this._createTableStatusAccNotification(),this._createContextInfo(),this._createStateInfo(),this._createTableWidthContainer(),o},O.prototype._createTableBody=function(){var e=this._getTable(),t=document.createElement(O.DOM_ELEMENT._TBODY);return e.appendChild(t),this._cacheDomElement(O.CSS_CLASSES._TABLE_BODY_CLASS,t),t},O.prototype._createTableBodyScrollBuffer=function(){var e=this._getTableBodyScrollBuffer();return null==e&&((e=this._createTableBodyRow()).classList.add(O.CSS_CLASSES._TABLE_BUFFER_ROW_CLASS),this._getTableBody().appendChild(e),this._clearDomCache(O.CSS_CLASSES._TABLE_BUFFER_ROW_CLASS)),e},O.prototype._appendElementToTableBody=function(e,t){var o=this._getTableBodyScrollBuffer();null!=o?t.insertBefore(e,o):t.appendChild(e)},O.prototype._createTableBodyCell=function(){return document.createElement(O.DOM_ELEMENT._TD)},O.prototype._createTableBodyDefaultSelector=function(e,t){var o=null;(o=document.createElement(O.DOM_ELEMENT._TD)).classList.add(O.CSS_CLASSES._TABLE_SELECTOR_CELL),this._isVerticalGridEnabled()&&o.classList.add(O.CSS_CLASSES._TABLE_VGRID_LINES_CLASS);var l=document.createElement("oj-selector");return l.id="table_selector"+e,l.selectedKeys=this.options.selected.row,l.setAttribute("data-oj-binding-provider","none"),l.classList.add(O.CSS_CLASSES._TABLE_DATA_ROW_SELECTOR_CLASS),l.setAttribute("selection-mode","multiple"),l.rowKey=e,l.addEventListener("selectedKeysChanged",function(e){"internal"===e.detail.updatedFrom&&this._setSelected({row:e.detail.value,column:new L.KeySetImpl},!1,!0)}.bind(this)),o.appendChild(l),t.insertBefore(o,t.firstChild),o},O.prototype._createTableHeaderSelectorColumn=function(){var e=document.createElement(O.DOM_ELEMENT._TH);e.classList.add(O.CSS_CLASSES._COLUMN_HEADER_SELECTOR_CELL_CLASS),this._isVerticalGridEnabled()&&e.classList.add(O.CSS_CLASSES._TABLE_VGRID_LINES_CLASS);var t=document.createElement("oj-selector");return t.selectedKeys=this.options.selected.row,t.setAttribute("data-oj-binding-provider","none"),t.classList.add(O.CSS_CLASSES._TABLE_HEADER_SELECTOR_CLASS),t.setAttribute("selection-mode","all"),t.addEventListener("selectedKeysChanged",function(e){"internal"===e.detail.updatedFrom&&this._setSelected({row:e.detail.value,column:new L.KeySetImpl},!1,!0)}.bind(this)),e.appendChild(t),e},O.prototype._createTableFooterSelectorCell=function(){var e=this._createTableFooterCell();return e.classList.add(O.CSS_CLASSES._TABLE_FOOTER_SELECTOR_CELL_CLASS),this._isVerticalGridEnabled()&&e.classList.add(O.CSS_CLASSES._TABLE_VGRID_LINES_CLASS),e},O.prototype._createTableBodyMessageCell=function(e,t,o){var l=document.createElement(O.DOM_ELEMENT._TD);return this._isDefaultSelectorEnabled()&&(t+=1),l.setAttribute(O.DOM_ATTR._COLSPAN,t),l.classList.add(O.CSS_CLASSES._TABLE_BODY_MESSAGE_CLASS),l.appendChild(document.createTextNode(o)),e.appendChild(l),l},O.prototype._createTableBodyMessageRow=function(e,t){var o=this._getTableBody(),l=document.createElement(O.DOM_ELEMENT._TR);return l.classList.add(O.CSS_CLASSES._TABLE_BODY_MESSAGE_ROW_CLASS),this._createTableBodyMessageCell(l,e,t),this._appendElementToTableBody(l,o),l},O.prototype._createTableBodyRow=function(){return document.createElement(O.DOM_ELEMENT._TR)},O.prototype._getTouchAffordanceGlassPane=function(){var e=this._getTableContainer(),t=this._getTableElementsByClassName(e,O.CSS_CLASSES._TABLE_TOUCH_AFFORDANCE_GLASS_PANE_CLASS);return t.length>0?t[0]:null},O.prototype._createTouchAffordanceGlassPane=function(){var e=this._getTouchAffordanceGlassPane();if(!e){var t=this._getTableContainer();(e=document.createElement(O.DOM_ELEMENT._DIV)).classList.add(O.CSS_CLASSES._TABLE_TOUCH_AFFORDANCE_GLASS_PANE_CLASS),t.appendChild(e),this._refreshTouchAffordanceGlassPanePosition()}return e},O.prototype._createTableBodyRowTouchSelectionAffordance=function(e){var t=this._createTouchAffordanceGlassPane(),o=this._getTableBodyRowTouchSelectionAffordanceTop();if(!o){(o=document.createElement(O.DOM_ELEMENT._DIV)).classList.add(O.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_TOP_CLASS),o.classList.add(O.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_TOUCH_AREA_CLASS);var l=document.createElement(O.DOM_ELEMENT._DIV);l.classList.add(O.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_TOP_ICON_CLASS),l.setAttribute(O.DOM_ATTR._ROLE,"button"),l.setAttribute(O.DOM_ATTR._ARIA_LABEL,this.getTranslatedString("labelAccSelectionAffordanceTop")),o.appendChild(l),t.appendChild(o)}var n=this._getTableBodyRowTouchSelectionAffordanceBottom();if(!n){(n=document.createElement(O.DOM_ELEMENT._DIV)).classList.add(O.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_BOTTOM_CLASS),n.classList.add(O.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_TOUCH_AREA_CLASS);var i=document.createElement(O.DOM_ELEMENT._DIV);i.classList.add(O.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_BOTTOM_ICON_CLASS),i.setAttribute(O.DOM_ATTR._ROLE,"button"),i.setAttribute(O.DOM_ATTR._ARIA_LABEL,this.getTranslatedString("labelAccSelectionAffordanceBottom")),n.appendChild(i),t.appendChild(n)}this._moveTableBodyRowTouchSelectionAffordanceTop(e),this._moveTableBodyRowTouchSelectionAffordanceBottom(e)},O.prototype._createTableBottomSlot=function(){var e=this._getTableContainer(),t=document.createElement(O.DOM_ELEMENT._DIV);return t.classList.add(O.CSS_CLASSES._TABLE_BOTTOM_SLOT_CLASS),e.appendChild(t),this._cacheDomElement(O.CSS_CLASSES._TABLE_BOTTOM_SLOT_CLASS,t),t},O.prototype._createTableContainer=function(){var e=this.OuterWrapper;return e||(e=document.createElement(O.DOM_ELEMENT._DIV),this.element[0].parentNode.replaceChild(e,this.element[0]),e.insertBefore(this.element[0],e.firstChild)),this._cacheDomElement(O.CSS_CLASSES._TABLE_CONTAINER_CLASS,e),e.classList.add(O.CSS_CLASSES._TABLE_CLASS),e.classList.add(O.CSS_CLASSES._TABLE_CONTAINER_CLASS),e.classList.add(O.MARKER_STYLE_CLASSES._WIDGET),e},O.prototype._createTableScroller=function(){var e=document.createElement(O.DOM_ELEMENT._DIV);return e.classList.add(O.CSS_CLASSES._TABLE_SCROLLER_CLASS),this.element[0].parentNode.replaceChild(e,this.element[0]),e.insertBefore(this.element[0],e.firstChild),e},O.prototype._createTableColGroup=function(){var e=document.createElement(O.DOM_ELEMENT._COLGROUP);e.classList.add(O.CSS_CLASSES._TABLE_COLGROUP_CLASS),this._cacheDomElement(O.CSS_CLASSES._TABLE_COLGROUP_CLASS,e);var t=this._getTableHeader();if(null!=t)return t.parentNode.insertBefore(e,t),e;var o=this._getTableBody();if(null!=o)return o.parentNode.insertBefore(e,o),e;var l=this._getTableFooter();return null!=l?(l.parentNode.insertBefore(e,l),e):(this._getTable().appendChild(e),e)},O.prototype._createTableFooter=function(){var e=this._getTable(),t=document.createElement(O.DOM_ELEMENT._TFOOT),o=document.createElement(O.DOM_ELEMENT._TR);t.appendChild(o);var l=this._getTableHeader();if(null!=l)l.parentNode.insertBefore(t,l.nextSibling);else{var n=this._getTableBody();null!=n?n.parentNode.insertBefore(t,n):e.appendChild(t)}return this._cacheDomElement(O.CSS_CLASSES._TABLE_FOOTER_CLASS,t),t},O.prototype._createTableFooterCell=function(){return document.createElement(O.DOM_ELEMENT._TD)},O.prototype._createTableHeader=function(){var e=this._getTable(),t=document.createElement(O.DOM_ELEMENT._THEAD),o=document.createElement(O.DOM_ELEMENT._TR);t.appendChild(o);var l=this._getTableFooter();if(null!=l)l.parentNode.insertBefore(t,l);else{var n=this._getTableBody();null!=n?n.parentNode.insertBefore(t,n):e.appendChild(t)}return this._cacheDomElement(O.CSS_CLASSES._TABLE_HEADER_ROW_CLASS,o),this._cacheDomElement(O.CSS_CLASSES._TABLE_HEADER_CLASS,t),t},O.prototype._createTableHeaderColumn=function(e){var t=this._getColumnDefs()[e],o=document.createElement(O.DOM_ELEMENT._TH);this._styleTableHeaderColumn(e,o,!0),o.setAttribute("abbr",t.headerText),o.setAttribute(O.DOM_ATTR._TITLE,t.headerText),this._insertTableHeaderColumn(e,o);var l={columnIndex:e,headerContext:{component:this,parentElement:o}};return t.resizable===O._OPTION_ENABLED&&o.setAttribute("data-oj-resizable",O._OPTION_ENABLED),t.sortable===O._OPTION_ENABLED?(o.setAttribute("data-oj-sortable",O._OPTION_ENABLED),this._columnHeaderSortableIconRenderer(l)):this._columnHeaderDefaultRenderer(l),o},O.prototype._createTableSelectorCol=function(){var e=document.createElement(O.DOM_ELEMENT._COL);return e.classList.add(O.CSS_CLASSES._TABLE_COL_SELECTOR_CLASS),e},O.prototype._createTableCol=function(){var e=document.createElement(O.DOM_ELEMENT._COL);return e.classList.add(O.CSS_CLASSES._TABLE_COL_CLASS),e},O.prototype._createTableHeaderColumnDragImage=function(e){var t;if(1===e.length){(t=this._getTableHeaderColumn(e[0]).cloneNode(!0)).classList.remove(O.MARKER_STYLE_CLASSES._FOCUS),t.classList.remove(O.MARKER_STYLE_CLASSES._FOCUS_HIGHLIGHT),t.classList.remove(O.MARKER_STYLE_CLASSES._HOVER)}else{(t=document.createElement("th")).classList.add("oj-table-column-header-cell");var o=document.createElement(O.DOM_ELEMENT._DIV);o.classList.add(O.CSS_CLASSES._COLUMN_HEADER_CLASS),t.appendChild(o);var l=document.createElement(O.DOM_ELEMENT._DIV);l.classList.add(O.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS),l.textContent=e.length+" Items",o.appendChild(l)}return t.classList.add(O.CSS_CLASSES._COLUMN_HEADER_DRAG_IMAGE),t.style[O.CSS_PROP._POSITION]=O.CSS_VAL._ABSOLUTE,t.style[O.CSS_PROP._TOP]="0",t.style[O.CSS_PROP._LEFT]="-999em",t.style[O.CSS_PROP._ZINDEX]="-999",document.body.appendChild(t),t},O.prototype._createTableHeaderColumnResizeIndicator=function(){var e=this._getTableHeaderColumnResizeIndicator();if(!e){var t=this._getTableContainer();e=document.createElement(O.DOM_ELEMENT._DIV),t.appendChild(e),e.classList.add(O.CSS_CLASSES._COLUMN_HEADER_RESIZE_INDICATOR_CLASS),this._cacheDomElement(O.CSS_CLASSES._COLUMN_HEADER_RESIZE_INDICATOR_CLASS,e)}return e},O.prototype.createSubId=function(e){return[this._getRootElement().id,e].join(":")},O.prototype._createTableStatusMessage=function(){var e=this._getTableContainer(),t=document.createElement(O.DOM_ELEMENT._DIV);if(t.classList.add(O.CSS_CLASSES._TABLE_STATUS_MESSAGE_CLASS),t.style[O.CSS_PROP._DISPLAY]=O.CSS_VAL._NONE,!this._isSkeletonSupport()){var o=document.createElement(O.DOM_ELEMENT._DIV);o.classList.add(O.CSS_CLASSES._ICON_CLASS),o.classList.add(O.CSS_CLASSES._TABLE_LOADING_ICON_CLASS),o.setAttribute("aria-label",this.getTranslatedString(O._BUNDLE_KEY._MSG_FETCHING_DATA)),t.appendChild(o)}return e.appendChild(t),this._cacheDomElement(O.CSS_CLASSES._TABLE_STATUS_MESSAGE_CLASS,t),t},O.prototype._createTableWidthContainer=function(){var e=this._getTableContainer(),t=document.createElement(O.DOM_ELEMENT._DIV);return t.classList.add(O.CSS_CLASSES._TABLE_WIDTH_CONTAINER_CLASS),e.appendChild(t),this._tableWidthContainer=t,t},O.prototype._displayDragOverIndicatorColumn=function(e,t){this._removeDragOverIndicatorColumn();var o=this._getTableHeaderRow(),l=this._getTableHeaderColumn(e),n=this._getVisibleRowIdxs();null!=l?(t?l.classList.add(O.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS):l.classList.add(O.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS),n.forEach(function(o){var l=this._getTableBodyCell(o,e);null!=l&&(t?l.classList.add(O.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS):l.classList.add(O.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS))}.bind(this))):0===this._getColumnDefs().length&&(t?o.classList.add(O.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS):o.classList.add(O.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS))},O.prototype._displayDragOverIndicatorRow=function(e,t,o,l){this._removeDragOverIndicatorRow();var n=document.createElement(O.DOM_ELEMENT._TR);n.classList.add(O.CSS_CLASSES._TABLE_DATA_ROW_DRAG_INDICATOR_CLASS),"line"===o?n.classList.add("oj-table-body-row-drop-target"):null!=t&&(c(n).height(parseInt(c(t).height(),10)),l&&this._rowsDragged.forEach(function(e){e.classList.add("oj-table-row-drag-source-hide")}));var i=document.createElement(O.DOM_ELEMENT._TD),s=this._getColumnDefs().length;this._isDefaultSelectorEnabled()&&(s+=1),i.setAttribute(O.DOM_ATTR._COLSPAN,s),n.appendChild(i);var a=this._getTableBodyRow(e);null!=a?a.parentNode.insertBefore(n,a):(0===this._getTableBodyRows().length&&this._hideNoDataMessage(),this._getTableBody().appendChild(n))},O.prototype._getContextMenuElement=function(){return this._menuContainer},O.prototype._getContextMenuResizePopup=function(){var e=this._getTableId()+"_resize_popup";if(!this._isCachedDomElement(e)){var t=document.getElementById(e);this._cacheDomElement(e,t)}return this._getCachedDomElement(e)},O.prototype._getElementColumnIdx=function(e){var t=this._getFirstAncestor(e,"."+O.CSS_CLASSES._TABLE_DATA_CELL_CLASS,!0);if(null!=t)return c(t.parentNode).children("."+O.CSS_CLASSES._TABLE_DATA_CELL_CLASS).index(t);var o=this._getFirstAncestor(e,"."+O.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS,!0);if(null!=o)return c(o.parentNode).children("."+O.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS).index(o);var l=this._getFirstAncestor(e,"."+O.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS,!0);return null!=l?c(l.parentNode).children("."+O.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS).index(l):null},O.prototype._getElementRowIdx=function(e){var t=this._getFirstAncestor(e,"."+O.CSS_CLASSES._TABLE_DATA_ROW_CLASS,!0);if(null!=t){var o=this._getTableBodyRows(),l=c(o).index(t);return l>-1?l:null}return null},O.prototype._getFirstAncestor=function(e,t,o){var l;if(null==e)return null;if(this._isIE()&&!Element.prototype.matches?e.msMatchesSelector(t):e.matches(t))return o&&!this._isTableOwned(e)?this._getFirstAncestor(e.parentNode,t,o):e;if(l=c(e).parents(t),o){for(var n=0;n<l.length;n++)if(this._isTableOwned(l[n]))return l[n];return null}return l.length>0?l[0]:null},O.prototype._getElementScrollLeft=function(e){return Math.abs(e.scrollLeft)},O.prototype._getTable=function(){return this.element[0]},O.prototype._getTableBody=function(){return this._getTableElementByClassName(O.CSS_CLASSES._TABLE_BODY_CLASS,!0)},O.prototype._getTableBodyScrollBuffer=function(){return this._getTableElementByClassName(O.CSS_CLASSES._TABLE_BUFFER_ROW_CLASS)},O.prototype._getTableBodyCell=function(e,t,o){var l=this._getTableBodyCells(e,o);return l.length>t?l[t]:null},O.prototype._getTableBodyLogicalCells=function(e,t){var o=this._getTableBodyCells(e,t);return this._getColspanLogicalElements(o)},O.prototype._getTableBodyCells=function(e,t){return t||(t=this._getTableBodyRow(e))?this._getTableElementsByClassName(t,O.CSS_CLASSES._TABLE_DATA_CELL_CLASS):[]},O.prototype._getTableBodyMessageCell=function(){var e=this._getTableBody();if(e){var t=this._getTableElementsByClassName(e,O.CSS_CLASSES._TABLE_BODY_MESSAGE_CLASS);if(t.length>0)return t[0]}return null},O.prototype._getTableBodyMessageRow=function(){var e=this._getTableBody();if(e){var t=this._getTableElementsByClassName(e,O.CSS_CLASSES._TABLE_BODY_MESSAGE_ROW_CLASS);if(t.length>0)return t[0]}return null},O.prototype._getTableBodyRow=function(e){var t=this._getTableBodyRows();return null!=e&&t.length>e?t[e]:null},O.prototype._getTableBodyRows=function(){if(!this._cachedDomTableBodyRows){var e=this._getTableBody();this._cachedDomTableBodyRows=null!=e?this._getTableElementsByClassName(e,O.CSS_CLASSES._TABLE_DATA_ROW_CLASS):[]}return this._cachedDomTableBodyRows},O.prototype._getTableTempSkeletonRow=function(){var e=this._getTableBody();return null!=e?this._getChildElementByClassName(e,O.CSS_CLASSES._TABLE_TEMP_SKELETON_ROW_CLASS):null},O.prototype._getTableBodyRowTouchSelectionAffordanceTop=function(){var e=this._getTableContainer(),t=this._getTableElementsByClassName(e,O.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_TOP_CLASS);return t.length>0?t[0]:null},O.prototype._getTableBodyRowTouchSelectionAffordanceBottom=function(){var e=this._getTableContainer(),t=this._getTableElementsByClassName(e,O.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_BOTTOM_CLASS);return t.length>0?t[0]:null},O.prototype._getTableBottomSlot=function(){return this._getTableElementByClassName(O.CSS_CLASSES._TABLE_BOTTOM_SLOT_CLASS,!0)},O.prototype._getTableContainer=function(){if(!this._isCachedDomElement(O.CSS_CLASSES._TABLE_CONTAINER_CLASS)){var e=this.element[0].parentNode;e.classList.contains(O.CSS_CLASSES._TABLE_SCROLLER_CLASS)?this._cacheDomElement(O.CSS_CLASSES._TABLE_CONTAINER_CLASS,e.parentNode):this._cacheDomElement(O.CSS_CLASSES._TABLE_CONTAINER_CLASS,e)}return this._getCachedDomElement(O.CSS_CLASSES._TABLE_CONTAINER_CLASS)},O.prototype._getTableScroller=function(){return this._getTableElementByClassName(O.CSS_CLASSES._TABLE_SCROLLER_CLASS,!0)},O.prototype._getTableFooter=function(){return this._getTableElementByClassName(O.CSS_CLASSES._TABLE_FOOTER_CLASS,!0)},O.prototype._getTableFooterCell=function(e){var t=this._getTableFooterCells();return null!=t&&t.length>e?t[e]:null},O.prototype._getTableFooterCells=function(){var e=this._getTableFooterRow(),t=null!=e?this._getTableElementsByClassName(e,O.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS):null;return null!=t&&t.length>0?t:null},O.prototype._getTableFooterLogicalCells=function(){var e=this._getTableFooterCells();return e?this._getColspanLogicalElements(e):null},O.prototype._getTableFooterRow=function(){return this._getTableElementByClassName(O.CSS_CLASSES._TABLE_FOOTER_ROW_CLASS)},O.prototype._getTableHeader=function(){return this._getTableElementByClassName(O.CSS_CLASSES._TABLE_HEADER_CLASS,!0)},O.prototype._getTableHeaderColumn=function(e){var t=this._getTableHeaderColumns();return t&&t.length>e&&e>=0?t[e]:null},O.prototype._getTableCol=function(e){var t=this._getTableColGroup();if(null!=t){var o=this._getTableElementsByClassName(t,O.CSS_CLASSES._TABLE_COL_CLASS);if(o.length>0)return o[e]}return null},O.prototype._getTableHeaderColumnResizeIndicator=function(){return this._getTableElementByClassName(O.CSS_CLASSES._COLUMN_HEADER_RESIZE_INDICATOR_CLASS,!0)},O.prototype._getTableHeaderColumns=function(){var e=this._getTableHeaderRow();if(null!=e){var t=this._getTableElementsByClassName(e,O.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS);if(t.length>0)return t}return null},O.prototype._getTableHeaderLogicalColumns=function(){var e=this._getTableHeaderColumns();return e?this._getColspanLogicalElements(e):null},O.prototype._getTableHeaderRow=function(){return this._getTableElementByClassName(O.CSS_CLASSES._TABLE_HEADER_ROW_CLASS)},O.prototype._getTableColGroup=function(){return this._getTableElementByClassName(O.CSS_CLASSES._TABLE_COLGROUP_CLASS)},O.prototype._getTableId=function(){if(!this._tableId){var e=this._IsCustomElement()?this._getTableContainer():this._getTable();this._tableId=e.getAttribute(O.DOM_ATTR._ID)}return this._tableId},O.prototype._getTableStatusMessage=function(){return this._getTableElementByClassName(O.CSS_CLASSES._TABLE_STATUS_MESSAGE_CLASS,!0)},O.prototype._getTableUID=function(){if(!this._tableUID){var e=this._getTableId();null==e&&(e=(1e32*Math.random()).toString(36)),this._tableUID=e}return this._tableUID},O.prototype._hashCode=function(e){if(null==e)return 0;"string"!==c.type(e)&&(e=e.toString());var t=0;if(0===e.length)return t;for(var o=e.length,l=0;l<o;l++){t=(t<<5)-t+e.charCodeAt(l),t&=t}return t},O.prototype._insertTableBodyCell=function(e,t,o,l,n,i,s){if(this._setTableBodyCellAttributes(e,t,o,l,n),s)return i.appendChild(n),n;if(0===l)i.insertBefore(n,i.firstChild);else{var a=this._getTableElementsByClassName(i,O.CSS_CLASSES._TABLE_DATA_CELL_CLASS);if(a.length>=l){var r=a[l-1];r.parentNode.insertBefore(n,r.nextSibling)}else i.appendChild(n)}return n},O.prototype._insertTableBodyRow=function(e,t,o,l){if(this._setTableBodyRowAttributes(o,t),null==l){var n=this._getTableBody(),i=this._getTableBodyRows();if(0===e)n.insertBefore(t,n.firstChild);else if(i.length>=e){var s=i[e-1];s.parentNode.insertBefore(t,s.nextSibling)}else this._appendElementToTableBody(t,n)}else l.appendChild(t);this._clearCachedDomRowData()},O.prototype._insertTableFooterCell=function(e,t){var o=this._getTableFooterRow(),l=this._getTableElementsByClassName(o,O.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS);if(this._setTableFooterColumnAttributes(e,t),0===e)o.insertBefore(t,o.firstChild);else if(o.length>=e){var n=l[e-1];n.parentNode.insertBefore(t,n.nextSibling)}else o.appendChild(t);return t},O.prototype._insertTableHeaderColumn=function(e,t){var o=this._getTableHeaderRow(),l=this._getTableHeaderColumns();this._setTableHeaderColumnAttributes(e,t);var n=this._getTableHeaderColumn(e);if(n)c(n).replaceWith(c(t));else if(0!==e&&l&&l.length>=e){var i=l[e-1];i.parentNode.insertBefore(t,i.nextSibling)}else o.appendChild(t)},O.prototype._moveTableBodyRowTouchSelectionAffordanceTop=function(e){var t=this._getTableBodyRowTouchSelectionAffordanceTop();if(null!=t){null!=e?(c(t).data("rowIdx",e),c(t.children[0]).data("rowIdx",e)):e=c(t).data("rowIdx");var o=this._getTableBody(),l=this._getTableBodyRow(e).getBoundingClientRect(),n=this._getTouchAffordanceGlassPane().getBoundingClientRect();t.style[O.CSS_PROP._TOP]=l.top-n.top-t.clientHeight/2+O.CSS_VAL._PX,t.style[O.CSS_PROP._LEFT]=o.clientWidth/2+O.CSS_VAL._PX}},O.prototype._moveTableBodyRowTouchSelectionAffordanceBottom=function(e){var t=this._getTableBodyRowTouchSelectionAffordanceBottom();if(null!=t){null!=e?(c(t).data("rowIdx",e),c(t.children[0]).data("rowIdx",e)):e=c(t).data("rowIdx");var o=this._getTableBody(),l=this._getTableBodyRow(e).getBoundingClientRect(),n=this._getTouchAffordanceGlassPane().getBoundingClientRect();t.style[O.CSS_PROP._TOP]=l.top-n.top+l.height-t.clientHeight/2+O.CSS_VAL._PX,t.style[O.CSS_PROP._LEFT]=o.clientWidth/2+O.CSS_VAL._PX}},O.prototype._moveTableHeaderColumn=function(e,t,o){var l,n,i=[],s=[],a=[],r=null,_=null,d=null,h=null,u=!1;t===this._getColumnDefs().length&&(t-=1,u=!0),r=this._getTableHeaderColumn(t);for(var S=0;S<e.length;S++){var C=e[S];i[S]=this._getTableHeaderColumn(C),s[S]=this._getTableFooterCell(C)}for(var E=0;E<e.length;E++)null!=i[E]&&(h=i[E].getAttribute(O.DOM_ATTR._COLSPAN),null==r||null!=h&&1!==h||(u?(r.parentNode.insertBefore(i[E],r.nextSibling),r=i[E]):r.parentNode.insertBefore(i[E],r))),null!=s[E]&&(h=s[E].getAttribute(O.DOM_ATTR._COLSPAN),null==(_=this._getTableFooterCell(t))||null!=h&&1!==h||(u?(_.parentNode.insertBefore(s[E],_.nextSibling),_=s[E]):_.parentNode.insertBefore(s[E],_)));for(var p=this._getTableBodyRows(),T=0;T<p.length;T++){for(var g=0;g<e.length;g++)a[g]=this._getTableBodyCell(T,e[g],null);d=this._getTableBodyCell(T,t,null);for(var f=0;f<e.length;f++)null!=a[f]&&(h=a[f].getAttribute(O.DOM_ATTR._COLSPAN),null==d||null!=h&&1!==h||(u?(d.parentNode.insertBefore(a[f],d.nextSibling),d=a[f]):d.parentNode.insertBefore(a[f],d)))}for(var m=[],b=this.options.columns.length,A=0;A<b;A++)m[A]=c.extend({},{},this.options.columns[A]);var y=u?t:t-1,L=[],R=[],v=[],D=e.reverse();if(!this._columnsDestMap){this._columnsDestMap=[];for(var I=0;I<m.length;I++)this._columnsDestMap[I]=I}return D.forEach(function(e){e<=y&&(y-=1),L.unshift(m.splice(e,1)[0]),R.unshift(this._columnDefArray.splice(e,1)[0]),v.unshift(this._columnsDestMap.splice(e,1)[0])}.bind(this)),m.splice.apply(m,[y+1,0].concat(L)),(l=this._columnDefArray).splice.apply(l,[y+1,0].concat(R)),(n=this._columnsDestMap).splice.apply(n,[y+1,0].concat(v)),this.option("columns",m,{_context:{writeback:!0,originalEvent:o,internalSet:!0}}),this._queueTask(function(){this._getLayoutManager().notifyTableUpdate(O._UPDATE._COL_REORDER)}.bind(this)),this._columnsDestMap},O.prototype._refreshContextMenu=function(){var e=this._menuContainer;if(e)for(var t=e.querySelectorAll("[data-oj-command]"),o=0;o<t.length;o++){var l=c(t[o]).children(O.DOM_ELEMENT._A);if(0===l.length&&"OJ-OPTION"===t[o].tagName&&(l=c(t[o])),l.length>0){var n,i=t[o].getAttribute("data-oj-command").split("-");"sort"===(i=i[i.length-1])?n=this.getTranslatedString("labelSort"):"sortAsc"===i?n=this.getTranslatedString("labelSortAsc"):"sortDsc"===i?n=this.getTranslatedString("labelSortDsc"):"resize"===i&&(n=this.getTranslatedString("labelResize")),l.contents().filter(function(){return 3===this.nodeType})[0].nodeValue=n}}},O.prototype._removeDragOverIndicatorColumn=function(){for(var e=this._tableQuerySelectorAll(this._getTable(),"."+O.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS+",."+O.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS),t=e.length,o=0;o<t;o++)e[o].classList.remove(O.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS),e[o].classList.remove(O.CSS_CLASSES._COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS)},O.prototype._removeDragOverIndicatorRow=function(){var e,t=this._getTableBody(),o=this._getTableElementsByClassName(t,O.CSS_CLASSES._TABLE_DATA_ROW_DRAG_INDICATOR_CLASS),l=o.length;for(e=0;e<l;e++)c(o[e]).remove();0===this._getTableBodyRows().length&&this._showNoDataMessage()},O.prototype._removeTableBodyRow=function(e,t){var o;null!=(o=null!=t?t:this._getTableBodyRow(e))&&(f.subtreeDetached(o),(this._hasCellTemplate||this._hasRowTemplate)&&this._cleanTemplateNodes(o),c(o).remove(),this._clearCachedDomRowData())},O.prototype._removeAllTableBodyRows=function(){if(this._getTableBodyRows().length>0){var e=this._getTableBody();null!=e&&(f.subtreeDetached(e),(this._hasCellTemplate||this._hasRowTemplate)&&(this._cleanTemplateNodes(e),this._hasCellTemplate=!1,this._hasRowTemplate=!1,this._registerDomEventListeners()),c(e).empty()),this._clearCachedDomRowData()}},O.prototype._removeTableBodyRowTouchSelectionAffordance=function(){for(var e=this._getTableContainer(),t=this._getTableElementsByClassName(e,O.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_TOUCH_AREA_CLASS),o=0;o<t.length;o++)c(t[o]).remove()},O.prototype._removeTableHeaderColumnResizeIndicator=function(){var e=this._getTableHeaderColumnResizeIndicator();e&&(c(e).remove(),this._clearDomCache(O.CSS_CLASSES._COLUMN_HEADER_RESIZE_INDICATOR_CLASS))},O.prototype._setTableBodyCellAttributes=function(e,t,o,l,n){var i=n.getAttribute(O.DOM_ATTR._ID);if(!(null!=i&&i.length>0)){var s=this.options.accessibility,a=this._getColumnDefs()[l];if(null!=a){var r=null,_=this._isTableHeaderless();r=null!=s&&null!=s.rowHeader?s.rowHeader:this._getColumnDefs()[0].id;var d=null!=t?t.toString():e.toString(),h=null==o?this._hashCode(d):o,u=this._getTableId()+":"+r+"_"+h,c=this._getTableId()+":"+a.id;r===a.id?(i=u,_&&(c="")):(i=u+"_"+l,c=_?u:c+" "+u),n.setAttribute(O.DOM_ATTR._ID,i),n.getAttribute(O.DOM_ATTR._HEADERS)||n.setAttribute(O.DOM_ATTR._HEADERS,c)}}},O.prototype._setTableBodyRowAttributes=function(e,t){c(t).data("rowKey",e.key),c(t).data("rowData",e.data),c(t).data("rowMetadata",e.metadata)},O.prototype._setTableHeaderColumnAttributes=function(e,t){var o=this._getColumnDefs()[e];t.getAttribute(O.DOM_ATTR._ID)||t.setAttribute(O.DOM_ATTR._ID,this._getTableId()+":"+o.id)},O.prototype._setTableFooterColumnAttributes=function(e,t){var o=this._getColumnDefs()[e];t.getAttribute(O.DOM_ATTR._ID)||t.setAttribute(O.DOM_ATTR._ID,this._getTableId()+":"+o.id+":ftr")},O.prototype._setTableColumnCellsClass=function(e,t,o){var l,n=this._getTableBodyRows();if(n.length>0)if(null===e){var i=null,s=this._getTableBody();if(null!=(i=t?this._getTableElementsByTagName(s,O.DOM_ELEMENT._TD):this._getTableElementsByClassName(s,o))&&i.length>0){var a=i.length;for(l=0;l<a;l++)t?i[l].classList.add(o):i[l].classList.remove(o)}}else{var r=n.length;for(l=0;l<r;l++){var _=this._getTableBodyCell(l,e,null);t?_.classList.add(o):_.classList.remove(o)}}},O.prototype._setTableBodyMessage=function(e){var t=this._getTableBodyMessageCell();c(t).empty(),t.appendChild(document.createTextNode(e))},O.prototype._styleInitialTable=function(){var e=this._getTable(),t=this._getTableElementsByTagName(e,O.DOM_ELEMENT._THEAD);t=t.length>0?t[0]:null;var o=this._getTableElementsByTagName(e,O.DOM_ELEMENT._TFOOT);o=o.length>0?o[0]:null;var l=this._getTableElementsByTagName(e,O.DOM_ELEMENT._TBODY);if(l=l.length>0?l[0]:null,-1!==parseInt(this._getRootElement().getAttribute(O.DOM_ATTR._TABINDEX),10))e.setAttribute(O.DOM_ATTR._TABINDEX,"0"),this._focusable({element:e,applyHighlight:!0,setupHandlers:this._focusSetupHandlers.bind(this)});else{e.setAttribute(O.DOM_ATTR._TABINDEX,"-1");var n=function(){};this._focusSetupHandlers(n,n)}e.setAttribute(O.DOM_ATTR._ARIA_LABELLEDBY,this._getTableContainer().id),this._styleTableHeader(t),this._styleTableFooter(o),this._styleTableBody(l),this._styleTableContainer(this._getTableContainer())},O.prototype._styleTableBody=function(e){e.classList.add(O.CSS_CLASSES._TABLE_BODY_CLASS),e.setAttribute(f._OJ_CONTAINER_ATTR,this.widgetName)},O.prototype._styleTableBodyCell=function(e,t,o){var l=this._getColumnDefs()[e];!o&&t.classList.contains(O.CSS_CLASSES._TABLE_DATA_CELL_CLASS)||(t.classList.add(O.CSS_CLASSES._TABLE_DATA_CELL_CLASS),t.classList.add(O.CSS_CLASSES._TABLE_DATE_CELL_FORM_CONTROL_CLASS));var n=t.getAttribute(O.DOM_ATTR._STYLE)||{};null==l||null==l.style||!o&&n===l.style||m.applyMergedInlineStyles(t,n,l.style),null==l||null==l.className||!o&&c(t).hasClass(l.className)||c(t).addClass(l.className),!this._isVerticalGridEnabled()||!o&&t.classList.contains(O.CSS_CLASSES._TABLE_VGRID_LINES_CLASS)||t.classList.add(O.CSS_CLASSES._TABLE_VGRID_LINES_CLASS)},O.prototype._styleTableBodyRow=function(e,t){e.setAttribute(E._OJ_CONTEXT_ATTRIBUTE,""),!t&&e.classList.contains(O.CSS_CLASSES._TABLE_DATA_ROW_CLASS)||e.classList.add(O.CSS_CLASSES._TABLE_DATA_ROW_CLASS)},O.prototype._styleTableContainer=function(e){this.options.display===O._OPTION_DISPLAY._GRID?e.classList.add(O.CSS_CLASSES._TABLE_COMPACT_CLASS):e.classList.remove(O.CSS_CLASSES._TABLE_COMPACT_CLASS);var t=this.options.editMode;null!=t&&t!==O._OPTION_EDIT_MODE._NONE?e.classList.add(O.CSS_CLASSES._TABLE_EDIT_CLASS):e.classList.remove(O.CSS_CLASSES._TABLE_EDIT_CLASS),this._isHorizontalGridEnabled()?e.classList.add(O.CSS_CLASSES._TABLE_HGRID_CLASS):e.classList.remove(O.CSS_CLASSES._TABLE_HGRID_CLASS),this._isStickyLayoutEnabled()?e.classList.add(O.CSS_CLASSES._TABLE_STICKY_CLASS):e.classList.remove(O.CSS_CLASSES._TABLE_STICKY_CLASS)},O.prototype._styleTableFooter=function(e){if(e){e.classList.add(O.CSS_CLASSES._TABLE_FOOTER_CLASS);var t=this._getTableElementsByTagName(e,O.DOM_ELEMENT._TR)[0];t.classList.add(O.CSS_CLASSES._TABLE_FOOTER_ROW_CLASS),t.setAttribute(E._OJ_CONTEXT_ATTRIBUTE,"")}},O.prototype._styleTableFooterCell=function(e,t){var o=this._getColumnDefs()[e],l=t.getAttribute(O.DOM_ATTR._STYLE)||{};null!=o.footerStyle&&l!==o.footerStyle&&m.applyMergedInlineStyles(t,l,o.footerStyle),t.classList.contains(O.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS)||t.classList.add(O.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS),this._isVerticalGridEnabled()&&!t.classList.contains(O.CSS_CLASSES._TABLE_VGRID_LINES_CLASS)&&t.classList.add(O.CSS_CLASSES._TABLE_VGRID_LINES_CLASS),o.footerClassName&&c(t).addClass(o.footerClassName)},O.prototype._styleTableHeader=function(e){if(e){e.classList.add(O.CSS_CLASSES._TABLE_HEADER_CLASS),e.style[O.CSS_PROP._DISPLAY]="table-header-group";var t=this._getTableElementsByTagName(e,O.DOM_ELEMENT._TR)[0];t.classList.add(O.CSS_CLASSES._TABLE_HEADER_ROW_CLASS),t.style[O.CSS_PROP._POSITION]=O.CSS_VAL._RELATIVE,t.setAttribute(E._OJ_CONTEXT_ATTRIBUTE,"")}},O.prototype._styleTableHeaderColumn=function(e,t,o){var l=this._getColumnDefs()[e];!o&&t.classList.contains(O.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS)||t.classList.add(O.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS),l.sortable===O._OPTION_ENABLED&&t.classList.add(O.CSS_CLASSES._TABLE_SORT_CLASS),this._isVerticalGridEnabled()&&(!o&&t.classList.contains(O.CSS_CLASSES._TABLE_VGRID_LINES_CLASS)||t.classList.add(O.CSS_CLASSES._TABLE_VGRID_LINES_CLASS));var n=t.getAttribute(O.DOM_ATTR._STYLE)||{};null==l.headerStyle||!o&&n===l.headerStyle||m.applyMergedInlineStyles(t,n,l.headerStyle),null==l.headerClassName||!o&&c(t).hasClass(l.headerClassName)||c(t).addClass(l.headerClassName)},O.prototype._getColspanLogicalElements=function(e){for(var t=0,o=[],l=e.length,n=0;n<l;n++){var i=e[n].getAttribute(O.DOM_ATTR._COLSPAN);if(null!=i){i=parseInt(i,10);for(var s=0;s<i;s++)o[t+s]=e[n];t+=i}else o[t]=e[n],t+=1}return o},O.prototype._isHorizontalGridEnabled=function(){if(this.options.horizontalGridVisible===O._OPTION_ENABLED)return!0;if(this.options.horizontalGridVisible===O._OPTION_AUTO){if(this.options.display===O._OPTION_DISPLAY._GRID)return!0;if("enabled"===this._getDefaultOptions().horizontalGridVisible)return!0}return!1},O.prototype._isVerticalGridEnabled=function(){return this.options.verticalGridVisible===O._OPTION_ENABLED||this.options.verticalGridVisible===O._OPTION_AUTO&&this.options.display===O._OPTION_DISPLAY._GRID},O.prototype._isFF=function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},O.prototype._isIE=function(){if(void 0===this._browserIsIE){var e=navigator.userAgent;if("Microsoft Internet Explorer"===navigator.appName){var t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(e);null!=t&&(this._browserIsIE=parseFloat(t[1]))}else e.indexOf("Trident")>=0?this._browserIsIE=11:this._browserIsIE=null}return this._browserIsIE},O.prototype._isWebkit=function(){if(void 0===this._browserIsWebkit){var e=navigator.userAgent.toLowerCase();this._browserIsWebkit=/webkit/.test(e)&&!/edge/.test(e)}return this._browserIsWebkit},O.prototype._refreshTouchAffordanceGlassPanePosition=function(){var e=this._getTouchAffordanceGlassPane();if(e){var t=this._getLayoutManager().getScroller().getBoundingClientRect(),o=this._getTableContainer().getBoundingClientRect();e.style[O.CSS_PROP._TOP]=t.top-o.top+O.CSS_VAL._PX,e.style[O.CSS_PROP._BOTTOM]=t.bottom-o.bottom+O.CSS_VAL._PX,this._moveTableBodyRowTouchSelectionAffordanceTop(),this._moveTableBodyRowTouchSelectionAffordanceBottom()}},O.prototype._refreshTableStatusPosition=function(e){var t=this._getTableContainer(),o=t.clientHeight,l=this._getTableStatusMessage(),n=0,i=o,s=this._getTableHeader();if(null!=s){var a=s.offsetHeight;n=a,i-=a}var r=this._getTableFooter();null!=r&&(i-=r.offsetHeight);var _=this._getTableBottomSlot();if(null!=_&&(i-=_.offsetHeight),this._isSkeletonSupport()){var d=0,h=this._getDefaultSkeletonDimension();h.width>0&&h.height>0&&(d=Math.max(1,Math.ceil(i/h.height)));for(var u=0;u<d;u++)l.appendChild(this._createSkeletonRow());this._skeletonFadeInEndListener=function(){l.classList.remove("oj-animation-skeleton-fade-in"),l.querySelectorAll(".oj-table-skeleton-row").forEach(function(e){e.classList.add("oj-animation-skeleton")}),l.removeEventListener("animationend",this._skeletonFadeInEndListener)}.bind(this),l.addEventListener("animationend",this._skeletonFadeInEndListener),l.classList.add("oj-animation-skeleton-fade-in")}else i<=40&&(n=0,i=o);if(l.style[O.CSS_PROP._TOP]=n+O.CSS_VAL._PX,l.style[O.CSS_PROP._HEIGHT]=i+O.CSS_VAL._PX,l.style[O.CSS_PROP._WIDTH]=t.clientWidth+O.CSS_VAL._PX,e&&(l.style[O.CSS_PROP._DISPLAY]=O.CSS_VAL._INLINE,this._statusMessageShown=!0),!this._isSkeletonSupport()){var c=l.children[0];c.style[O.CSS_PROP._TOP]=(i-c.offsetHeight)/2+O.CSS_VAL._PX}},O.prototype._createSkeletonRow=function(){var e=document.createElement("div");e.className="oj-table-skeleton-row-container";var t=document.createElement("div");return t.className="oj-table-skeleton-row",e.appendChild(t),e},O.prototype._getDefaultSkeletonDimension=function(){if(null==this._defaultSkeletonDim){var e=this._getTableContainer(),t=this._createSkeletonRow();t.style.visibility="hidden",t.style.display="block",e.appendChild(t);var o={width:t.offsetWidth,height:t.offsetHeight};return e.removeChild(t),o.height>0&&o.width>0&&(this._defaultSkeletonDim=o),o}return this._defaultSkeletonDim},O.prototype._cacheDomElement=function(e,t){this._domCache||(this._domCache={}),this._domCache[e]=t},O.prototype._clearDomCache=function(e){e&&this._domCache?delete this._domCache[e]:this._domCache={}},O.prototype._getCachedDomElement=function(e){return this._domCache?this._domCache[e]:null},O.prototype._isCachedDomElement=function(e){return this._domCache||(this._domCache={}),-1!==Object.keys(this._domCache).indexOf(e)},O.prototype._getTableElementByClassName=function(e,t){if(!this._isCachedDomElement(e)){var o=this._getTableContainer();if(o)if(this._cacheDomElement(e,null),t){if(this._cacheDomElement(e,this._getChildElementByClassName(o,e)),null==this._getCachedDomElement(e)){var l=this._getTable();this._cacheDomElement(e,this._getChildElementByClassName(l,e))}}else{var n=this._getTableElementsByClassName(o,e);n.length>0&&this._cacheDomElement(e,n[0])}}return this._getCachedDomElement(e)},O.prototype._getChildElementByClassName=function(e,t){if(null!=e.childNodes&&e.childNodes.length>0)for(var o=0;o<e.childNodes.length;o++)if(null!=e.childNodes[o].classList&&e.childNodes[o].classList.contains(t))return e.childNodes[o];return null},O.prototype._getTableElementsByClassName=function(e,t,o){var l=e.getElementsByClassName(t);return this._filterTableOwnedElements(l,o?e:null)},O.prototype._getTableElementsByTagName=function(e,t,o){var l=e.getElementsByTagName(t);return this._filterTableOwnedElements(l,o?e:null)},O.prototype._tableQuerySelectorAll=function(e,t,o){var l=e.querySelectorAll(t);return this._filterTableOwnedElements(l,o?e:null)},O.prototype._filterTableOwnedElements=function(e,t){var o,l;if(t){o=t;for(var n=t.getElementsByTagName(O.DOM_ELEMENT._TABLE),i=0;i<n.length;i++)if(n[i].parentNode===t||n[i].parentNode.parentNode===t){l=n[i];break}}else o=this._getTableContainer(),l=this._getTable();return Array.prototype.filter.call(e,function(e){return this._isTableOwned(e,o,l)}.bind(this))},O.prototype._isTableOwned=function(e,t,o){var l=t||this._getTableContainer(),n=t?o:this._getTable();if(l){if(n){var i=this._getFirstAncestor(e,n.tagName);if(i===n)return!0;if(i)return!1}var s=this._getFirstAncestor(e,"."+O.CSS_CLASSES._TABLE_CONTAINER_CLASS);if(s===l)return!0;if(s)return!1;if(!l.contains(e))return!0}return!1},O.prototype._focusSetupHandlers=function(e,t){this._setFocusInHandler(e),this._setFocusOutHandler(t)},O.prototype._getSortIconContainer=function(e){return this._getTableElementsByClassName(e,O.CSS_CLASSES._TABLE_SORT_ICON_CONTAINER_CLASS)[0]},O.prototype._getSortIcon=function(e){var t=this._getSortIconContainer(e);return null!=t?t.firstChild:null},O.prototype._getTableBodySelectorCell=function(e){if(null!=e){var t=this._getTableElementsByClassName(e,O.CSS_CLASSES._TABLE_SELECTOR_CELL);if(t.length>0)return t[0]}return null},O.prototype._getTableSelectorColumn=function(){var e=this._getTableHeaderRow();if(null!=e){var t=this._getTableElementsByClassName(e,O.CSS_CLASSES._COLUMN_HEADER_SELECTOR_CELL_CLASS);if(t.length>0)return t[0]}return null},O.prototype._getTableFooterSelectorCell=function(){var e=this._getTableFooterRow();if(null!=e){var t=this._getTableElementsByClassName(e,O.CSS_CLASSES._TABLE_FOOTER_SELECTOR_CELL_CLASS);if(t.length>0)return t[0]}return null},O.CSS_CLASSES={_TABLE_CONTAINER_CLASS:"oj-table-container",_TABLE_SCROLLER_CLASS:"oj-table-scroller",_TABLE_CLASS:"oj-table",_TABLE_STICKY_CLASS:"oj-table-sticky",_TABLE_STRETCH_CLASS:"oj-table-stretch",_TABLE_COMPACT_CLASS:"oj-table-grid-display",_TABLE_HGRID_CLASS:"oj-table-horizontal-grid",_TABLE_EDIT_CLASS:"oj-table-editable",_TABLE_SCROLL_VERTICAL_CLASS:"oj-table-scroll-vertical",_TABLE_SCROLL_HORIZONTAL_CLASS:"oj-table-scroll-horizontal",_TABLE_SORT_CLASS:"oj-table-sort",_TABLE_ELEMENT_CLASS:"oj-table-element",_TABLE_FOOTER_CLASS:"oj-table-footer",_TABLE_FOOTER_ROW_CLASS:"oj-table-footer-row",_TABLE_HEADER_CLASS:"oj-table-header",_TABLE_HEADER_ROW_CLASS:"oj-table-header-row",_TABLE_HEADER_SELECTOR_CLASS:"oj-table-header-selector",_TABLE_COLGROUP_CLASS:"oj-table-colgroup",_TABLE_COL_SELECTOR_CLASS:"oj-table-col-selector",_TABLE_COL_CLASS:"oj-table-col",_TABLE_BOTTOM_SLOT_CLASS:"oj-table-slot-bottom",_TABLE_SORT_ICON_CONTAINER_CLASS:"oj-table-sort-icon-container",_COLUMN_HEADER_CELL_CLASS:"oj-table-column-header-cell",_COLUMN_HEADER_SELECTOR_CELL_CLASS:"oj-table-column-header-selector-cell",_COLUMN_HEADER_DROP_EMPTY_CELL_CLASS:"oj-table-column-header-drop-empty-cell",_COLUMN_HEADER_CLASS:"oj-table-column-header",_COLUMN_HEADER_TEXT_CLASS:"oj-table-column-header-text",_COLUMN_HEADER_ASC_ICON_CLASS:"oj-table-column-header-asc-icon",_COLUMN_HEADER_DSC_ICON_CLASS:"oj-table-column-header-dsc-icon",_COLUMN_HEADER_DEFAULT_SORT_ICON_CLASS:"oj-table-column-header-default-sort-icon",_COLUMN_HEADER_DRAG_INDICATOR_BEFORE_CLASS:"oj-table-column-header-drag-indicator-before",_COLUMN_HEADER_DRAG_INDICATOR_AFTER_CLASS:"oj-table-column-header-drag-indicator-after",_COLUMN_HEADER_DRAG_IMAGE:"oj-table-column-header-cell-drag-image",_COLUMN_HEADER_RESIZING_CLASS:"oj-table-column-header-resizing",_COLUMN_HEADER_RESIZE_INDICATOR_CLASS:"oj-table-column-header-resize-indicator",_TABLE_BODY_CLASS:"oj-table-body",_TABLE_BUFFER_ROW_CLASS:"oj-table-body-scroll-buffer",_TABLE_DATA_ROW_CLASS:"oj-table-body-row",_TABLE_DATA_ROW_DRAG_INDICATOR_CLASS:"oj-table-body-row-drag-indicator",_TABLE_TOUCH_AFFORDANCE_GLASS_PANE_CLASS:"oj-table-touch-affordance-glass-pane",_TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_TOP_CLASS:"oj-table-body-row-touch-selection-affordance-top",_TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_BOTTOM_CLASS:"oj-table-body-row-touch-selection-affordance-bottom",_TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_TOP_ICON_CLASS:"oj-table-body-row-touch-selection-affordance-top-icon",_TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_BOTTOM_ICON_CLASS:"oj-table-body-row-touch-selection-affordance-bottom-icon",_TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_TOUCH_AREA_CLASS:"oj-table-body-row-touch-selection-affordance-touch-area",_TABLE_DATA_ROW_EDIT_CLASS:"oj-table-body-row-edit",_TABLE_DATA_ROW_SELECTOR_CLASS:"oj-table-body-row-selector",_TABLE_SELECTOR_CELL:"oj-table-selector-cell",_TABLE_DATA_CURRENT_ROW_CLASS:"oj-table-body-current-row",_TABLE_DATA_CELL_CLASS:"oj-table-data-cell",_TABLE_DATA_CELL_EDIT_CLASS:"oj-table-data-cell-edit",_TABLE_DATE_CELL_FORM_CONTROL_CLASS:"oj-form-control-inherit",_TABLE_VGRID_LINES_CLASS:"oj-table-vgrid-lines",_TABLE_FOOTER_CELL_CLASS:"oj-table-footer-cell",_TABLE_FOOTER_SELECTOR_CELL_CLASS:"oj-table-footer-selector-cell",_TABLE_FOOTER_DROP_EMPTY_CELL_CLASS:"oj-table-footer-drop-empty-cell",_TABLE_STATUS_ACC_NOTIFICATION_CLASS:"oj-table-status-acc-notification",_TABLE_STATUS_MESSAGE_CLASS:"oj-table-status-message",_TABLE_STATUS_MESSAGE_TEXT_CLASS:"oj-table-status-message-text",_TABLE_ACC_CONTEXT_INFO_CLASS:"oj-table-acc-context-info",_TABLE_ACC_STATE_INFO_CLASS:"oj-table-acc-state-info",_TABLE_WIDTH_CONTAINER_CLASS:"oj-table-width-container",_TABLE_LOADING_ICON_CLASS:"oj-table-loading-icon",_TABLE_BODY_MESSAGE_CLASS:"oj-table-body-message",_TABLE_BODY_MESSAGE_ROW_CLASS:"oj-table-body-message-row",_TABLE_NO_DATA_CONTAINER_CLASS:"oj-table-no-data-container",_TABLE_NO_DATA_ROW_CLASS:"oj-table-no-data-row",_TABLE_TEMP_SKELETON_ROW_CLASS:"oj-table-temp-skeleton-row",_ICON_CLASS:"oj-icon",_WIDGET_ICON_CLASS:"oj-component-icon",_HIDDEN_CONTENT_ACC_CLASS:"oj-helper-hidden-accessible",_TEXT_ALIGN_END:"oj-helper-text-align-end",_TABLE_LEGACY_SCROLL_CLASS:"oj-table-legacy-scroll"},O.CSS_PROP={_DISPLAY:"display",_VISIBILITY:"visibility",_POSITION:"position",_HEIGHT:"height",_WIDTH:"width",_TOP:"top",_BOTTOM:"bottom",_LEFT:"left",_RIGHT:"right",_PADDING_TOP:"padding-top",_PADDING_LEFT:"padding-left",_PADDING_RIGHT:"padding-right",_OVERFLOW:"overflow",_OVERFLOW_X:"overflow-x",_OVERFLOW_Y:"overflow-y",_MIN_WIDTH:"min-width",_MAX_WIDTH:"max-width",_MIN_HEIGHT:"min-height",_FLOAT:"float",_BORDER_TOP:"border-top",_BORDER_BOTTOM_WIDTH:"border-bottom-width",_BORDER_LEFT_WIDTH:"border-left-width",_BORDER_RIGHT_WIDTH:"border-right-width",_BORDER_COLOR:"border-color",_MARGIN_BOTTOM:"margin-bottom",_VERTICAL_ALIGN:"vertical-align",_CURSOR:"cursor",_ZINDEX:"z-index",_BACKGROUND_COLOR:"background-color",_BOX_SIZING:"box-sizing"},O.CSS_VAL={_NONE:"none",_BLOCK:"block",_INLINE_BLOCK:"inline-block",_RELATIVE:"relative",_ABSOLUTE:"absolute",_INLINE:"inline",_AUTO:"auto",_HIDDEN:"hidden",_SCROLL:"scroll",_VISIBLE:"visible",_LEFT:"left",_PX:"px",_MIDDLE:"middle",_MOVE:"move",_FIXED:"fixed",_TRANSPARENT:"transparent",_BORDER_BOX:"border-box"},O.DOM_ATTR={_STYLE:"style",_TABINDEX:"tabindex",_TYPE:"type",_ID:"id",_TITLE:"title",_HREF:"href",_HEADERS:"headers",_COLSPAN:"colspan",_ROLE:"role",_ARIA_LABEL:"aria-label",_ARIA_LABELLEDBY:"aria-labelledby",_ARIA_HIDDEN:"aria-hidden"},O.DOM_ELEMENT={_DIV:"div",_A:"a",_TR:"tr",_TD:"td",_TH:"th",_TABLE:"table",_TBODY:"tbody",_THEAD:"thead",_TFOOT:"tfoot",_INPUT:"input",_UL:"ul",_SPAN:"span",_BUTTON:"button",_LABEL:"label",_COLGROUP:"colgroup",_COL:"col"},O.MARKER_STYLE_CLASSES={_WIDGET:"oj-component",_ACTIVE:"oj-active",_CLICKABLE_ICON:"oj-clickable-icon-nocontext",_DISABLED:"oj-disabled",_ENABLED:"oj-enabled",_FOCUS:"oj-focus",_FOCUS_HIGHLIGHT:"oj-focus-highlight",_HOVER:"oj-hover",_SELECTED:"oj-selected",_DEFAULT:"oj-default",_WARNING:"oj-warning",_DRAGGABLE:"oj-draggable",_DRAG:"oj-drag",_HIDE_VERTICAL_SCROLLBAR:"oj-table-hide-vertical-scrollbar"},
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
O.prototype._clearOpenPopupListeners=function(){null!=this._openPopup&&(this._openPopup.removeEventListener("focusin",this._handlePopupFocusinListener),this._openPopup.removeEventListener("focusout",this._handlePopupFocusoutListener),this._openPopup=null),this._handlePopupFocusinListener=null,this._handlePopupFocusoutListener=null},O.prototype._handlePopupFocusout=function(e){this._handleFocusout(e,!0)},O.prototype._handlePopupFocusin=function(e){this._handleFocusin(e,!0)},O.prototype._handleFocusout=function(e,t){this._clearFocusoutTimeout();var o=this._getTable();if(!t){this._clearOpenPopupListeners();var l=m.getLogicalChildPopup(o);if(null!=l)return this._openPopup=l,this._handlePopupFocusinListener=this._handlePopupFocusin.bind(this),this._handlePopupFocusoutListener=this._handlePopupFocusout.bind(this),l.addEventListener("focusin",this._handlePopupFocusinListener),void l.addEventListener("focusout",this._handlePopupFocusoutListener)}this._setFocusoutBusyState(),this._focusoutTimeout=setTimeout(function(){this._clearOpenPopupListeners(),this._accFirstFocus=!0,this._focusOutHandler(c(o)),this._focusOutHandler(c(this._getTableContainer())),this._clearKeyboardKeys(),this._clearFocusedHeaderColumn(),this._clearFocusedFooterColumn(),this._clearFocusedRow(!1),this._clearTableHeaderColumnsResize(),this._setTableEditable(!1,!1,0,!0,e,!0),this._focusEditCell&&(this._focusEditCell.classList.remove(O.CSS_CLASSES._TABLE_DATA_CELL_EDIT_CLASS),this._focusEditCell=null),this._setTableActionableMode(!1,!0),this._clearFocusoutBusyState()}.bind(this),100)},O.prototype._handleFocusin=function(e,t){if(this._clearFocusoutTimeout(),this._clearFocusoutBusyState(),!t){this._clearOpenPopupListeners();var o=this._getTable(),l=this._getTableBody(),n=this._getTableContainer();if(this._focusInHandler(c(o)),this._focusInHandler(c(n)),c(l).has(e.target).length>0){var i=this._getFocusedRowIdx(),s=this._getFocusedHeaderColumnIdx();this._isNodeEditable(e.target)||this._isNodeClickable(e.target)||this._isTableActionableMode()||this._hasEditableRow()||this._temporaryTableChildElementFocus||null!=i||null!=s||setTimeout(function(){o.focus()},0)}else this._isFF()&&e.target===l&&setTimeout(function(){o.focus()},0)}},O.prototype._events={focusout:function(e){this._handleFocusout(e)},focus:function(e){this._checkRowOrHeaderColumnFocus(e)},focusin:function(e){this._handleFocusin(e)},"focus .oj-table-data-cell":function(e){var t=this._getEventTargetElement(e);this._getElementRowIdx(t)===this._getEditableRowIdx()&&(this._focusEditCell&&this._focusEditCell!==t&&this._focusEditCell.classList.contains(O.CSS_CLASSES._TABLE_DATA_CELL_EDIT_CLASS)&&this._focusEditCell.classList.remove(O.CSS_CLASSES._TABLE_DATA_CELL_EDIT_CLASS),t.classList.add(O.CSS_CLASSES._TABLE_DATA_CELL_EDIT_CLASS),this._focusEditCell=t)},keydown:function(e){var t=e.key||e.keyCode;this._addKeyboardKey(t);var o=this._getKeyboardKeys()[0];if((m.isEscapeKeyEvent(o)||m.isEnterKeyEvent(o)||m.isF2KeyEvent(o)||m.isTabKeyEvent(o)||!(this._isNodeEditable(e.target)||null!=this._getTableFooter()&&c(this._getTableFooter()).has(e.target).length>0))&&(1===this._getKeyboardKeys().length||2===this._getKeyboardKeys().length&&e[O._KEYBOARD_CODES._MODIFIER_SHIFT])){(this._isKeyPressMatch(m.isArrowUpKeyEvent)||this._isKeyPressMatch(m.isArrowDownKeyEvent)||this._isKeyPressMatch(m.isArrowLeftKeyEvent)||this._isKeyPressMatch(m.isArrowRightKeyEvent)||this._isKeyPressMatch(m.isHomeKeyEvent)||this._isKeyPressMatch(m.isEndKeyEvent))&&(e.preventDefault(),e.stopPropagation());var l=e[O._KEYBOARD_CODES._MODIFIER_SHIFT];this._isKeyPressMatch(m.isArrowUpKeyEvent)||this._isKeyPressMatch(m.isArrowDownKeyEvent)?this._handleKeydownUpDown(e,l&&this._getRowSelectionMode()===O._OPTION_SELECTION_MODES._MULTIPLE):this._isKeyPressMatch(m.isArrowLeftKeyEvent)||this._isKeyPressMatch(m.isArrowRightKeyEvent)?this._handleKeydownLeftRight(e,l&&this._getColumnSelectionMode()===O._OPTION_SELECTION_MODES._MULTIPLE):this._isKeyPressMatch(m.isTabKeyEvent)?this._handleKeydownTab(e):m.isF2KeyEvent(o)?this._handleKeydownF2(e):m.isSpaceBarKeyEvent(o)?this._handleKeydownSpacebar(e):m.isEnterKeyEvent(o)?this._handleKeydownEnter(e):m.isHomeKeyEvent(o)?this._handleKeydownHome(e):m.isEndKeyEvent(o)?this._handleKeydownEnd(e):m.isEscapeKeyEvent(o)&&this._handleKeydownEsc(e)}},keyup:function(e){if(1===this._getKeyboardKeys().length){var t=this._getKeyboardKeys()[0];if(this._isNodeEditable(e.target)||null!=this._getTableFooter()&&c(this._getTableFooter()).has(e.target).length>0)return void this._removeKeyboardKey(t);this._removeKeyboardKey(t)}var o=e.key||e.keyCode;this._removeKeyboardKey(o)},"mouseleave .oj-table-element":function(){this._clearTableHeaderColumnsResize()},"mousedown .oj-table-body":function(e){if(!m.isEventClickthroughDisabled(e,this._getTable())&&1===e.which&&(this._mouseDownRowIdx=this._getElementRowIdx(e.target),null!=this._mouseDownRowIdx)){var t=this._getTableBodyRow(this._mouseDownRowIdx);null!=t&&t.draggable&&(this._mouseDownRowIdx=null)}},mouseup:function(){this._mouseDownRowIdx=null},"mouseenter .oj-table-body-row":function(e){e.originalEvent&&0===e.originalEvent.buttons&&(this._mouseDownRowIdx=null);var t=this._getEventTargetElement(e),o=this._getElementRowIdx(t);this._isTableOwned(t)&&null==this._getTableDndContext()._dragImage?(t.classList.add(O.MARKER_STYLE_CLASSES._HOVER),this._updateRowStateCellsClass(o,{hover:!0}),this._handleMouseEnterSelection(e.target)):(this._updateRowStateCellsClass(o,{hover:!1}),e.stopPropagation())},"mouseleave .oj-table-body-row":function(e){var t=this._getEventTargetElement(e),o=this._getElementRowIdx(t);this._isTableOwned(t)?(t.classList.remove(O.MARKER_STYLE_CLASSES._HOVER),this._updateRowStateCellsClass(o,{hover:!1})):(this._updateRowStateCellsClass(o,{hover:!0}),e.stopPropagation())},"mousedown .oj-table-column-header-cell":function(e){if(!m.isEventClickthroughDisabled(e,this._getTable())&&(this._lastSelectedHeaderIdx=null,1===e.which)){if(!this._handleHeaderColumnResizeStart(e)){var t=this._getElementColumnIdx(this._getEventTargetElement(e));e[O._KEYBOARD_CODES._MODIFIER_SHIFT]||(this._setHeaderColumnFocus(t,!0,!0),c(e.target).data(O._FOCUS_CALLED,!0))}this._isFF()&&S.isMetaKeyPressed(e)&&e.preventDefault()}},"mousedown .oj-table-footer-cell":function(e){if(!m.isEventClickthroughDisabled(e,this._getTable())&&1===e.which){var t=this._getElementColumnIdx(this._getEventTargetElement(e));e[O._KEYBOARD_CODES._MODIFIER_SHIFT]||(this._setFooterColumnFocus(t,!0,!0),c(e.target).data(O._FOCUS_CALLED,!0)),this._isFF()&&S.isMetaKeyPressed(e)&&e.preventDefault()}},"mouseenter .oj-table-column-header-cell":function(e){this._setResizeCursor(e);var t=this._getEventTargetElement(e);this._handleMouseEnterColumnHeader(t)},"mousemove .oj-table-header":function(e){this._setResizeCursor(e)},"mousemove .oj-table-column-header-cell":function(e){var t=this._getEventTargetElement(e);this._setResizeCursor(e)&&this._handleMouseLeaveColumnHeader(t),this._handleMouseEnterColumnHeader(t)},"mouseleave .oj-table-column-header-cell":function(e){var t=this._getEventTargetElement(e);this._handleMouseLeaveColumnHeader(t)},"mouseup .oj-table-column-header-cell":function(e){this._handleHeaderColumnResizeEnd(e)},"mousedown .oj-table-data-cell":function(e){if(!m.isEventClickthroughDisabled(e,this._getTable())){this._lastSelectedRowIdx=null;var t=this._getEventTargetElement(e),o=this._getElementRowIdx(t);e[O._KEYBOARD_CODES._MODIFIER_SHIFT]||(this._setRowFocus(o,!0,!0,t,e),c(e.target).data(O._FOCUS_CALLED,!0)),this._isFF()&&S.isMetaKeyPressed(e)&&e.preventDefault()}},"mouseup .oj-table-data-cell":function(e){this._handleHeaderColumnResizeEnd(e)},"click .oj-table-sort-icon-container":function(e){var t=this._getElementColumnIdx(e.target),o=this._getTableHeaderColumn(t);o&&(c(o).data("sorted")===O._COLUMN_SORT_ORDER._ASCENDING?this._handleSortTableHeaderColumn(t,!1,e):this._handleSortTableHeaderColumn(t,!0,e),e.preventDefault(),e.stopPropagation())},"click .oj-table-body-row":function(e){if(!m.isEventClickthroughDisabled(e,this._getTable())){var t=this._getEventTargetElement(e),o=this._getElementRowIdx(t),l=c(e.target).data(O._FOCUS_CALLED),n=e[O._KEYBOARD_CODES._MODIFIER_SHIFT];if(!l&&(!n||n&&null==this._getFocusedRowIdx())){var i=this._setRowFocus(o,!0,!0,t,e);if(c(e.target).data(O._FOCUS_CALLED,!1),!i)return}if(this._fireActionEvent(o,e),n){var s=this._getFocusedRowIdx();if(null!=s&&(window.getSelection().removeAllRanges(),this._getRowSelectionMode()===O._OPTION_SELECTION_MODES._MULTIPLE))return void this._selectRange(s,o,!0);this._handleSelectionGesture(o,!0,!1)}else if(S.isMetaKeyPressed(e))this._handleSelectionGesture(o,!0,!0),this._lastSelectedRowIdxArray&&this._lastSelectedRowIdxArray.indexOf(o)>-1&&(this._selectionAnchorIdx=o);else if(0===this._getKeyboardKeys().length){var a=this._isTouchDevice();this._handleSelectionGesture(o,!0,a&&this._nonContiguousSelection),this._lastSelectedRowIdxArray&&this._lastSelectedRowIdxArray.indexOf(o)>-1&&(this._selectionAnchorIdx=o);var r=this._getRowSelection(o);a&&r&&!this._nonContiguousSelection&&this._getRowSelectionMode()===O._OPTION_SELECTION_MODES._MULTIPLE&&this._createTableBodyRowTouchSelectionAffordance(o)}}},"dblclick .oj-table-data-cell":function(e){if(!m.isEventClickthroughDisabled(e,this._getTable())){var t=this._getElementColumnIdx(e.target);this._setTableEditable(!0,!1,t,!0,e)}},"contextmenu .oj-table-data-cell":function(e){if(!m.isEventClickthroughDisabled(e,this._getTable())){var t=this._getElementRowIdx(this._getEventTargetElement(e)),o=this._getRowKeyForRowIdx(t);this._setCurrentRow({rowKey:o},e,!1)}},"click .oj-table-column-header-cell":function(e){if(!m.isEventClickthroughDisabled(e,this._getTable())){var t=this._getEventTargetElement(e);if("col-resize"!==t.style.cursor){var o=this._getElementColumnIdx(t),l=c(e.target).data(O._FOCUS_CALLED),n=e[O._KEYBOARD_CODES._MODIFIER_SHIFT];if(l||n&&(!n||null!=this._getFocusedHeaderColumnIdx())||(this._setHeaderColumnFocus(o,!0,!1),c(e.target).data(O._FOCUS_CALLED,!1)),n){var i=this._getFocusedHeaderColumnIdx();null!=i&&this._getColumnSelectionMode()===O._OPTION_SELECTION_MODES._MULTIPLE?this._selectRange(i,o,!1):this._handleSelectionGesture(o,!1,!0)}else S.isMetaKeyPressed(e)?this._handleSelectionGesture(o,!1,!0):0===this._getKeyboardKeys().length&&this._handleSelectionGesture(o,!1,!1)}}},"click .oj-table-footer-cell":function(e){if(!m.isEventClickthroughDisabled(e,this._getTable())){var t=this._getEventTargetElement(e);if("col-resize"!==t.style.cursor){var o=this._getElementColumnIdx(t),l=c(e.target).data(O._FOCUS_CALLED),n=e[O._KEYBOARD_CODES._MODIFIER_SHIFT];if(l||n&&(!n||null!=this._getFocusedFooterColumnIdx())||(this._setFooterColumnFocus(o,!0,!1),c(e.target).data(O._FOCUS_CALLED,!1)),n){var i=this._getFocusedFooterColumnIdx();null!=i&&this._getColumnSelectionMode()===O._OPTION_SELECTION_MODES._MULTIPLE?this._selectRange(i,o,!1):this._handleSelectionGesture(o,!1,!0)}else S.isMetaKeyPressed(e)?this._handleSelectionGesture(o,!1,!0):0===this._getKeyboardKeys().length&&this._handleSelectionGesture(o,!1,!1)}}},"dragstart .oj-table-column-header-cell":function(e){if("col-resize"!==this._getEventTargetElement(e).style.cursor)return this._getTableDndContext().handleColumnDragStart(e)},"dragenter .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDragEnter(e)},"dragover .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDragOver(e)},"dragleave .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDragLeave(e)},"drop .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDrop(e)},"dragend .oj-table-column-header-cell":function(e){return this._getTableDndContext().handleColumnDragEnd(e)},"dragstart .oj-table-body-row":function(e){return this._getTableDndContext().handleRowDragStart(e)},"drag .oj-table-body-row":function(e){return this._getTableDndContext().handleRowDrag(e)},"dragend .oj-table-body-row":function(e){return this._getTableDndContext().handleRowDragEnd(e)},"dragenter .oj-table-body":function(e){return this._getTableDndContext().handleRowDragEnter(e)},"dragover .oj-table-body":function(e){return this._getTableDndContext().handleRowDragOver(e)},"dragleave .oj-table-body":function(e){return this._getTableDndContext().handleRowDragLeave(e)},"drop .oj-table-body":function(e){return this._getTableDndContext().handleRowDrop(e)}},O.prototype._fireActionEvent=function(e,t){if(!this._isTableActionableMode()){var o=this._getTableBodyRow(e);null!=o&&this._trigger("rowAction",t,{context:{key:c(o).data("rowKey"),data:c(o).data("rowData"),metadata:c(o).data("rowMetadata")}})}},O.prototype._getEventTargetElement=function(e){return 0===e.type.indexOf("touch")?this._getTouchEventTargetElement(e):e.currentTarget},O.prototype._getTouchEventTargetElement=function(e){var t=e.originalEvent.changedTouches[0];return document.elementFromPoint(t.clientX,t.clientY)},O.prototype._registerCustomEvents=function(){var e=c.event.special;e.ojtablebeforecurrentrow={handle:function(e){var t=e.handleObj;return t.handler.apply(this,[e,arguments[1]])}},e.ojtablesort={handle:function(e){var t=e.handleObj;return t.handler.apply(this,[e,arguments[1]])}}},O.prototype._touchEventDoubleTapFunction=function(e,t){var o=c(e.target);null!=this._lastTapTime&&(new Date).getTime()-this._lastTapTime<250&&this._lastTapTarget[0]===o[0]?(this._lastTapTime=null,this._lastTapTarget=null,t()):(this._lastTapTarget=o,this._lastTapTime=(new Date).getTime())},O.prototype._registerTouchEvents=function(){var e={"touchstart .oj-table-body-row-touch-selection-affordance-touch-area":function(e){1===e.originalEvent.touches.length&&this._getRowSelectionMode()===O._OPTION_SELECTION_MODES._MULTIPLE&&(e.target.classList.contains(O.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_TOP_CLASS)||e.target.classList.contains(O.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_TOP_ICON_CLASS)?(e.preventDefault(),this._mouseDownRowIdx=c(this._getTableBodyRowTouchSelectionAffordanceBottom()).data("rowIdx")):(e.target.classList.contains(O.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_BOTTOM_CLASS)||e.target.classList.contains(O.CSS_CLASSES._TABLE_DATA_ROW_TOUCH_SELECTION_AFFORDANCE_BOTTOM_ICON_CLASS))&&(e.preventDefault(),this._mouseDownRowIdx=c(this._getTableBodyRowTouchSelectionAffordanceTop()).data("rowIdx")))},"touchstart .oj-table-column-header-cell":function(e){1===e.originalEvent.touches.length&&this._isTableColumnsResizable()&&this._handleHeaderColumnResizeStart(e)&&e.preventDefault()},"touchmove .oj-table-header":function(e){this._isTableColumnsResizable()&&this._setResizeCursor(e)},"touchmove .oj-table-body-row-touch-selection-affordance-touch-area":function(e){if(null!=this._mouseDownRowIdx){e.preventDefault();var t=this._getEventTargetElement(e);this._handleMouseEnterSelection(t,!0)}}},t=this._getTableContainer();if(this._on(c(t),{touchend:function(e){if(null!=this._mouseDownRowIdx){var t=this._getEventTargetElement(e);this._handleMouseEnterSelection(t,!0)}this._mouseDownRowIdx=null,this._handleHeaderColumnResizeEnd(e)&&e.preventDefault()},"touchend .oj-table-body":function(e){this._touchEventDoubleTapFunction(e,function(e){return function(){var t=this._getEventTargetElement(e),o=this._getElementColumnIdx(t);this._setTableEditable(!0,!1,o,!0,e),e.preventDefault()}.bind(this)}.bind(this)(e))},touchcancel:function(){this._mouseDownRowIdx=null,this._clearTableHeaderColumnsResize()}}),this._IsCustomElement()){var o=function(e,t){return function(o){var l=o.currentTarget,n=o.target.closest(e);n&&l.contains(n)&&t(c.Event(o,{currentTarget:n}))}},l=".oj-table-body-row-touch-selection-affordance-touch-area";this._delegatedTouchStartTableBodyListener=o(l,e["".concat("touchstart"," ").concat(l)].bind(this)),this._delegatedTouchStartCellHeaderListener=o(".oj-table-column-header-cell",e["".concat("touchstart"," ").concat(".oj-table-column-header-cell")].bind(this)),this._delegatedTouchMoveTableHeaderListener=o(".oj-table-header",e["".concat("touchmove"," ").concat(".oj-table-header")].bind(this)),this._delegatedTouchMoveTableBodyListener=o(l,e["".concat("touchmove"," ").concat(l)].bind(this)),t.addEventListener("touchstart",this._delegatedTouchStartTableBodyListener,{passive:!1}),t.addEventListener("touchstart",this._delegatedTouchStartCellHeaderListener,{passive:!1}),t.addEventListener("touchmove",this._delegatedTouchMoveTableHeaderListener,{passive:!0}),t.addEventListener("touchmove",this._delegatedTouchMoveTableBodyListener,{passive:!1})}else this._on(c(t),e)},
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
O.prototype._checkRowOrHeaderColumnFocus=function(e){var t=this._getFocusedRowIdx(),o=this._getFocusedHeaderColumnIdx();if(null==t&&null==o){var l=null,n=this._getCurrentRow(),i=null!=n?n.rowKey:null;if(null!=i&&(l=this._getRowIdxForRowKey(i)),null==l)if(this._isTableHeaderless())this._setRowFocus(0,!0,!0,null,e);else{var s=this._getFirstVisibleColumnIndex(0,!0);this._setHeaderColumnFocus(s,!0,!1)}else this._setRowFocus(l,!0,!0,null,e)}},O.prototype._clearFocusedRow=function(e){null!=this._getFocusedRowIdx()&&this._setRowFocus(-1,!0,e,null,null)},O.prototype._clearFocusedHeaderColumn=function(){var e=this._getFocusedHeaderColumnIdx();null!=e&&this._setHeaderColumnFocus(e,!1,!1),this._activeHeaderIndex=-1},O.prototype._clearFocusedFooterColumn=function(){var e=this._getFocusedFooterColumnIdx();null!=e&&this._setFooterColumnFocus(e,!1,!1),this._activeFooterIndex=-1},O.prototype._getFirstVisibleColumnIndex=function(e,t){var o;if(this._isTableHeaderless()){if(this._isTableFooterless())return null;o=this._getTableFooterCell.bind(this)}else o=this._getTableHeaderColumn.bind(this);var l,n=this._getColumnDefs().length,i=e;if(t)for(;i<n;){if((l=o(i))&&l.clientWidth>0)return i;i+=1}else for(;i>-1;){if((l=o(i))&&l.clientWidth>0)return i;i-=1}return null},O.prototype._getNextVisibleColumnIndex=function(e,t){var o;o=t?e+1:e-1;var l=this._getFirstVisibleColumnIndex(o,t);return null!==l?l:e},O.prototype._getCurrentRow=function(){return this._getData()?this._currentRow:null},O.prototype._getFocusedRowIdx=function(){return this._getRowIdxsForElementsWithStyleClass("."+O.CSS_CLASSES._TABLE_DATA_ROW_CLASS+"."+O.MARKER_STYLE_CLASSES._FOCUS_HIGHLIGHT+",."+O.CSS_CLASSES._TABLE_DATA_ROW_CLASS+"."+O.MARKER_STYLE_CLASSES._FOCUS)[0]},O.prototype._getFocusedHeaderColumnIdx=function(){return this._getColumnIdxsForElementsWithStyleClass("."+O.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS+"."+O.MARKER_STYLE_CLASSES._FOCUS_HIGHLIGHT+",."+O.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS+"."+O.MARKER_STYLE_CLASSES._FOCUS+",."+O.CSS_CLASSES._COLUMN_HEADER_SELECTOR_CELL_CLASS+"."+O.MARKER_STYLE_CLASSES._FOCUS_HIGHLIGHT+",."+O.CSS_CLASSES._COLUMN_HEADER_SELECTOR_CELL_CLASS+"."+O.MARKER_STYLE_CLASSES._FOCUS)[0]},O.prototype._getFocusedFooterColumnIdx=function(){return this._getColumnIdxsForElementsWithStyleClass("."+O.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS+"."+O.MARKER_STYLE_CLASSES._FOCUS_HIGHLIGHT+",."+O.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS+"."+O.MARKER_STYLE_CLASSES._FOCUS+",."+O.CSS_CLASSES._TABLE_FOOTER_SELECTOR_CELL_CLASS+"."+O.MARKER_STYLE_CLASSES._FOCUS_HIGHLIGHT+",."+O.CSS_CLASSES._TABLE_FOOTER_SELECTOR_CELL_CLASS+"."+O.MARKER_STYLE_CLASSES._FOCUS)[0]},O.prototype._scrollRowIntoViewport=function(e){var t=this._getLayoutManager(),o=this._getTableBodyRow(e),l=c(t.getScroller()),n=t.getRowTopOverflowDiff(o),i=n>=0,s=t.getRowBottomOverflowDiff(o),a=s>=0;i&&a||(a?Math.abs(n)>Math.abs(s)?l.scrollTop(l.scrollTop()+s):l.scrollTop(l.scrollTop()-n):i&&(Math.abs(s)>Math.abs(n)?l.scrollTop(l.scrollTop()-n):l.scrollTop(l.scrollTop()+s)))},O.prototype._scrollColumnIntoViewport=function(e){var t;if(t=-1===e?this._getTableSelectorColumn():this._getTableHeaderColumn(e)){var o,l,n,i,s=this._getLayoutManager(),a="rtl"===this._GetReadingDirection(),r=s.getScroller(),_=c(r),d=s.getScrollBarWidth(),h=t.getBoundingClientRect(),S=r.getBoundingClientRect();if(a){l=(o=S.left-h.left+d)>=0,i=(n=h.right-S.right)>=0;var C=u.AgentUtils.getAgentInfo().browser;C!==u.AgentUtils.BROWSER.IE&&C!==u.AgentUtils.BROWSER.EDGE||(o*=-1,n*=-1)}else l=(o=S.left-h.left)>=0,i=(n=h.right-S.right+d)>=0;l&&i||(l?Math.abs(n)>Math.abs(o)?_.scrollLeft(_.scrollLeft()-o):_.scrollLeft(_.scrollLeft()+n):i&&(Math.abs(o)>Math.abs(n)?_.scrollLeft(_.scrollLeft()+n):_.scrollLeft(_.scrollLeft()-o)))}},O.prototype._setCurrentRow=function(e,t,o){var l,n,i,s,a=this._currentRow,r=null==e||null==e.rowKey&&null==e.rowIndex;if(r)i=-1,s=null!=e?e:null;else{var _=this._getData(),d=e.rowIndex,h=e.rowKey;if(null==h&&(h=this._getRowKeyForDataSourceRowIndex(d)),s={rowIndex:d=this._getDataSourceRowIndexForRowKey(h),rowKey:h},-1!==(i=this._getRowIdxForRowKey(h))&&(!_||i<-1||null===i||null===h)){if(l=O._LOGGER_MSG._ERR_CURRENTROW_UNAVAILABLE_INDEX_SUMMARY,n=T.applyParameters(O._LOGGER_MSG._ERR_CURRENTROW_UNAVAILABLE_INDEX_DETAIL,{rowIdx:i}),o)throw new Error(l+"\n"+n);return C.info(l+"\n"+n),O._CURRENT_ROW_STATUS._IGNORED}}var u=this._getFocusedRowIdx(),c=!this._compareCurrentRowValues(a,s);if(c){var S;try{S=this._trigger("beforeCurrentRow",t,{currentRow:s,previousCurrentRow:a})}catch(e){return l=O._LOGGER_MSG._ERR_PRECURRENTROW_ERROR_SUMMARY,n=T.applyParameters(O._LOGGER_MSG._ERR_PRECURRENTROW_ERROR_DETAIL,{error:e.toString()}),C.info(l+"\n"+n),O._CURRENT_ROW_STATUS._ERROR}if(!S)return O._CURRENT_ROW_STATUS._VETOED;if(!(null==a||null==a.rowKey&&null==a.rowIndex)){var E=a.rowIndex,p=this._getRowKeyForDataSourceRowIndex(E),g=this._getRowIdxForRowKey(p);if(!1===this._setTableEditable(!1,!1,0,!0,t)){this._currentRow=a;var f=document.activeElement,m=this._getElementColumnIdx(f);return this._queueTask(function(){var e=g,t=m;null!=e&&null!=t?setTimeout(function(){this._setCellFocus(e,t)}.bind(this),0):null!=e&&setTimeout(function(){this._setRowFocus(e,!0,!1)}.bind(this),0)}.bind(this)),O._CURRENT_ROW_STATUS._IGNORED}var b=this._getTableBodyRow(g);null!=b&&b.classList.remove(O.CSS_CLASSES._TABLE_DATA_CURRENT_ROW_CLASS)}if(this._currentRow=s,this.option("currentRow",this._currentRow,{_context:{writeback:!0,originalEvent:t,internalSet:!0}}),!r){var A=this._getTableBodyRow(i);null!=A&&A.classList.add(O.CSS_CLASSES._TABLE_DATA_CURRENT_ROW_CLASS)}}return!c&&u===i||null!=t||this._setRowFocus(i,!0,!1),O._CURRENT_ROW_STATUS._UPDATED},O.prototype._compareCurrentRowValues=function(e,t){if(e===t)return!0;if(null!=e&&null!=t){if(e.rowIndex===t.rowIndex&&u.KeyUtils.equals(e.rowKey,t.rowKey))return!0}else if(null==e&&null==t)return!0;return!1},O.prototype._setCellFocus=function(e,t){var o=this._getTableBodyCell(e,t);if(o){var l=m.getFocusableElementsInNode(o);if(l.length>0)return l[0].focus(),!0}return!1},O.prototype._setCellInRowFocus=function(e,t,o){if(!this._setCellFocus(e,t))for(var l=this._getTableBodyCells(e).length,n=0;n<l;n++){var i=n;if(o||(i=l-n-1),this._setCellFocus(e,i))return}},O.prototype._setFocusInHandler=function(e){this._focusInHandler=e},O.prototype._setFocusOutHandler=function(e){this._focusOutHandler=e},O.prototype._setRowFocus=function(e,t,o,l,n){var i;if(-1===e)return(!o||this._setCurrentRow(null,n,!1)===O._CURRENT_ROW_STATUS._UPDATED)&&(null!=(i=this._getFocusedRowIdx())&&this._setRowFocus(i,!1,o,null,null),!0);var s=this._getTableBodyRow(e);if(!s)return!1;if(t){if(o){var a=this._getRowKeyForRowIdx(e);if(this._setCurrentRow({rowKey:a},n,!1)!==O._CURRENT_ROW_STATUS._UPDATED)return!1;null==this._accColumnIndex&&(this._accColumnIndex=0),this._updateAccStatusInfo(e,this._accColumnIndex)}null!=(i=this._getFocusedRowIdx())&&i!==e&&this._setRowFocus(i,!1,o,l,null),this._focusInHandler(c(s)),this._scrollRowIntoViewport(e),this._updateRowStateCellsClass(e,{focused:!0}),this._clearFocusedHeaderColumn(),this._clearFocusedFooterColumn(),this._setTableActionableMode(!1)}else this._focusOutHandler(c(s)),this._updateRowStateCellsClass(e,{focused:!1});return!0},O.prototype._setHeaderColumnFocus=function(e,t,o){if(!this._isTableHeaderless()&&null!=e){if(t){this._clearFocusedFooterColumn(),this._clearFocusedRow(!0);var l=this._getFocusedHeaderColumnIdx();null!==l&&l!==e&&this._setHeaderColumnFocus(l,!1,o),o||this._scrollColumnIntoViewport(e),this._activeHeaderIndex=e,this._updateAccStatusInfo(null,null,e)}this._setHeaderColumnState(e,{focused:t})}},O.prototype._setFooterColumnFocus=function(e,t,o){if(!this._isTableFooterless()&&null!=e){if(t){this._clearFocusedRow(!0),this._clearFocusedHeaderColumn();var l=this._getFocusedFooterColumnIdx();null!==l&&l!==e&&this._setFooterColumnFocus(l,!1,o),o||this._scrollColumnIntoViewport(e),this._activeFooterIndex=e,this._updateAccStatusInfo(null,null,null,e)}this._setFooterColumnState(e,{focused:t})}},O.prototype._setHeaderColumnState=function(e,t){var o;(o=-1===e?this._getTableSelectorColumn():this._getTableHeaderColumn(e))&&this._applyHeaderColumnState(o,e,t)},O.prototype._setFooterColumnState=function(e,t){var o;(o=-1===e?this._getTableFooterSelectorCell():this._getTableFooterCell(e))&&this._applyFooterColumnState(o,e,t)},O.prototype._applyHeaderColumnState=function(e,t,o){var l=o.focused,n=o.selected;if(null!=l&&(l?(this._focusInHandler(c(e)),t>-1&&this._showTableHeaderColumnSortIcon(t)):(this._focusOutHandler(c(e)),t>-1&&this._hideTableHeaderColumnSortIcon(t))),t>-1&&null!=n){var i=this._getTableFooterCell(t);n?(e.classList.add(O.MARKER_STYLE_CLASSES._SELECTED),null!=i&&i.classList.add(O.MARKER_STYLE_CLASSES._SELECTED)):(e.classList.remove(O.MARKER_STYLE_CLASSES._SELECTED),null!=i&&i.classList.remove(O.MARKER_STYLE_CLASSES._SELECTED)),this._updateColumnStateCellsClass(t,n)}},O.prototype._applyFooterColumnState=function(e,t,o){var l=o.focused,n=o.selected;if(null!=l&&(l?this._focusInHandler(c(e)):this._focusOutHandler(c(e))),t>-1&&null!=n){var i=this._getTableHeaderColumn(t);n?(null!=i&&i.classList.add(O.MARKER_STYLE_CLASSES._SELECTED),e.classList.add(O.MARKER_STYLE_CLASSES._SELECTED)):(null!=i&&i.classList.remove(O.MARKER_STYLE_CLASSES._SELECTED),e.classList.remove(O.MARKER_STYLE_CLASSES._SELECTED)),this._updateColumnStateCellsClass(t,n)}},O.prototype._updateColumnStateCellsClass=function(e,t){for(var o=this._getSelectedRowIdxs(),l=this._getTableBodyRows(),n=0;n<l.length;n++){var i=this._getTableBodyCell(n,e);if(i)if(t)i.classList.add(O.MARKER_STYLE_CLASSES._SELECTED);else{for(var s=!1,a=o.length,r=0;r<a;r++)if(n===o[r]){s=!0;break}s||i.classList.remove(O.MARKER_STYLE_CLASSES._SELECTED)}}},O.prototype._updateRowStateCellsClass=function(e,t){var o=this._getTableBodyCells(e);if(0!==o.length){if(this._isDefaultSelectorEnabled()){var l=this._getTableBodyRow(e),n=this._getTableBodySelectorCell(l);o.unshift(n)}var i,s=t.focused,a=t.selected,r=t.hover,_=o.length;if(null!=r)for(i=0;i<_;i++)r?o[i].classList.add(O.MARKER_STYLE_CLASSES._HOVER):o[i].classList.remove(O.MARKER_STYLE_CLASSES._HOVER);if(null!=s)for(i=0;i<_;i++)s?this._focusInHandler(c(o[i])):this._focusOutHandler(c(o[i]));if(null!=a)for(i=0;i<_;i++)a?o[i].classList.add(O.MARKER_STYLE_CLASSES._SELECTED):o[i].classList.remove(O.MARKER_STYLE_CLASSES._SELECTED)}},O.prototype._adjustScrollPositionOnFetch=function(){var e=null==this.options.scrollPosition?{}:this.options.scrollPosition;if(!isNaN(e.rowIndex)&&void 0!==e.rowKey){var t=this._getSelectedRowIdxs();null!=t&&t.length>0&&this._isRowSelectionEnabled()&&this._isScrollToKey()?(!isNaN(this._selectionAnchorIdx)&&t.indexOf(this._selectionAnchorIdx)>-1?e.rowKey=this._getRowKeyForRowIdx(this._selectionAnchorIdx):e.rowKey=this._getRowKeyForRowIdx(t[0]),delete e.rowIndex):(e.y=0,e.rowIndex=0,delete e.rowKey),e.x=0,e.columnKey=null,e.columnIndex=0,e.offsetX=0,e.offsetY=0,this.option("scrollPosition",e,{_context:{internalSet:!0},changed:!1})}},O.prototype._isScrollPositionAdjusted=function(){var e=this.options.scrollPosition;return null!=e&&(void 0===e.rowIndex&&null!=e.rowKey)},O.prototype._findRowElementByKey=function(e){for(var t=this._getTableBodyRows(),o=0;o<t.length;o++)if(u.KeyUtils.equals(c(t[o]).data("rowKey"),e))return t[o];return null},O.prototype._isScrollToKey=function(){var e=this.options.scrollToKey;if("never"===e)return!1;if("always"===e)return!0;var t=this.options.data;if(!u.DataProviderFeatureChecker.isDataProvider(t))return!0;if(t.getCapability){var o=t.getCapability("fetchFirst");if(o&&"immediate"===o.iterationSpeed)return!0}return!1},O.prototype._getScrollToKey=function(){var e=this.options.scrollPosition.rowKey;return e?new Promise(function(t){var o=this._validateKeyForScroll(e,!0);null==o?t(null):o.then(function(o){t(o?e:null)})}.bind(this)):Promise.resolve(null)},O.prototype._validateKeyForScroll=function(e,t){if(!this._isScrollToKey())return null;if(!t&&null!=this._findRowElementByKey(e))return Promise.resolve(!0);var o=this._getData();return o.containsKeys?new Promise(function(t){var l=new Set;l.add(e),o.containsKeys({keys:l}).then(function(e){t(e.results.size>0)},function(){t(!1)})}):null},O.prototype._syncScrollPosition=function(e,t){if(!this._IsCustomElement()||this._noDataMessageShown||!this._isScrollableX()&&!this._isScrollableY())return!0;if(null!=this._scrollPosition?e=this._scrollPosition:null==e&&(e=this.options.scrollPosition),!t&&null!=e.rowKey){var o=this._validateKeyForScroll(e.rowKey,!1);if(o){var l=this._createComponentBusyState("is validating scroll position rowKey.");o.then(function(t){t||delete e.rowKey,this._clearComponentBusyState(l),this._syncScrollPosition(e,!0)}.bind(this))}return!1}var n=this._getScrollCoordinates(e),i=n.x,s=n.y;if(isNaN(i)&&isNaN(s))return null!=this._scrollPosition&&(this.option("scrollPosition",this._getCurrentScrollPosition(),{_context:{originalEvent:null,internalSet:!0}}),this._scrollPosition=null),this._editRowCallback=null,!0;var a=isNaN(this._scrollTop)?0:this._scrollTop,r=isNaN(this._scrollLeft)?0:this._scrollLeft;if(!isNaN(i)&&isNaN(s)||!isNaN(i)&&s===a&&i!==r){if(!this._isScrollableX())return!0;this._setScrollX(i);var _=this.options.scrollPosition,d=this._getCurrentHorizontalScrollPosition(i);d.y=_.y,d.rowIndex=_.rowIndex,d.rowKey=_.rowKey,d.offsetY=_.offsetY,this.option("scrollPosition",d,{_context:{originalEvent:null,internalSet:!0}})}else if(s!==a){if(!this._isScrollableY())return!(!isNaN(i)&&i!==r)||(delete e.y,this._syncScrollPosition(e,t));var h=this._setScrollY(s);if(isNaN(i)||i===r||this._setScrollX(i),-1===s)return this._scrollPosition=e,h;this.option("scrollPosition",this._getCurrentScrollPosition(i,s),{_context:{originalEvent:null,internalSet:!0}})}else e&&(null==e.rowKey||isNaN(e.rowIndex))&&this.option("scrollPosition",this._getCurrentScrollPosition(i,s),{_context:{originalEvent:null,internalSet:!0}});return null!=this._scrollPosition&&(this._scrollPosition=null),this._editRowCallback&&(this._editRowCallback(),this._editRowCallback=null),!0},O.prototype._isScrollableX=function(){var e=this._getLayoutManager();return Math.abs(e.getScrollWidth()-e.getClientWidth())>1},O.prototype._isScrollableY=function(){var e=this._getLayoutManager();return Math.abs(e.getScrollHeight()-e.getClientHeight())>1},O.prototype._setScrollX=function(e){var t=this._getLayoutManager().getScroller();this._skipScrollUpdate=!0,S.setScrollLeft(t,e)},O.prototype._setScrollY=function(e){var t=this._getLayoutManager(),o=t.getScroller();this._skipScrollUpdate=!0;var l=o.scrollTop;return o.scrollTop=-1===e?t.getScrollHeight()-t.getClientHeight():e,l!==o.scrollTop&&(this._setScrollPosBusyState(),!0)},O.prototype._getScrollTopByIndex=function(e){if(0===e)return 0;if(!(this._isLoadMoreOnScroll()&&e>this.options.scrollPolicyOptions.maxCount)){var t=this._getTableBodyRows()[e];return null!=t?this._getLayoutManager().getRowScrollTop(t):this._hasMoreToFetch()?-1:void 0}},O.prototype._getScrollTopByKey=function(e){var t=this._findRowElementByKey(e);return null!=t?this._getLayoutManager().getRowScrollTop(t):this._hasMoreToFetch()?-1:void 0},O.prototype._getScrollLeftByIndex=function(e){if(0===e)return 0;var t=this._getTableHeaderColumn(e);return null!=t?t.offsetLeft:void 0},O.prototype._getScrollLeftByKey=function(e){var t=this._getColumnIdxForColumnKey(e);return this._getScrollLeftByIndex(t)},O.prototype._getScrollCoordinates=function(e){var t,o,l=e.rowKey;isNaN(t)&&null!=l&&(t=this._getScrollTopByKey(l));var n=e.columnKey;isNaN(o)&&null!=n&&(o=this._getScrollLeftByKey(n));var i=e.rowIndex;isNaN(t)&&!isNaN(i)&&(t=this._getScrollTopByIndex(i));var s=e.columnIndex;isNaN(o)&&!isNaN(s)&&(o=this._getScrollLeftByIndex(s));var a=e.offsetX;!isNaN(o)&&!isNaN(a)&&o>=0&&(o+=a);var r=e.offsetY;if(!isNaN(t)&&!isNaN(r)&&t>=0&&(t+=r),isNaN(o)&&!isNaN(e.x)&&(o=Math.max(0,e.x)),isNaN(t)&&!isNaN(e.y)){var _=this._getLayoutManager();t=e.y>_.getScrollHeight()?this._hasMoreToFetch()?-1:_.getScrollHeight()-_.getClientHeight():Math.max(0,e.y)}return{x:o,y:t}},O.prototype._getCurrentHorizontalScrollPosition=function(e){var t={};t.x=void 0===e?this._scrollLeft:e;var o=this.option("scrollPosition"),l=Math.abs(o.x-t.x);if(l<1&&null!=o.columnKey&&!isNaN(o.columnIndex))return t.columnKey=o.columnKey,t.columnIndex=o.columnIndex,t.offsetX=o.offsetX+l,t;var n=this._getColumnLocations();if(n&&n.length>0){var i,s=n.length-1;for(i=0;i<n.length-1;i++)if(t.x>=n[i]&&t.x<n[i+1]){s=i;break}t.columnKey=this._getColumnDefs()[s].id,t.columnIndex=s,t.offsetX=t.x-n[s]}return t},O.prototype._getCurrentVerticalScrollPosition=function(e){var t={};t.y=void 0===e?this._scrollTop:e;var o=this._getTableBody();if(isNaN(this._rowHeight)&&o.rows.length>1&&(this._rowHeight=o.rows[1].offsetHeight),!isNaN(this._rowHeight)&&this._rowHeight>0){var l=this._findClosestElementToTop(t,e);null!=l&&(t.rowIndex=l.index,t.rowKey=this._getRowKeyForRowIdx(l.index),t.offsetY=l.offset)}return t},O.prototype._getCurrentScrollPosition=function(e,t){var o=this._getCurrentHorizontalScrollPosition(e),l=this._getCurrentVerticalScrollPosition(t);return Object.keys(l).forEach(function(e){o[e]=l[e]}),o},O.prototype._getColumnLocations=function(){if(null==this._columnOffsets){this._columnOffsets=[];var e=this._getTableHeaderColumns();if(e&&e.length>0){var t;t=e[0].offsetLeft,this._columnOffsets.push(0);for(var o=1;o<e.length;o++)this._columnOffsets.push(e[o].offsetLeft-t)}}return this._columnOffsets},O.prototype._findClosestElementToTop=function(e,t){var o,l=this._getLayoutManager(),n=this._getTableBodyRows();if(0===n.length)return null;var i=this.option("scrollPosition");Math.abs(i.y-t)<this._rowHeight&&null!=i.rowKey&&!isNaN(i.rowIndex)&&(o=i.rowIndex),isNaN(o)&&(o=Math.floor(e.y/this._rowHeight));var s=n[o=Math.min(Math.max(o,0),n.length-1)],a=l.getRowScrollTop(s),r=e.y,_=r-a,d={index:o,elem:s,offsetTop:a,offset:_};if(Math.abs(_)<1)return d;var h=_>0;h?o+=1:o-=1;for(var u=!1;!u&&o>=0&&o<n.length;){var c=a;if(s=n[o],a=l.getRowScrollTop(s),u=(_=Math.abs(r-a))<1||(h?r<=a:r>=a)){d=_<1||!h?{index:o,elem:s,offsetTop:a,offset:_}:{index:o-1,elem:n[o-1],offsetTop:c,offset:r-c};break}h?o+=1:o-=1}return d},O.prototype._registerDomEventListeners=function(){this._getLayoutManager().registerScrollListeners()},O.prototype._isTableActionableMode=function(){return this._tableActionableMode},O.prototype._isTableEditMode=function(){return this.options.editMode===O._OPTION_EDIT_MODE._ROW_EDIT},O.prototype._toggleTableActionableMode=function(){this._isTableActionableMode()?this._setTableActionableMode(!1):this._setTableActionableMode(!0)},O.prototype._setTableActionableMode=function(e,t){if(!(null!=this._tableActionableMode&&this._tableActionableMode===e||null==this._tableActionableMode&&!1===e))if(e){var o=null,l=null,n=this._getFocusedRowIdx();if(null!=n&&(l=o=this._getTableBodyRow(n)),null==o){var i=this._getFocusedHeaderColumnIdx();null!=i&&(o=this._getTableHeaderColumn(i),l=this._getTableHeaderRow())}if(null!=o){m.enableAllFocusableElements(l);var s=this._getTabbableElements(o);null!=s&&s.length>0&&(this._tableActionableMode=e,this._tableActionableElement=o,this._tableActionableBoundaryElement=l,this._focusOutHandler(c(o)),s[0].focus())}}else{this._tableActionableMode=!1;var a=c.contains(this._getTableBody(),document.activeElement);null!=this._tableActionableElement&&m.disableAllFocusableElements(this._tableActionableBoundaryElement),a&&!t&&(this._getTable().focus(),this._focusInHandler(c(this._tableActionableElement))),this._tableActionableElement=null,this._tableActionableBoundaryElement=null}},O.prototype._getEditableRowIdx=function(){if(null!=this._getEditableRowKey()){var e=this._getRowIdxForRowKey(this._getEditableRowKey());if(null!==e)return e}return this._editableRowIdx},O.prototype._getEditableRowKey=function(){return this._editableRowKey},O.prototype._hasEditableRow=function(){return!!this._isTableEditMode()&&null!==this._getEditableRowIdx()},O.prototype._setEditRow=function(e){if(this._isTableEditMode()){var t=e.rowKey,o=e.rowIndex;if(null!=t||o>-1){var l=this._setCurrentRow({rowKey:t,rowIndex:o},null,!1);if(l===O._CURRENT_ROW_STATUS._UPDATED)this._setTableEditable(!0,!1,0,!0,null);else if(l===O._CURRENT_ROW_STATUS._IGNORED){var n=this._scrollTop;this._syncScrollPosition({rowKey:t,rowIndex:o})||(this._editRowCallback=function(){this._scrollTop!==n&&this._setEditRow(e)}.bind(this))}}else this._setTableEditable(!1,!1,0,!0,null)}},O.prototype._setEditableRowIdx=function(e){this._editableRowKey=this._getRowKeyForRowIdx(e),this._editableRowIdx=e},O.prototype._setNextRowEditable=function(e,t){var o=this._getTableBodyRows().length,l=this._getEditableRowIdx();l>=0&&l<o-1?!1===this._setTableEditable(!1,!1,e,!0,t)?this._queueTask(function(){setTimeout(function(){this._setCellFocus(l,e)}.bind(this),0)}.bind(this)):(this._setCurrentRow({rowIndex:l+1},t,!1),this._setTableEditable(!0,!1,e,!0,t)):l===o-1&&(this._setTableEditable(!1,!1,e,!0,t),this._getTable().focus())},O.prototype._setPreviousRowEditable=function(e,t){var o=this._getEditableRowIdx();o>=1?!1===this._setTableEditable(!1,!1,e,!1,t)?this._queueTask(function(){setTimeout(function(){this._setCellFocus(o,e)}.bind(this),0)}.bind(this)):(this._setCurrentRow({rowIndex:o-1},t,!1),this._setTableEditable(!0,!1,e,!1,t)):0===o&&(this._setTableEditable(!1,!1,e,!1,t),this._getTable().focus())},O.prototype._fireEditRowChangeEvent=function(e,t){this._queueTask(function(){this.option("editRow",e,{_context:{originalEvent:t,internalSet:!0,writeback:!0}})}.bind(this))},O.prototype._setTableEditable=function(e,t,o,l,n,i){if(this._isTableEditMode()){var s=this._getCurrentRow();if(null!=s){var a,r,_,d,h=s.rowKey,u=this._getRowIdxForRowKey(h);try{if(e&&!this._hasEditableRow())a=this._getTableBodyRow(u),(r=this._getRendererContextObject(a,{row:{key:h,index:s.rowIndex},isCurrentRow:!0})).item=a["oj-table-oj-row-item"],(_=this._trigger("beforeRowEdit",n,{rowContext:r}))&&(d={rowKey:h,rowIndex:u});else{if(e||!this._hasEditableRow())return;a=this._getTableBodyRow(this._getEditableRowIdx()),h=this._getRowKeyForRowIdx(this._getEditableRowIdx()),(r=this._getRendererContextObject(a,{row:{key:h,index:this._getDataSourceRowIndexForRowKey(h)},isCurrentRow:!0})).item=a["oj-table-oj-row-item"],(_=this._trigger("beforeRowEditEnd",n,{rowContext:r,cancelEdit:t}))&&(d={rowKey:null,rowIndex:-1})}}catch(e){return!1}if(!_)return!1;d&&this._fireEditRowChangeEvent(d,n);var c=this._getEditableRowIdx();if(e?(this._setEditableRowIdx(u),this._getTable().setAttribute(O.DOM_ATTR._ARIA_LABELLEDBY,""),this._accStatus.setAttribute(O.DOM_ATTR._ARIA_LABELLEDBY,""),this._queueTask(function(){this._getLayoutManager().notifyTableUpdate(O._UPDATE._ROW_REFRESH),this._refreshRow(u,!0).then(function(){this._setRowFocus(u,!0,!1),this._setCellInRowFocus(u,o,l)}.bind(this))}.bind(this))):(this._focusEditCell=null,this._setEditableRowIdx(null),i||this._getTable().focus()),null!=c)null!=this._getTableBodyRow(c)&&this._refreshRow(c,!1)}}},
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
O._KEYBOARD_CODES={_MODIFIER_SHIFT:"shiftKey"},O.prototype._getKeyboardKeys=function(){return this._keyboardKeys||(this._keyboardKeys=[]),this._keyboardKeys.reverse()},O.prototype._addKeyboardKey=function(e){var t,o=!1,l=Object.keys(m.KEYBOARD_KEYS);for(t=0;t<l.length;t++){var n=l[t];if(m.KEYBOARD_KEYS[n]===e){o=!0;break}}if(o){var i=this._getKeyboardKeys(),s=!1,a=i.length;for(t=0;t<a;t++)if(i[t]===e){s=!0;break}s||i.push(e)}},O.prototype._isKeyPressMatch=function(e){for(var t=this._getKeyboardKeys(),o=0;o<t.length;o++)if(e(t[o]))return!0;return!1},O.prototype._removeKeyboardKey=function(e){for(var t=this._getKeyboardKeys(),o=t.length,l=0;l<o;l++)t[l]===e&&t.splice(l,1)},O.prototype._clearKeyboardKeys=function(){this._keyboardKeys=[]},O.prototype._handleKeydownLeftRight=function(e,t){if(!this._isTableActionableMode()&&!this._hasEditableRow()){var o,l,n="rtl"===this._GetReadingDirection(),i=this._isKeyPressMatch(m.isArrowLeftKeyEvent),s=n&&i||!n&&!i,a=this._getFocusedHeaderColumnIdx();if(null!=a)return o=!t||this._isNavigate||null==this._lastSelectedHeaderIdx?a:this._lastSelectedHeaderIdx,l=this._getNextVisibleColumnIndex(o,s),void(t?(this._isNavigate=!1,this._selectRange(a,l,!1),this._scrollColumnIntoViewport(l)):(this._isNavigate=!0,0===o&&!1===s&&this._isDefaultSelectorEnabled()&&(l=-1),l!==a&&this._setHeaderColumnFocus(l,!0,!1)));var r=this._getFocusedFooterColumnIdx();if(null!=r)return o=!t||this._isNavigate||null==this._lastSelectedFooterIdx?r:this._lastSelectedFooterIdx,l=this._getNextVisibleColumnIndex(o,s),void(t?(this._isNavigate=!1,this._selectRange(r,l,!1),this._scrollColumnIntoViewport(l)):(this._isNavigate=!0,0===o&&!1===s&&this._isDefaultSelectorEnabled()&&(l=-1),l!==r&&this._setFooterColumnFocus(l,!0,!1)));o=this._accColumnIndex,l=this._getNextVisibleColumnIndex(o,s),this._updateAccStatusInfo(this._accRowIndex,l)}},O.prototype._handleKeydownUpDown=function(e,t){if(!this._isTableActionableMode()&&!this._hasEditableRow()){var o,l=this._isKeyPressMatch(m.isArrowUpKeyEvent);if(S.isMetaKeyPressed(e))return o=this._getFirstVisibleColumnIndex(0,!0),void(l&&null==this._getFocusedHeaderColumnIdx()?this._setHeaderColumnFocus(o,!0,!1):l||null!=this._getFocusedFooterColumnIdx()||this._setFooterColumnFocus(o,!0,!1));var n=this._getFocusedRowIdx();if(null==n)l||null==this._getFocusedHeaderColumnIdx()?l&&null!=this._getFocusedFooterColumnIdx()&&this._setRowFocus(this._getTableBodyRows().length-1,!0,!0,null,e):this._setRowFocus(0,!0,!0,null,e);else{var i,s,a=this._getTableBodyRows().length;if(i=!t||this._isNavigate||null==this._lastSelectedRowIdx?n:this._lastSelectedRowIdx,s=l?i>0?i-1:i:i<a-1?i+1:i,t)this._isNavigate=!1,this._selectRange(n,s,!0),this._scrollRowIntoViewport(s);else if(this._isNavigate=!0,o=this._getFirstVisibleColumnIndex(0,!0),s!==n){if(!this._setRowFocus(s,!0,!0,null,e))return;this._getTable().focus()}else 0===s&&l?this._setHeaderColumnFocus(o,!0,!1):s!==a-1||l||this._setFooterColumnFocus(o,!0,!1)}}},O.prototype._getTabbableElements=function(e,t){var o=null;return null!=(o=t?c(e).find(":tabbable"):c(e).find(":tabbable").not(".oj-helper-hidden-accessible"))&&o.length>0?o.toArray():null},O.prototype._handleKeydownTab=function(e){var t,o,l=!1,n=this._getFocusedRowIdx(),i=this._getFocusedHeaderColumnIdx();if(this._isTableActionableMode()||this._hasEditableRow()){var s=document.activeElement,a=this._getTableBody(),r=this._getTableHeader();if(null!=n&&this._getEditableRowIdx()===n){var _=this._getTableBodyRow(n),d=this._getTabbableElements(_),h=null!=d?d.length:0,u=c(d).index(s);if(u===h-1&&!e[O._KEYBOARD_CODES._MODIFIER_SHIFT])return this._setNextRowEditable(0,e),e.preventDefault(),void e.stopPropagation();if(0!==u||!e[O._KEYBOARD_CODES._MODIFIER_SHIFT])return;var S=this._getTableHeaderColumns();if(S){var C=S.length;return this._setPreviousRowEditable(C-1,e),e.preventDefault(),void e.stopPropagation()}}else if(this._tableActionableBoundaryElement){var E;if(o=this._tableActionableBoundaryElement,(t=this._getTabbableElements(o)).length>1){if(e[O._KEYBOARD_CODES._MODIFIER_SHIFT]){if(s===t[0])c(t[t.length-1]).focus(),e.preventDefault(),e.stopPropagation();else for(E=0;E<t.length;E++)if(s===t[E]){t[E-1].focus(),e.preventDefault(),e.stopPropagation();break}}else if(s===t[t.length-1])c(t[0]).focus(),e.preventDefault(),e.stopPropagation();else for(E=0;E<t.length;E++)if(s===t[E]){t[E+1].focus(),e.preventDefault(),e.stopPropagation();break}}else e.preventDefault(),e.stopPropagation();return}if((null!=n&&!this._hasEditableRow()||null!=i)&&!e[O._KEYBOARD_CODES._MODIFIER_SHIFT]){if(l=!0,o=null,null!=n?o=this._getTableBodyRow(n):null!=i&&(o=this._getTableHeaderColumn(i)),null!=(t=this._getTabbableElements(o)))c(t[0]).focus();else if(null!=n){var p=this._getTabbableElements(a);c(p[0]).focus()}else if(null!=i){var T=this._getTabbableElements(r);c(T[0]).focus()}e.preventDefault(),e.stopPropagation()}}if(!l){var g=this._getTable(),f=this._getTabbableElements(g,!0),m=null!=f?f.length:0,b=g;return e[O._KEYBOARD_CODES._MODIFIER_SHIFT]||(this._isFF()?((b=document.createElement(O.DOM_ELEMENT._A)).setAttribute(O.DOM_ATTR._TABINDEX,"0"),b.setAttribute(O.DOM_ATTR._HREF,"#"),b.classList.add(O.CSS_CLASSES._HIDDEN_CONTENT_ACC_CLASS),g.insertAdjacentElement("afterend",b),this._temporaryFocusForFF=b):m>0&&(b=f[m-1])),this._temporaryTableChildElementFocus=!0,b.focus(),void setTimeout(function(){this._temporaryTableChildElementFocus=!1,this._temporaryFocusForFF&&(c(this._temporaryFocusForFF).remove(),this._temporaryFocusForFF=null)}.bind(this),0)}var A=e.key||e.keyCode;this._removeKeyboardKey(A)},O.prototype._handleKeydownEnter=function(e){if(!this._isTableActionableMode()){var t=this._getFocusedHeaderColumnIdx();if(null!=t){if(-1!==t&&this._getColumnDefs()[t].sortable===O._OPTION_ENABLED){var o=this._getTableHeaderColumn(t),l=c(o).data("sorted");null==l||l===O._COLUMN_SORT_ORDER._DESCENDING?this._handleSortTableHeaderColumn(t,!0,e):this._handleSortTableHeaderColumn(t,!1,e)}}else if(null==this._getFocusedFooterColumnIdx()){var n=this._getCurrentRow(),i=(n=n||{}).rowIndex;if(i>=0)if(this._isTableEditMode()){if(!this._hasEditableRow())return void this._setTableEditable(!0,!1,0,!0,e);var s=this._getElementColumnIdx(e.target);e[O._KEYBOARD_CODES._MODIFIER_SHIFT]?this._setPreviousRowEditable(s,e):this._setNextRowEditable(s,e)}else this._fireActionEvent(i,e),this._setTableActionableMode(!0)}}},O.prototype._handleKeydownSpacebar=function(e){if(!this._isTableActionableMode()&&!this._hasEditableRow()){e.preventDefault(),e.stopPropagation();var t=this._getFocusedRowIdx();if(null==t){var o=this._getFocusedHeaderColumnIdx();if(null==o){var l=this._getFocusedFooterColumnIdx();null!=l&&this._handleSelectionGesture(l,!1,!0)}else-1!==o?this._handleSelectionGesture(o,!1,!0):this._handleSelectAllGesture()}else this._handleSelectionGesture(t,!0,!0)}},O.prototype._handleKeydownF2=function(e){e.preventDefault(),e.stopPropagation(),this._isTableEditMode()?this._hasEditableRow()?this._setTableEditable(!1,!1,0,!0,e):(this._setTableEditable(!0,!1,0,!0,e),this._hasEditableRow()||this._toggleTableActionableMode()):this._toggleTableActionableMode()},O.prototype._handleKeydownEsc=function(e){this._hasEditableRow()?(e.preventDefault(),e.stopPropagation(),this._setTableEditable(!1,!0,0,!0,e),this._getTable().focus()):this._isTableActionableMode()&&(e.preventDefault(),e.stopPropagation(),this._setTableActionableMode(!1),this._getTable().focus()),this._clearTableHeaderColumnsResize()},O.prototype._handleKeydownHome=function(e){if(!this._isTableActionableMode()&&!this._hasEditableRow()){var t=this._getFirstVisibleColumnIndex(0,!0),o=this._getFocusedHeaderColumnIdx();if(null==o||0===o){var l=this._getFocusedFooterColumnIdx();if(null==l||0===l){var n=this._getFocusedRowIdx();null!=n&&0!==n&&this._setRowFocus(0,!0,!0,null,e)}else this._setFooterColumnFocus(t,!0,!1)}else this._setHeaderColumnFocus(t,!0,!1)}},O.prototype._handleKeydownEnd=function(e){if(!this._isTableActionableMode()&&!this._hasEditableRow()){var t=this._getColumnDefs().length-1,o=this._getFirstVisibleColumnIndex(t,!1),l=this._getFocusedHeaderColumnIdx();if(null==l||l===t){var n=this._getFocusedFooterColumnIdx();if(null==n||n===t){var i=this._getFocusedRowIdx();if(null!=i){var s=this._getTableBodyRows().length;i!==s-1&&s>0&&this._setRowFocus(s-1,!0,!0,null,e)}}else this._setFooterColumnFocus(o,!0,!1)}else this._setHeaderColumnFocus(o,!0,!1)}},
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
O.prototype._columnHeaderDefaultRenderer=function(e,t){var o=e.headerContext.parentElement,l=document.createElement(O.DOM_ELEMENT._DIV);l.classList.add(O.CSS_CLASSES._COLUMN_HEADER_CLASS),c(o).empty(),o.appendChild(l);var n=document.createElement(O.DOM_ELEMENT._DIV);n.classList.add(O.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS),l.insertBefore(n,l.firstChild),null!=t?t(c(n)):this._columnHeaderDefaultTextRenderer(n,e)},O.prototype._columnHeaderSortableIconRenderer=function(e,t){var o=e.headerContext.parentElement,l=document.createElement(O.DOM_ELEMENT._DIV);l.classList.add(O.CSS_CLASSES._COLUMN_HEADER_CLASS),c(o).empty(),o.appendChild(l);var n=document.createElement(O.DOM_ELEMENT._DIV);n.classList.add(O.CSS_CLASSES._TABLE_SORT_ICON_CONTAINER_CLASS),n.setAttribute("title",this.getTranslatedString("labelSortAsc")),this._AddHoverable(c(n)),l.appendChild(n);var i=document.createElement(O.DOM_ELEMENT._DIV);i.classList.add(O.CSS_CLASSES._WIDGET_ICON_CLASS),i.classList.add(O.CSS_CLASSES._COLUMN_HEADER_DEFAULT_SORT_ICON_CLASS),i.classList.add(O.MARKER_STYLE_CLASSES._DISABLED),i.classList.add(O.MARKER_STYLE_CLASSES._CLICKABLE_ICON),this._AddHoverable(c(i)),n.appendChild(i);var s=document.createElement(O.DOM_ELEMENT._DIV);s.classList.add(O.CSS_CLASSES._COLUMN_HEADER_TEXT_CLASS),l.insertBefore(s,l.firstChild),null!=t?t(c(s)):this._columnHeaderDefaultTextRenderer(s,e)},O.prototype._columnHeaderDefaultTextRenderer=function(e,t){var o=t.columnIndex,l=this._getColumnDefs()[o],n=null==l.headerText?"":l.headerText;e.appendChild(document.createTextNode(n))},O.prototype._tableBodyRowDefaultRenderer=function(e,t,o){var l=o.rowContext.parentElement,n=this._hashCode(t.key),i=this._getColumnDefs();this._setTableBodyRowAttributes(t,l);for(var s=i.length,a=0;a<s;a++)this._tableBodyCellDefaultRenderer(e,a,t,n,o)},O.prototype._tableBodyCellDefaultRenderer=function(e,t,o,l,n){var i=n.rowContext.parentElement,s=this._getColumnDefs()[t],a=this._createTableBodyCell();this._styleTableBodyCell(t,a,!0),this._insertTableBodyCell(e,o.key,l,t,a,i,!0);var r=null;null!=s.field&&(r=this._getObjectPath(o.data,s.field));var _=this._getColumnRenderer(t,"cell"),d=this._getSlotTemplate(s.template);if(null==d&&this._isDefaultCellTemplateSlotValid()&&(d=this._getSlotTemplate("cellTemplate")),_||d){var h=this._getRendererContextObject(a,{row:o}),u={cellContext:h,columnIndex:t,data:r,row:o.data,componentElement:h.componentElement,parentElement:h.parentElement};if(_){var S=_(u);null!=S?c(a).append(S):(a=this._isDefaultSelectorEnabled()?c(i).children()[t+1]:c(i).children()[t],this._setTableBodyCellAttributes(e,o.key,l,t,a),this._styleTableBodyCell(t,a,!1))}else{var C=this._getRootElement(),E=this._getTemplateEngine();if(null!=E){var p=this._getCellSlotTemplateContextObject(u),T=E.execute(C,d,p,this.options.as);T instanceof Array||(T=[T]),T.map(function(e){a.appendChild(e)}),this._hasCellTemplate=!0}}}else{var g=null==(r=this._getVal(r))?"":r;a.appendChild(document.createTextNode(g))}},O.prototype._getRendererContextObject=function(e,t){var o={};o.component=f.__GetWidgetConstructor(this.element,"ojTable");var l=this.options.data;if(this._isPagingModelTableDataSource()&&(l=l.getWrappedDataSource()),o.datasource=l,o.parentElement=e,null!=t.row){var n=t.row,i=n.key;if(o.status=this._getRendererStatusObject(n),this._hasEditableRow()){var s=this._getEditableRowKey();u.Object.compareValues(i,s)?o.mode="edit":o.mode="navigation"}else o.mode="navigation";this._copyMetadata(o,n)}return this._FixRendererContext(o)},O.prototype._getRendererStatusObject=function(e){return{rowIndex:e.index,rowKey:e.key,currentRow:c.extend({},this._getCurrentRow())}},O.prototype._getCellSlotTemplateContextObject=function(e){var t=this._getSlotTemplateContextObject(),o=e.cellContext.status.rowIndex,l=e.cellContext.status.rowKey,n=e.columnIndex;t[O._CONST_DATA]=e.data,t.row=e.row,t[O._CONST_INDEX]=o,t.columnIndex=n,t.mode=e.cellContext.mode,t[O._CONST_KEY]=l,t.item=e.parentElement.parentElement["oj-table-oj-row-item"],t.columnKey=this._getColumnKeyForColumnIdx(e.columnIndex);var i=this.options.data;return this._isPagingModelTableDataSource()&&(i=i.getWrappedDataSource()),t.datasource=i,t},O.prototype._getRowSlotTemplateContextObject=function(e){var t=this._getSlotTemplateContextObject();t[O._CONST_DATA]=e.data,t[O._CONST_INDEX]=e.rowContext.status.rowIndex,t.rowContext=e.rowContext,t.mode=e.rowContext.mode,t[O._CONST_KEY]=e.rowContext.status.rowKey,t.item=e.parentElement["oj-table-oj-row-item"];var o=this.options.data;return this._isPagingModelTableDataSource()&&(o=o.getWrappedDataSource()),t.datasource=o,t},O.prototype._getHeaderSlotTemplateContextObject=function(e,t){var o=this._getSlotTemplateContextObject();return o[O._CONST_DATA]=e,o.columnIndex=t,o.headerText=e,o.columnKey=this._getColumnKeyForColumnIdx(t),o},O.prototype._getFooterSlotTemplateContextObject=function(e){var t=this._getSlotTemplateContextObject();return t.columnIndex=e,t.columnKey=this._getColumnKeyForColumnIdx(e),t},O.prototype._getSlotTemplateContextObject=function(){return{componentElement:this._getRootElement()}},O.prototype._copyMetadata=function(e,t){var o=t.metadata;if(o)for(var l=Object.keys(o),n=0;n<l.length;n++){var i=l[n];e[i]=o[i]}},O.prototype._getObjectPath=function(e,t){if(null!=e&&("string"==typeof t||t instanceof String)&&(-1!==t.indexOf(".")||-1!==t.indexOf("[")&&-1!==t.indexOf("]"))){var o=e,l=!1;if(t.split(".").map(function(e){if(null!=o&&-1!==e.indexOf("[")&&-1!==e.indexOf("]")){var t=e.substr(0,e.indexOf("[")),n=parseInt(e.substr(e.indexOf("[")+1,e.indexOf("]")-e.indexOf("[")-1),10);o=o[t][n],l=!0}else null!==o&&void 0!==o[e]&&(o=o[e],l=!0)}),l)return o}else if(null==e)return null;return e[t]},O.prototype._getVal=function(e){return"function"==typeof e?e():e},
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
O.RESIZE_OFFSET=10,O.prototype._setResizeCursor=function(e){var t=this._getEventTargetElement(e),o=this._getElementColumnIdx(t);if(null==o)return!1;if(this._getColumnDefs()[o].resizable===O._OPTION_DISABLED&&this._resizeStartColumnIdx!==o-1&&this._resizeStartColumnIdx!==o+1)return!1;if(null==this._resizeStartColumnIdx)return null!==this._isHeaderColumnResizeStart(e)?(t.style.cursor="col-resize",!0):(t.style.cursor="",!1);if(!this._getTableHeaderColumns())return!1;if(o===this._resizeStartColumnIdx||this._resizeColumnStart&&o===this._resizeStartColumnIdx-1||!this._resizeColumnStart&&o===this._resizeStartColumnIdx+1){var l=this._getTableHeaderColumnResizeIndicator();if(null!=l){var n=this._getLayoutManager().getScroller().getBoundingClientRect();return l.style.left=this._getPageX(e)-n.left+"px",!0}}return!1},O.prototype._handleHeaderColumnResizeStart=function(e){var t=this._getEventTargetElement(e),o=this._getElementColumnIdx(t);if(null!=o){var l=this._getColumnDefs()[o];if(this._resizeColumnStart=this._isHeaderColumnResizeStart(e),l.resizable===O._OPTION_ENABLED&&null!==this._resizeColumnStart)return this._resizeStartColumnIdx=o,this._resizeStartPageX=this._getPageX(e),this._setTableHeaderColumnsResizeStyling(),this._setTableHeaderColumnResizeIndicator(o),!0}return this._resizeStartColumnIdx=null,this._resizeStartPageX=null,!1},O.prototype._handleHeaderColumnResizeEnd=function(e){var t=this._getLayoutManager(),o=this.options.columns.length,l=this._getEventTargetElement(e),n=this._getElementColumnIdx(l);if(null!==n&&n===this._resizeStartColumnIdx||this._resizeColumnStart&&n===this._resizeStartColumnIdx-1||!this._resizeColumnStart&&n===this._resizeStartColumnIdx+1){var i=this._getTableHeaderColumn(this._resizeStartColumnIdx);if(null!=i){var s,a=i.getBoundingClientRect().width,r=!this._isStickyLayoutEnabled();if(r&&this._resizeStartColumnIdx===o-1&&t.isTableHeightConstrained()&&(a-=t.getScrollBarWidth()),s="rtl"===this._GetReadingDirection()&&this._resizeColumnStart||"ltr"===this._GetReadingDirection()&&!this._resizeColumnStart?this._getPageX(e)-this._resizeStartPageX:this._resizeStartPageX-this._getPageX(e),Math.abs(s)>2){var _=a+s,d=t.getMinimumForcedOffsetWidth(this._resizeStartColumnIdx);d>_&&(s+=d-_,_=d);for(var h=[],u=0;u<o;u++)h[u]=c.extend({},{},this.options.columns[u]);var S=this._resizeColumnStart?this._resizeStartColumnIdx-1:this._resizeStartColumnIdx+1;r&&S===o-1&&t.isTableHeightConstrained()&&(s+=t.getScrollBarWidth());var C=this._getTableHeaderColumn(S);if(C){var E=C.getBoundingClientRect().width-s;(d=t.getMinimumForcedOffsetWidth(S))>E&&(_+=E-d,E=d),h[S].width=t.getWidthPropertyFromOffsetWidth(E,C)}return h[this._resizeStartColumnIdx].width=t.getWidthPropertyFromOffsetWidth(_,i),this.option("columns",h,{_context:{writeback:!0,internalSet:!0}}),this._clearCachedMetadata(),this._queueTask(function(){t.notifyTableUpdate(O._UPDATE._COL_RESIZE),setTimeout(function(){this._clearTableHeaderColumnsResize()}.bind(this),0)}.bind(this)),!0}}}return this._clearTableHeaderColumnsResize(),!1},O.prototype._clearTableHeaderColumnsResize=function(){this._resizeStartColumnIdx=null,this._resizeColumnStart=null,this._resizeStartPageX=null,this._clearTableHeaderColumnsResizeStyling(),this._removeTableHeaderColumnResizeIndicator()},O.prototype._getPageX=function(e){return void 0!==e.pageX?e.pageX:void 0!==e.changedTouches?e.changedTouches[0].pageX:0},O.prototype._isHeaderColumnResizeStart=function(e){var t=null,o=this.options.columns.length,l=this._getElementColumnIdx(e.target),n=this._getTableHeaderColumn(l);if(null!==n){var i=this._GetReadingDirection(),s=n.getBoundingClientRect(),a=Math.abs(this._getPageX(e)-s.left),r=Math.abs(this._getPageX(e)-s.right);a<=O.RESIZE_OFFSET?"rtl"===i&&l!==o-1?t=!1:"ltr"===i&&0!==l&&(t=!0):r<=O.RESIZE_OFFSET&&("ltr"===i&&l!==o-1?t=!1:"rtl"===i&&0!==l&&(t=!0))}return t},O.prototype._setTableHeaderColumnResizeIndicator=function(e){var t=this._getTableHeaderColumnResizeIndicator();null==t&&(t=this._createTableHeaderColumnResizeIndicator());var o=this._getTable().getBoundingClientRect(),l=this._getLayoutManager().getScroller().getBoundingClientRect(),n=this._getTableHeaderColumn(e).getBoundingClientRect();t.style.height=o.height+"px",this._resizeColumnStart?("rtl"===this._GetReadingDirection()?t.style.left=n.left+n.width-l.left+"px":t.style.left=n.left-l.left+"px",t.style.borderLeftWidth="2px",t.style.borderRightWidth="0"):("rtl"===this._GetReadingDirection()?t.style.left=n.left-l.left+"px":t.style.left=n.left+n.width-l.left+"px",t.style.borderRightWidth="2px",t.style.borderLeftWidth="0")},O.prototype._setTableHeaderColumnsResizeStyling=function(){this._getTable().classList.add(O.CSS_CLASSES._COLUMN_HEADER_RESIZING_CLASS)},O.prototype._clearTableHeaderColumnsResizeStyling=function(){var e=this._getTableHeaderColumns();if(e)for(var t=0;t<e.length;t++)e[t].style.cursor="";this._getTable().classList.remove(O.CSS_CLASSES._COLUMN_HEADER_RESIZING_CLASS)},
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
O.prototype._getRowSelectionMode=function(){return null==this.options.selectionMode?null:this.options.selectionMode[O._CONST_ROW]},O.prototype._isRowSelectionEnabled=function(){var e=this._getRowSelectionMode();return e===O._OPTION_SELECTION_MODES._SINGLE||e===O._OPTION_SELECTION_MODES._MULTIPLE},O.prototype._getColumnSelectionMode=function(){return null==this.options.selectionMode?null:this.options.selectionMode[O._CONST_COLUMN]},O.prototype._isColumnSelectionEnabled=function(){var e=this._getColumnSelectionMode();return e===O._OPTION_SELECTION_MODES._SINGLE||e===O._OPTION_SELECTION_MODES._MULTIPLE},O.prototype._syncSelectionState=function(){var e=this.option("selected"),t=this.option("selection");this._selectionSet&&(e=this._getSelectedEquivalent(t),this._syncRangeSelection()),this._isSelectionRequiredSatisfied(e)?this._setSelected(e,this._selectionSet):this._selectFirstRowOrColumn()},O.prototype._updateSelectionStateFromEventDetailRemove=function(e,t){var o=this.option("selected"),l=o.row;l&&(e[O._CONST_KEYS].forEach(function(e){null!=t&&t[O._CONST_KEYS].has(e)||(l.isAddAll()?l.has(e)||(l=l.add([e])):l=l.delete([e]))}),o.row!==l&&(o={row:l,column:o.column},this._isSelectionRequiredSatisfied(o)?this._setSelected(o):this._selectFirstRowOrColumn()))},O.prototype._validateInitialSelectionState=function(e){var t,o,l=this.option("selection"),n=this.option("selected"),i=n.row,s=n.column;if(this._validatedSelectedRowKeyData=null,(this._selectionSet||!e&&null!=l&&0!==l.length&&i===i.clear()&&s===s.clear())&&(n=this._getSelectedEquivalent(l),t=!0),this._isSelectionRequired())if((o=this._validateSelected(n)).isLocal)this._enforceSelectionRequired(n,o.result,t);else{var a=this._createComponentBusyState("is validating selection-required keys.");o.result.then(function(e){this._enforceSelectionRequired(n,e,t),this._clearComponentBusyState(a)}.bind(this))}else t&&this._syncRangeSelection(),this._setSelected(n,t);this._initialSelectionStateValidated=!0},O.prototype._isSelectionRequired=function(){return"true"===String(this.options.selectionRequired).toLowerCase()},O.prototype._hasSelected=function(e){null==e&&(e=this.option("selected"));var t=e.row,o=e.column;return t.isAddAll()||t.values().size>0||o.isAddAll()||o.values().size>0},O.prototype._isSelectionRequiredSatisfied=function(e){return!this._isSelectionRequired()||this._hasSelected(e)},O.prototype._enforceSelectionRequired=function(e,t,o){o?this._hasSelected(t)?t.row===e.row&&t.column===e.column?(this._syncRangeSelection(),this._setSelected(t,!0)):this._setSelected(t):this._selectFirstRowOrColumn():this._hasSelected(t)?this._setSelected(t):this._selectFirstRowOrColumn()},O.prototype._selectFirstRowOrColumn=function(){var e,t;if(this._isRowSelectionEnabled()&&null!=(t=this._getRowKeyForRowIdx(0)))return e=new L.KeySetImpl([t]),void this._setSelected({row:e,column:new L.KeySetImpl});this._isColumnSelectionEnabled()&&null!=(t=this._getColumnKeyForColumnIdx(0))&&(e=new L.KeySetImpl([t]),this._setSelected({row:new L.KeySetImpl,column:e}))},O.prototype._validateSelected=function(e){var t=e.column,o=t;if(!t.isAddAll()){var l=this._getColumnKeys(),n=[];t.values().forEach(function(e){-1===l.indexOf(e)&&n.push(e)}),n.length>0&&(o=o.delete(n))}var i=e.row,s=i;if(!i.isAddAll()){var a=this._getLocalRowKeys(),r=[];if(i.values().forEach(function(e){-1===a.indexOf(e)&&r.push(e)}),r.length>0){var _=this._fetchValidRowKeyData(r);if(_)return{isLocal:!1,result:_.then(function(e){return this._validatedSelectedRowKeyData=e,e.forEach(function(e){r.splice(r.indexOf(e.key),1)}),{row:s=s.delete(r),column:o}}.bind(this))};s=s.delete(r)}}return{isLocal:!0,result:{row:s,column:o}}},O.prototype._fetchValidRowKeyData=function(e){var t=this._getData();if(t&&t.getCapability){var o=t.getCapability("fetchByKeys");if(o&&"lookup"===o.implementation)return new Promise(function(o){t.fetchByKeys({keys:new Set(e),scope:"global"}).then(function(e){var t=[];e.results.forEach(function(e,o){t.push({key:o,data:e.data})}),o(t)},function(){o([])})})}return null},O.prototype._syncRangeSelection=function(e){if(void 0===e&&(e=this.option("selection")),null!=e)for(var t=e.length,o=0;o<t;o++){var l,n,i,s,a=e[o];null!=a.startKey&&null!=a.startKey[O._CONST_ROW]?(l=a.startKey[O._CONST_ROW],n=this._getDataSourceRowIndexForRowKey(l),a.startIndex={},a.startIndex[O._CONST_ROW]=n):null!=a.startIndex&&null!=a.startIndex[O._CONST_ROW]&&(n=a.startIndex[O._CONST_ROW],null!=(l=this._getRowKeyForDataSourceRowIndex(n))&&(a.startKey={},a.startKey[O._CONST_ROW]=l)),null!=a.endKey&&null!=a.endKey[O._CONST_ROW]?(i=a.endKey[O._CONST_ROW],s=this._getDataSourceRowIndexForRowKey(i),a.endIndex={},a.endIndex[O._CONST_ROW]=s):null!=a.endIndex&&null!=a.endIndex[O._CONST_ROW]&&(s=a.endIndex[O._CONST_ROW],null!=(i=this._getRowKeyForDataSourceRowIndex(s))&&(a.endKey={},a.endKey[O._CONST_ROW]=i))}},O.prototype._processRowRangeSelection=function(e,t,o){var l,n,i,s,a,r,_=!0;if(null!=e.startKey&&null!=e.startKey[O._CONST_ROW]?(a=e.startKey[O._CONST_ROW],l=this._getDataSourceRowIndexForRowKey(a),isNaN(l)&&(_=void 0)):null!=e.startIndex&&null!=e.startIndex[O._CONST_ROW]&&(l=e.startIndex[O._CONST_ROW]),null!=e.endKey&&null!=e.endKey[O._CONST_ROW])r=e.endKey[O._CONST_ROW],null===(n=this._getDataSourceRowIndexForRowKey(r))&&this._isLoadMoreOnScroll()&&(n=this._getDataSourceLastFetchedRowIndex(),_=void 0);else if(null!=e.endIndex&&null!=e.endIndex[O._CONST_ROW]){n=e.endIndex[O._CONST_ROW];var d=this._getDataSourceLastFetchedRowIndex();this._isLoadMoreOnScroll()&&n>d&&(n=d,_=void 0)}if(void 0===l&&void 0===n)_=!1;else if(null!=l&&null!=n&&l<=n){a=this._getRowKeyForDataSourceRowIndex(l),r=this._getRowKeyForDataSourceRowIndex(n),i=this._getRowIdxForRowKey(a),s=this._getRowIdxForRowKey(r);for(var h=i;h<=s;h++){var u=this._getRowKeyForRowIdx(h);t=t.add([u])}o=o.clear()}else C.warn("Error: Cannot resolve row range in selection - \n start row key: "+a+"\n end row key: "+r+"\n start row index: "+l+"\n end row index: "+n),null!=a&&null!=r&&(t=(t=t.add([a])).add([r]),o=o.clear());return{status:_,rowKeySet:t,columnKeySet:o}},O.prototype._getDataSourceLastFetchedRowIndex=function(){var e=this._getTableBodyRows();if(e.length>0){var t=this._getData(),o=0;return this._isPagingModelDataProvider()&&(o=t.getStartItemIndex()),e.length+o-1}return 0},O.prototype._processColumnRangeSelection=function(e,t,o){var l,n,i,s,a=!0;if(null!=e.startKey&&null!=e.startKey[O._CONST_COLUMN]?(l=e.startKey[O._CONST_COLUMN],i=this._getColumnIdxForColumnKey(l)):null!=e.startIndex&&null!=e.startIndex[O._CONST_COLUMN]&&(i=e.startIndex[O._CONST_COLUMN]),null!=e.endKey&&null!=e.endKey[O._CONST_COLUMN]?(n=e.endKey[O._CONST_COLUMN],s=this._getColumnIdxForColumnKey(n)):null!=e.endIndex&&null!=e.endIndex[O._CONST_COLUMN]&&(s=e.endIndex[O._CONST_COLUMN]),void 0===i&&void 0===s)a=!1;else if(null!=i&&null!=s&&!isNaN(i)&&!isNaN(s)&&i<=s){for(var r=i;r<=s;r++){var _=this._getColumnKeyForColumnIdx(r);o=o.add([_])}t=t.clear()}else C.error("Error: Cannot resolve column range in selection - \n start column key: "+l+"\n end column key: "+n+"\n start column index: "+i+"\n end column index: "+s);return{status:a,rowKeySet:t,columnKeySet:o}},O.prototype._invalidateRangeSelection=function(){var e=this.option("selection");if(null!=e)for(var t=0;t<e.length;t++){var o,l,n=e[t];if(null!=n.startKey&&(o=n.startKey[O._CONST_ROW]),null!=n.endKey&&(l=n.endKey[O._CONST_ROW]),o!==l||void 0===o){var i=this.option("selected.row"),s=this._getRowSelectionFromKeySet(i);this.option("selection",s,{_context:{writeback:!0,internalSet:!0}});break}}},O.prototype._setSelected=function(e,t){if(this._selectionSet=t,null!=e){var o,l=this.option("selected");if(this._selectionSet?m.areKeySetsEqual(l.row,e.row)&&m.areKeySetsEqual(l.column,e.column)||(o=!0):l.row===e.row&&l.column===e.column||(o=!0),o&&(this.option("selected",e,{_context:{writeback:!0,internalSet:!0}}),this._isSelectionRequired()&&this._validatedSelectedRowKeyData))for(var n=this._validatedSelectedRowKeyData.length-1;n>=0;n--){var i=this._validatedSelectedRowKeyData[n];e.row.has(i.key)||this._validatedSelectedRowKeyData.splice(n,1)}this._isDefaultSelectorEnabled()&&this._updateSelector(e.row),this._applySelected(e);var s=null,a=this._getRowSelectionFromKeySet(e.row);if(null!=a&&a.length>0){var r=a[0];null!=r.startKey&&(s=r.startKey[O._CONST_ROW])}if(this._setFirstSelectedRow(s),!t){var _=this._getSelectionEquivalent(e);this.option("selection",_,{_context:{writeback:!0,internalSet:!0}})}}},O.prototype._setFirstSelectedRow=function(e){var t=this.option("firstSelectedRow");if(!u.KeyUtils.equals(e,t.key)){var o=null;if(null!=e){var l=this.getDataForVisibleRow(this._getRowIdxForRowKey(e));if(null!=l)o=l[O._CONST_DATA];else if(this._validatedSelectedRowKeyData)for(var n=0;n<this._validatedSelectedRowKeyData.length;n++){var i=this._validatedSelectedRowKeyData[n];if(u.KeyUtils.equals(e,i.key)){o=i.data;break}}}this.option("firstSelectedRow",{key:e,data:o},{_context:{writeback:!0,internalSet:!0}})}},O.prototype._getSelectedEquivalent=function(e){var t;if(null!=e){for(var o=(t={row:new L.KeySetImpl,column:new L.KeySetImpl}).row,l=t.column,n=e.length,i=0;i<n;i++){var s=e[i];if(null==s.startKey&&null==s[O._CONST_STARTINDEX]||null==s.endKey&&null==s[O._CONST_ENDINDEX])C.error("Error: Invalid range object in selection. Both start and end objects must be specified");else{var a=this._processRowRangeSelection(s,o,l);o=a.rowKeySet,l=a.columnKeySet,!1===a.status&&(!1===(a=this._processColumnRangeSelection(s,o,l)).status&&C.error("Error: Invalid range object"),o=a.rowKeySet,l=a.columnKeySet)}}t.row===o&&t.column===l||(t={row:o,column:l})}else t={row:new L.KeySetImpl,column:new L.KeySetImpl};return t},O.prototype._getSelectionEquivalent=function(e){var t=this._getRowSelectionFromKeySet(e.row);return t.length>0||t.inverted||(t=this._getColumnSelectionFromKeySet(e.column)).length>0||t.inverted?t:[]},O.prototype._getRowSelectionFromKeySet=function(e){var t=[];return(e.isAddAll()?e.deletedValues():e.values()).forEach(function(e){var o={startKey:{row:e},endKey:{row:e}},l=this._getDataSourceRowIndexForRowKey(e);!isNaN(l)&&l>=0&&(o.startIndex={row:l},o.endIndex={row:l}),t.push(o)},this),t.inverted=e.isAddAll(),t},O.prototype._getColumnSelectionFromKeySet=function(e){var t=[];return(e.isAddAll()?e.deletedValues():e.values()).forEach(function(e){var o={startKey:{column:e},endKey:{column:e}},l=this._getColumnIdxForColumnKey(e);l>=0&&(o.startIndex={column:l},o.endIndex={column:l}),t.push(o)},this),t.inverted=e.isAddAll(),t},O.prototype._applySelected=function(e){var t=e.row,o=e.column;if(this._getSelectedRowIdxs().forEach(function(e){var o=this._getTableBodyRow(e);t.has(this._getRowKey(o))||(this._applyRowSelection(e,o,!1),this._setLastRowSelection(e,!1))},this),this._isRowSelectionEnabled())if(t.isAddAll()){var l=this._getTableBodyRows();l.forEach(function(e,o){t.has(this._getRowKey(e))&&this._applyRowSelection(o,e,!0)},this);var n=l.length-1,i=this._getRowKeyForRowIdx(n);this._setLastRowSelection(n,t.has(i))}else t.values().forEach(function(e){var t=this._getRowIdxForRowKey(e);null!=t&&t>=0&&(this._applyRowSelection(t,this._getTableBodyRow(t),!0),this._setLastRowSelection(t,!0))},this);if(0===this._getSelectedRowIdxs().length&&this._removeTableBodyRowTouchSelectionAffordance(),this._getSelectedHeaderColumnIdxs().forEach(function(e){o.has(this._getColumnKeyForColumnIdx(e))||this._applyColumnSelection(e,!1)},this),this._isColumnSelectionEnabled())if(o.isAddAll()){var s=this._getTableHeaderColumns();s.forEach(function(e,t){o.has(this._getColumnKeyForColumnIdx(t))&&this._applyColumnSelection(t,!0)},this);var a=s.length-1,r=this._getColumnKeyForColumnIdx(a);this._setLastHeaderColumnSelection(a,o.has(r))}else o.values().forEach(function(e){var t=this._getColumnIdxForColumnKey(e);null!=t&&t>=0&&this._applyColumnSelection(t,!0)},this)},O.prototype._applyRowSelection=function(e,t,o){if(t.classList.contains(O.MARKER_STYLE_CLASSES._SELECTED)!==o){o?t.classList.add(O.MARKER_STYLE_CLASSES._SELECTED):t.classList.remove(O.MARKER_STYLE_CLASSES._SELECTED);var l=this.options.dnd.drag;l&&("rows"===l||l.rows)&&(t.draggable=o,o?t.classList.add(O.MARKER_STYLE_CLASSES._DRAGGABLE):t.classList.contains(O.MARKER_STYLE_CLASSES._DRAGGABLE)&&t.classList.remove(O.MARKER_STYLE_CLASSES._DRAGGABLE))}o?this._updateRowStateCellsClass(e,{hover:!1,focused:!1,selected:!0}):this._updateRowStateCellsClass(e,{selected:!1})},O.prototype._applyColumnSelection=function(e,t){var o=this.options.dnd.reorder;if(o&&o.columns===O._OPTION_ENABLED){var l=this._getTableHeaderColumn(e),n=l.classList.contains(O.MARKER_STYLE_CLASSES._DRAGGABLE);l.draggable=t,t&&!n?l.classList.add(O.MARKER_STYLE_CLASSES._DRAGGABLE):!t&&n&&l.classList.remove(O.MARKER_STYLE_CLASSES._DRAGGABLE)}this._setHeaderColumnState(e,{selected:t})},O.prototype._setLastRowSelection=function(e,t){this._lastSelectedRowIdxArray||(this._lastSelectedRowIdxArray=[]);for(var o=this._lastSelectedRowIdxArray.length,l=0;l<o;l++)if(this._lastSelectedRowIdxArray[l]===e){this._lastSelectedRowIdxArray.splice(l,1);break}t&&this._lastSelectedRowIdxArray.push(e)},O.prototype._setLastHeaderColumnSelection=function(e,t){this._lastSelectedColumnIdxArray||(this._lastSelectedColumnIdxArray=[]);for(var o=this._lastSelectedColumnIdxArray.length,l=0;l<o;l++)if(this._lastSelectedColumnIdxArray[l]===e){this._lastSelectedColumnIdxArray.splice(l,1);break}t&&this._lastSelectedColumnIdxArray.push(e)},O.prototype._handleSelectionGesture=function(e,t,o){var l=this.option("selected"),n=l.row,i=l.column;if(t){if(i=i.clear(),this._isRowSelectionEnabled()){var s=this._getRowSelectionMode(),a=this._getRowKeyForRowIdx(e);n=n.has(a)?!o&&this._getSelectedRowIdxs().length>1&&s===O._OPTION_SELECTION_MODES._MULTIPLE?new L.KeySetImpl([a]):n.delete([a]):o&&s===O._OPTION_SELECTION_MODES._MULTIPLE?n.add([a]):new L.KeySetImpl([a])}}else if(this._isColumnSelectionEnabled()){n=n.clear();var r=this._getColumnSelectionMode();if(e>-1){var _=this._getColumnKeyForColumnIdx(e);i=i.has(_)?!o&&this._getSelectedHeaderColumnIdxs().length>1&&r===O._OPTION_SELECTION_MODES._MULTIPLE?new L.KeySetImpl([_]):i.delete([_]):o&&r===O._OPTION_SELECTION_MODES._MULTIPLE?i.add([_]):new L.KeySetImpl([_])}}l.row===n&&l.column===i||(l={row:n,column:i},this._isSelectionRequiredSatisfied(l)&&this._setSelected(l))},O.prototype._handleSelectAllGesture=function(){var e=this.option("selected"),t=e.row,o=e.column;o=o.clear(),t=t.isAddAll()?new L.KeySetImpl:new L.AllKeySetImpl,e.row===t&&e.column===o||(e={row:t,column:o},this._isSelectionRequiredSatisfied(e)&&this._setSelected(e))},O.prototype._handleMouseEnterSelection=function(e,t){if(this._isRowSelectionEnabled()){var o=this._getElementRowIdx(e);null!=this._mouseDownRowIdx&&null!=o&&this._mouseDownRowIdx!==o?(this._getRowSelectionMode()===O._OPTION_SELECTION_MODES._MULTIPLE?this._selectRange(this._mouseDownRowIdx,o,!0):this._selectRange(o,o,!0),o<this._mouseDownRowIdx?this._moveTableBodyRowTouchSelectionAffordanceTop(o):this._moveTableBodyRowTouchSelectionAffordanceBottom(o)):null!=o&&o===this._mouseDownRowIdx&&(t?(this._selectRange(o,o,!0),this._moveTableBodyRowTouchSelectionAffordanceTop(o),this._moveTableBodyRowTouchSelectionAffordanceBottom(o)):this._clearSelectedRows())}},O.prototype._selectRange=function(e,t,o){var l,n=this.option("selected"),i=n.row,s=n.column;if(o){if(s=s.clear(),this._isRowSelectionEnabled()){if(i=i.clear(),e<=t)for(l=e;l<=t;l++)i=i.add([this._getRowKeyForRowIdx(l)]);else for(l=e;l>=t;l--)i=i.add([this._getRowKeyForRowIdx(l)]);this._lastSelectedRowIdx=t}}else if(i=i.clear(),this._isColumnSelectionEnabled()){if(s=s.clear(),e<=t)for(l=e;l<=t;l++)s=s.add([this._getColumnKeyForColumnIdx(l)]);else for(l=e;l>=t;l--)s=s.add([this._getColumnKeyForColumnIdx(l)]);this._lastSelectedHeaderIdx=t}n.row===i&&n.column===s||(n={row:i,column:s},this._isSelectionRequiredSatisfied(n)&&this._setSelected(n))},O.prototype._getRowSelection=function(e){return this._getTableBodyRow(e).classList.contains(O.MARKER_STYLE_CLASSES._SELECTED)},O.prototype._getHeaderColumnSelection=function(e){return this._getTableHeaderColumn(e).classList.contains(O.MARKER_STYLE_CLASSES._SELECTED)},O.prototype._getFooterColumnSelection=function(e){return this._getTableFooterCell(e).classList.contains(O.MARKER_STYLE_CLASSES._SELECTED)},O.prototype._getSelectedRowIdxs=function(){return this._getRowIdxsForElementsWithStyleClass("."+O.CSS_CLASSES._TABLE_DATA_ROW_CLASS+"."+O.MARKER_STYLE_CLASSES._SELECTED)},O.prototype._getSelectedHeaderColumnIdxs=function(){return this._getColumnIdxsForElementsWithStyleClass("."+O.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS+"."+O.MARKER_STYLE_CLASSES._SELECTED)},O.prototype._getSelectedFooterColumnIdxs=function(){return this._getColumnIdxsForElementsWithStyleClass("."+O.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS+"."+O.MARKER_STYLE_CLASSES._SELECTED)},O.prototype._clearSelectedRows=function(){this._selectionAnchorIdx=null,this._lastSelectedRowIdx=null;var e=this.option("selected.row"),t=e.clear();if(t!==e){var o={row:t,column:this.option("selected.column")};this._setSelected(o)}},O.prototype._clearSelectionState=function(){if(this._selectionAnchorIdx=null,this._lastSelectedRowIdx=null,this._lastSelectedHeaderIdx=null,this._hasSelected()){var e={row:new L.KeySetImpl,column:new L.KeySetImpl};this._setSelected(e)}},O.prototype._updateSelector=function(e){for(var t=this._getTable(),o=t.getElementsByClassName(O.CSS_CLASSES._TABLE_DATA_ROW_SELECTOR_CLASS),l=0;l<o.length;l++)o[l].selectedKeys=e;var n=t.getElementsByClassName(O.CSS_CLASSES._TABLE_HEADER_SELECTOR_CLASS);n.length>0&&(n[0].selectedKeys=e)};
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
var B=function e(t){e.superclass.constructor.call(this,t)};u.Object.createSubclass(B,N,"TableFixedLayoutManager"),B.prototype._clearAllCache=function(){B.superclass._clearAllCache.call(this),this._columnWeights=null,this._columnMinWidths=null,this._columnMaxWidths=null},B.prototype._initializeColumnLayouts=function(){var e,t=!1;if(this._table._isDefaultSelectorEnabled()){if(null==this._selectorColWidth){t=!0;var o=this._table._getTableSelectorColumn();if(null!=o)this._selectorColWidth=o.offsetWidth;else{var l=this._table._getTableBodyRow(0),n=this._table._getTableBodySelectorCell(l);null!=n&&(this._selectorColWidth=n.offsetWidth)}}}else null!=this._selectorColWidth&&(t=!0,this._selectorColWidth=null);var i=this._table._getColumnDefs(),s=i.length;if(null==this._columnWeights)for(t=!0,this._columnWeights=[],e=0;e<s;e++){var a=parseFloat(i[e].weight);a<=1&&(a=1),this._columnWeights[e]=a}if(null==this._columnMinWidths)for(t=!0,this._columnMinWidths=[],e=0;e<s;e++){var r=this._getPixelStyleEquivalent(i[e].minWidth);this._columnMinWidths[e]=null==r||r<=0?1:r}if(null==this._columnMaxWidths)for(t=!0,this._columnMaxWidths=[],e=0;e<s;e++){var _=this._getPixelStyleEquivalent(i[e].maxWidth);this._columnMaxWidths[e]=null!=_&&_<=0?null:_}if(null==this._columnInitWidths)for(t=!0,this._resetTableElementStyling(),this._columnInitWidths=[],e=0;e<s;e++){var d=this._table._getTableHeaderColumn(e);if(null!=d)this._columnInitWidths[e]=d.offsetWidth;else{var h=this._table._getTableBodyCell(0,e,null);null!=h&&(this._columnInitWidths[e]=h.offsetWidth)}}else t&&this._resetTableElementStyling();return t},B.prototype._resetTableElementStyling=function(){this._table._getTable().style="",this._removeHeaderColumnAndCellColumnWidths()},B.prototype._removeTableDimensionsStyling=function(){this.unregisterScrollListeners()},B.prototype._determineColumnWidths=function(){var e=this._table._getTableScroller().clientWidth;return this._setAllColumnWidths(e)},B.prototype._setAllColumnWidths=function(e){var t,o=this._table._getColumnDefs(),l=o.length,n=null!=this._selectorColWidth?this._selectorColWidth:0,i=n,s=0,a=[];this._appliedColumnWidths=[];var r=[];for(t=0;t<l;t++){var _=this._getPixelStyleEquivalent(o[t].width);null!=_?(r[t]=_,i+=_):(this._columnInitWidths[t]>0?(_=this._columnMinWidths[t],s+=this._columnWeights[t]):_=0,r[t]=!1),a[t]=_,n+=_}if(i<e)for(var d=!0;d;){var h=s;d=!1;var u=e-i;for(t=0;t<l;t++){if(!1===r[t])if(a[t]>0){var c=this._columnWeights[t],S=Math.floor(c/h*u),C=this._columnMinWidths[t],E=this._columnMaxWidths[t];if(null!=C&&S<C){r[t]=C,i+=C,s-=c,a[t]=C,d=!0;break}if(null!=E&&S>E){r[t]=E,i+=E,s-=c,a[t]=E,d=!0;break}a[t]=S,h-=c,u-=S}}n=e}for(t=0;t<l;t++){var p=this._table._getTableCol(t),T=a[t];p.style[O.CSS_PROP._WIDTH]=T+O.CSS_VAL._PX,0===T&&(p.style[O.CSS_PROP._DISPLAY]=O.CSS_VAL._NONE),this._appliedColumnWidths[t]=T}return n},B.prototype._getMinWidthAutoEquivalent=function(){return 100},
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
O.prototype.version="1.0.0",O.prototype.defaultElement="<table>",O.prototype.widgetEventPrefix="oj",O.prototype.options={accessibility:null,animateStart:null,animateEnd:null,as:"",currentRow:null,data:null,display:"list",dnd:{drag:null,drop:null,reorder:{columns:"disabled"}},editMode:"none",editRow:{rowKey:null,rowIndex:-1},emptyText:null,horizontalGridVisible:"auto",layout:"contents",rowRenderer:null,scrollToKey:"auto",scrollPolicy:"auto",scrollPolicyOptions:{fetchSize:25,maxCount:500},scrollPosition:{x:0,y:0},firstSelectedRow:{key:null,data:null},selection:[],selected:{row:new L.KeySetImpl,column:new L.KeySetImpl},selectionMode:null,selectionRequired:!1,verticalGridVisible:"auto",columns:[{renderer:null,className:null,field:null,footerClassName:null,footerRenderer:null,footerStyle:null,footerTemplate:null,headerClassName:null,headerRenderer:null,headerStyle:null,headerTemplate:null,headerText:null,id:null,maxWidth:null,minWidth:null,resizable:"disabled",sortable:"auto",sortProperty:null,style:null,template:null,weight:null,width:null}],columnsDefault:{renderer:null,className:null,field:null,footerClassName:null,footerRenderer:null,footerStyle:null,footerTemplate:null,headerClassName:null,headerRenderer:null,headerStyle:null,headerTemplate:null,headerText:null,maxWidth:null,minWidth:"auto",resizable:"disabled",sortable:"auto",sortProperty:null,style:null,template:null,weight:1,width:null},beforeCurrentRow:null,beforeRowEdit:null,beforeRowEditEnd:null,ready:null,rowAction:null,sort:null},O.prototype.getContextByNode=function(e){var t=this.getSubIdByNode(e,!0);if(t&&"oj-table-cell"===t.subId){var o=t.rowIndex,l=this._getRowKeyForRowIdx(o);t.key=l}return t},O.prototype.getDataForVisibleRow=function(e){var t=this._getTableBodyRow(e);return null!=t?{key:c(t).data("rowKey"),data:c(t).data("rowData"),index:e}:null},O.prototype.getNodeBySubId=function(e){if(null==e)return this.element?this.element[0]:null;var t,o=e.subId;if("oj-table-cell"===o){var l=parseInt(e.rowIndex,10);return t=parseInt(e.columnIndex,10),this._getTableBodyLogicalCells(l)[t]}if("oj-table-header"===o||"oj-table-sort-ascending"===o||"oj-table-sort-descending"===o){t=e.index;var n=this._getTableHeaderLogicalColumns()[t];if(null!=n){if("oj-table-header"===o)return n;if("oj-table-sort-ascending"===o){var i=this._getTableElementsByClassName(n,O.CSS_CLASSES._COLUMN_HEADER_ASC_ICON_CLASS);if(i.length>0)return i[0]}else{var s=this._getTableElementsByClassName(n,O.CSS_CLASSES._COLUMN_HEADER_DSC_ICON_CLASS);if(s.length>0)return s[0]}}}else if("oj-table-footer"===o){t=e.index;var a=this._getTableFooterLogicalCells()[t];if(null!=a)return a}return null},O.prototype.getSubIdByNode=function(e,t){var o=this._getFirstAncestor(e,"."+O.CSS_CLASSES._TABLE_DATA_CELL_CLASS,!0);if(null!=o)return{subId:"oj-table-cell",rowIndex:this._getElementRowIdx(o),columnIndex:this._getElementColumnIdx(o)};var l=this._getFirstAncestor(e,"."+O.CSS_CLASSES._COLUMN_HEADER_ASC_ICON_CLASS,!0);if(null!=l)return{subId:t?"oj-table-header":"oj-table-sort-ascending",index:this._getElementColumnIdx(l)};var n=this._getFirstAncestor(e,"."+O.CSS_CLASSES._COLUMN_HEADER_DSC_ICON_CLASS,!0);if(null!=n)return{subId:t?"oj-table-header":"oj-table-sort-descending",index:this._getElementColumnIdx(n)};var i=this._getFirstAncestor(e,"."+O.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS,!0);if(null!=i)return{subId:"oj-table-header",index:this._getElementColumnIdx(i)};var s=this._getFirstAncestor(e,"."+O.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS,!0);return null!=s?{subId:"oj-table-footer",index:this._getElementColumnIdx(s)}:null},O.prototype.refresh=function(){this._super(),this._refresh()},O.prototype.refreshRow=function(e){return this._refreshRow(e,!0)},O.prototype.widget=function(){var e=this._getTableContainer();return null!=e?c(e):this.element},O.prototype._ComponentCreate=function(){this._super(),this._initTemplateEngine(),this._draw(),this._registerCustomEvents(),this._on(this._events),this._isTouchDevice()&&this._registerTouchEvents(),this._registerDomEventListeners(),this._cachedOptions=c.extend(!0,{},this.options),this._setEditableRowIdx(null),m.disableDefaultBrowserStyling(this.element[0])},O.prototype._AfterCreate=function(){this._super(),this._createContextMenuContainer(),this._isInitFetch=!0},O.prototype._SetupResources=function(){this._super(),this._registerResizeListener(),this._registerDataSourceEventListeners(),this._isInitFetch?(this._initFetch(),this._isInitFetch=!1):this._queueTask(function(){return this._getLayoutManager().notifyTableUpdate(O._UPDATE._REFRESH),this._invokeDataFetchRows()}.bind(this))},O.prototype._ReleaseResources=function(){this._super(),this._cleanComponent()},O.prototype._destroy=function(){this._cleanComponent(!0)},O.prototype._NotifyAttached=function(){this._super(),this._getLayoutManager().notifyTableUpdate(O._UPDATE._RESIZE),this._hasPendingTasks()||this._syncTableSizing()},O.prototype._NotifyShown=function(){this._super(),this._getLayoutManager().notifyTableUpdate(O._UPDATE._RESIZE),this._hasPendingTasks()||this._syncTableSizing()},O.prototype._VerifyConnectedForSetup=function(){return!0},O.prototype._GetDefaultContextMenu=function(){return this._defaultContextMenu},O.prototype._NotifyContextMenuGesture=function(e,t,o){var l={};if(this._contextMenuEvent=t.originalEvent,!(this._isNodeEditable(this._contextMenuEvent.target)||this._isNodeClickable(this._contextMenuEvent.target)||"touch"===o&&this._isNodeDraggable(this._contextMenuEvent.target))){var n,i=this._getFirstAncestor(this._contextMenuEvent.target,"."+O.CSS_CLASSES._TABLE_DATA_CELL_CLASS,!0);if(null!=i){var s=this._getElementColumnIdx(i);n=this._getTableHeaderColumn(s)}else n=this._getFirstAncestor(this._contextMenuEvent.target,"."+O.CSS_CLASSES._COLUMN_HEADER_CELL_CLASS,!0);if("keydown"===this._contextMenuEvent.type){var a=this._getTable();if(null==n&&(n=this._getTableHeaderColumn(this._activeHeaderIndex)),this._contextMenuEvent.target===a)if(null!=n)l.position={my:"start top",at:"start bottom",of:n};else{var r=this._getFocusedRowIdx();if(r>=0){var _=this._getTableBodyRow(r);l.position={my:"start top",at:"start bottom",of:_}}else l.position={my:"start top",at:"start bottom",of:this._contextMenuEvent.target}}else l.position={my:"start top",at:"start bottom",of:this._contextMenuEvent.target}}else{var d=this._getFirstAncestor(this._contextMenuEvent.target,"."+O.CSS_CLASSES._TABLE_FOOTER_CELL_CLASS,!0);if(null==n&&null==i&&null==d)return}this._contextMenuEventHeaderColumn=n;var h=e.element?e.element[0]:e;this._populateContextMenuItems(h,this._handleContextMenuSelect.bind(this));var u=h.querySelectorAll("[data-oj-command=oj-table-sortAsc]");u.length>0&&(u=u[0],n&&n.getAttribute("data-oj-sortable")===O._OPTION_ENABLED?"OJ-OPTION"===u.nodeName?u.removeAttribute("disabled"):u.classList.remove("oj-disabled"):"OJ-OPTION"===u.nodeName?u.setAttribute("disabled","true"):u.classList.add("oj-disabled"));var c=h.querySelectorAll("[data-oj-command=oj-table-sortDsc]");c.length>0&&(c=c[0],n&&n.getAttribute("data-oj-sortable")===O._OPTION_ENABLED?"OJ-OPTION"===c.nodeName?c.removeAttribute("disabled"):c.classList.remove("oj-disabled"):"OJ-OPTION"===c.nodeName?c.setAttribute("disabled","true"):c.classList.add("oj-disabled"));var S=h.querySelectorAll("[data-oj-command=oj-table-resize]");S.length>0&&(S=S[0],n&&n.getAttribute("data-oj-resizable")===O._OPTION_ENABLED?"OJ-OPTION"===S.nodeName?S.removeAttribute("disabled"):S.classList.remove("oj-disabled"):"OJ-OPTION"===S.nodeName?S.setAttribute("disabled","true"):S.classList.add("oj-disabled")),this._OpenContextMenu(t,o,l)}},O.prototype._setOption=function(e,t){if("selection"===e)this._selectionSet=!0,this._syncRangeSelection(t),this._superApply(arguments),this._validateInitialSelectionState(!0);else if("selected"===e)this._selectionSet=!1,this._superApply(arguments),this._validateInitialSelectionState(!0);else if("currentRow"===e){var o=this._setCurrentRow(t,null,!0);o===O._CURRENT_ROW_STATUS._UPDATED&&this._superApply(arguments)}else if("scrollPosition"===e)this._syncScrollPosition(t);else if("editRow"===e)this._setEditRow(t);else{this._superApply(arguments);var l=this._isTableRefreshNeeded(e,t);l&&("columns"===e||"selectionMode"===e&&void 0!==t.row?(this._clearCachedMetadata(),this._refreshTableHeader()):"data"===e&&this._beforeDataRefresh(),this._refresh())}},O.prototype._CompareOptionValues=function(e,t,o){switch(e){case"columns":case"currentRow":return u.Object.compareValues(t,o);case"selection":return t&&void 0===t.inverted&&(t.inverted=!1),o&&void 0===o.inverted&&(o.inverted=!1),(!t||!o||t.inverted===o.inverted)&&u.Object.compareValues(t,o);case"selected":return m.areKeySetsEqual(t.row,o.row)&&m.areKeySetsEqual(t.column,o.column);default:return this._super(e,t,o)}},O.prototype._getTableDndContext=function(){return this._tableDndContext||(this._tableDndContext=new D(this)),this._tableDndContext},O.prototype._getLayoutManager=function(){return null==this._layoutManager&&(this._isStickyLayoutEnabled()?this._isFixedLayoutEnabled()?this._layoutManager=new B(this):this._layoutManager=new N(this):(this._layoutManager=new w(this),this._isFixedLayoutEnabled()&&C.error('The current theme does not support the layout="fixed" attribute setting of the <oj-table>.'))),this._layoutManager},O.prototype._clearLayoutManager=function(){null!=this._layoutManager&&this._layoutManager.unregisterListeners(),this._layoutManager=null},u.__registerWidget("oj.ojTable",c.oj.baseComponent,new O),f.setDefaultOptions({ojTable:{display:f.createDynamicPropertyGetter(function(){return(g.parseJSONFromFontFamily("oj-table-option-defaults")||{}).display})}})})}();
//# sourceMappingURL=ojtable.js.map